{
  "version": 3,
  "sources": ["../src/index.ts", "../src/core/theme.ts", "../src/core/Chart.ts", "../src/charts/BarChart.ts", "../src/charts/LineChart.ts", "../src/charts/HBarChart.ts", "../src/charts/StatCard.ts", "../src/charts/RadarChart.ts", "../src/charts/DonutChart.ts", "../src/charts/HeatmapChart.ts", "../src/charts/BumpChart.ts"],
  "sourcesContent": ["// DropThe Charts -- Main Entry Point\n\nimport { BarChart } from './charts/BarChart';\nimport { LineChart } from './charts/LineChart';\nimport { HBarChart } from './charts/HBarChart';\nimport { StatCard } from './charts/StatCard';\nimport { RadarChart } from './charts/RadarChart';\nimport { DonutChart } from './charts/DonutChart';\nimport { HeatmapChart } from './charts/HeatmapChart';\nimport { BumpChart } from './charts/BumpChart';\nimport { getTheme, midnight, sand } from './core/theme';\n\nexport { BarChart, LineChart, HBarChart, StatCard, RadarChart, DonutChart, HeatmapChart, BumpChart, getTheme, midnight, sand };\n\nexport function create(container: HTMLElement | string, config: any) {\n  switch (config.type) {\n    case 'bar': return new BarChart(container, config);\n    case 'line': return new LineChart(container, config);\n    case 'hbar': return new HBarChart(container, config);\n    case 'stat': return new StatCard(container, config);\n    case 'radar': return new RadarChart(container, config);\n    case 'donut': return new DonutChart(container, config);\n    case 'heatmap': return new HeatmapChart(container, config);\n    case 'bump': return new BumpChart(container, config);\n    default: console.error('DropThe Charts: unknown type', config.type);\n  }\n}\n\n// Auto-init from data attributes\nexport function init() {\n  document.querySelectorAll('[data-dt-chart]').forEach(el => {\n    try {\n      const config = JSON.parse(el.getAttribute('data-dt-chart') || '{}');\n      create(el as HTMLElement, config);\n    } catch (e) {\n      console.error('DropThe Charts: invalid config', e);\n    }\n  });\n}\n\nif (typeof document !== 'undefined') {\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n}\n", "// DropThe Charts -- Theme System\n// Pastel risograph aesthetic with film grain on elements\n// Brand colors from dt-tokens.css, shifted to pastel\n\nexport interface Theme {\n  name: string;\n  bg: string;\n  surface: string;\n  grid: string;\n  textPrimary: string;\n  textSecondary: string;\n  textSource: string;\n  gradients: string[][];\n  highlightGradient: string[];\n  lineStroke: string;\n  lineFill: [string, string];\n  fontFamily: string;\n  monoFamily: string;\n  grain: number;\n  grainTarget: 'all' | 'elements';\n}\n\n// Pastel versions of DropThe brand accents\n// Original -> Pastel\n// tech #3b82f6 -> #93b8fd\n// coin #f59e0b -> #fdd08a\n// money #22c55e -> #86efac\n// culture #ec4899 -> #f9a8d4\n// gaming #8b5cf6 -> #c4b5fd\n// gear #f97316 -> #fdba74\n// health #E63946 -> #fca5a5\n// travel #069494 -> #5eead4\n// feel-good #4ade80 -> #bbf7d0\n// stream #10B981 -> #6ee7b7\n// data #007BFF -> #93c5fd\n\nexport const midnight: Theme = {\n  name: 'midnight',\n  bg: '#0a0a0f',\n  surface: '#141419',\n  grid: '#1a1a22',\n  textPrimary: '#f0f0f0',\n  textSecondary: '#555566',\n  textSource: '#333344',\n  gradients: [\n    ['#c4b5fd', '#f9a8d4'],  // gaming -> culture\n    ['#93b8fd', '#c4b5fd'],  // tech -> gaming\n    ['#86efac', '#93b8fd'],  // money -> tech\n    ['#fdd08a', '#f9a8d4'],  // coin -> culture\n    ['#fdba74', '#fdd08a'],  // gear -> coin\n    ['#5eead4', '#86efac'],  // travel -> money\n  ],\n  highlightGradient: ['#f9a8d4', '#93b8fd'], // culture -> tech\n  lineStroke: '#c4b5fd',\n  lineFill: ['rgba(196,181,253,0.35)', 'rgba(196,181,253,0)'],\n  fontFamily: \"'Space Grotesk', system-ui, sans-serif\",\n  monoFamily: \"'SF Mono', 'Fira Code', monospace\",\n  grain: 0.055, // slightly higher for riso effect\n  grainTarget: 'elements',\n};\n\nexport const sand: Theme = {\n  name: 'sand',\n  bg: '#ebe5d9',\n  surface: '#e0dace',\n  grid: '#d4cec2',\n  textPrimary: '#1a1815',\n  textSecondary: '#8a8478',\n  textSource: '#b0a89c',\n  // Same pastel colors on sand\n  gradients: [\n    ['#c4b5fd', '#f9a8d4'],\n    ['#93b8fd', '#c4b5fd'],\n    ['#86efac', '#93b8fd'],\n    ['#fdd08a', '#f9a8d4'],\n    ['#fdba74', '#fdd08a'],\n    ['#5eead4', '#86efac'],\n  ],\n  highlightGradient: ['#f9a8d4', '#93b8fd'],\n  lineStroke: '#c4b5fd',\n  lineFill: ['rgba(196,181,253,0.3)', 'rgba(196,181,253,0)'],\n  fontFamily: \"'Space Grotesk', system-ui, sans-serif\",\n  monoFamily: \"'SF Mono', 'Fira Code', monospace\",\n  grain: 0.055,\n  grainTarget: 'elements',\n};\n\nexport function getTheme(name?: string): Theme {\n  if (name === 'sand') return sand;\n  return midnight;\n}\n", "// DropThe Charts -- Base Chart\n\nimport { Theme, getTheme } from './theme';\n\nexport interface ChartConfig {\n  type: string;\n  title?: string;\n  subtitle?: string;\n  source?: string;\n  sourceUrl?: string;\n  theme?: string;\n  width?: number;\n  height?: number;\n  animate?: boolean;\n  data: any;\n}\n\nexport interface ChartPadding {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n}\n\nexport class BaseChart {\n  canvas: HTMLCanvasElement;\n  ctx: CanvasRenderingContext2D;\n  config: ChartConfig;\n  theme: Theme;\n  width: number;\n  height: number;\n  dpr: number;\n  padding: ChartPadding;\n  animProgress: number = 0;\n  animFrame: number = 0;\n  private bgSnapshot: ImageData | null = null;\n\n  constructor(container: HTMLElement | string, config: ChartConfig) {\n    const el = typeof container === 'string'\n      ? document.querySelector(container) as HTMLElement\n      : container;\n\n    if (!el) throw new Error('DropThe Charts: container not found');\n\n    this.config = config;\n    this.theme = getTheme(config.theme);\n    this.dpr = window.devicePixelRatio || 1;\n    this.width = config.width || el.clientWidth || 600;\n    this.height = config.height || 400;\n\n    this.padding = { top: 60, right: 24, bottom: 48, left: 24 };\n\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = this.width * this.dpr;\n    this.canvas.height = this.height * this.dpr;\n    this.canvas.style.width = this.width + 'px';\n    this.canvas.style.height = this.height + 'px';\n    this.canvas.style.borderRadius = '12px';\n    el.appendChild(this.canvas);\n\n    this.ctx = this.canvas.getContext('2d')!;\n    this.ctx.scale(this.dpr, this.dpr);\n  }\n\n  snapshotBackground() {\n    this.bgSnapshot = this.ctx.getImageData(0, 0, this.width * this.dpr, this.height * this.dpr);\n  }\n\n  drawGrain() {\n    const { ctx, width, height, theme } = this;\n    const w = width * this.dpr;\n    const h = height * this.dpr;\n    const imageData = ctx.getImageData(0, 0, w, h);\n    const data = imageData.data;\n    const bg = this.bgSnapshot?.data;\n    const elementsOnly = theme.grainTarget === 'elements' && bg;\n    const noiseAmt = 70; // riso texture intensity\n\n    for (let i = 0; i < data.length; i += 4) {\n      if (elementsOnly) {\n        const dr = Math.abs(data[i] - bg![i]);\n        const dg = Math.abs(data[i+1] - bg![i+1]);\n        const db = Math.abs(data[i+2] - bg![i+2]);\n        const diff = dr + dg + db;\n        if (diff < 8) continue;\n        const strength = Math.min(1, diff / 80);\n        const noise = (Math.random() - 0.5) * noiseAmt * strength;\n        data[i]   = Math.min(255, Math.max(0, data[i] + noise));\n        data[i+1] = Math.min(255, Math.max(0, data[i+1] + noise));\n        data[i+2] = Math.min(255, Math.max(0, data[i+2] + noise));\n      } else {\n        const noise = (Math.random() - 0.5) * 50;\n        data[i]   = Math.min(255, Math.max(0, data[i] + noise));\n        data[i+1] = Math.min(255, Math.max(0, data[i+1] + noise));\n        data[i+2] = Math.min(255, Math.max(0, data[i+2] + noise));\n      }\n    }\n    ctx.putImageData(imageData, 0, 0);\n  }\n\n  drawBackground() {\n    const { ctx, width, height, theme } = this;\n    ctx.fillStyle = theme.bg;\n    ctx.fillRect(0, 0, width, height);\n  }\n\n  drawTitle() {\n    const { ctx, config, theme, padding } = this;\n    if (!config.title) return;\n    ctx.fillStyle = theme.textPrimary;\n    ctx.font = `600 18px ${theme.fontFamily}`;\n    ctx.textAlign = 'left';\n    ctx.fillText(config.title, padding.left, 32);\n    if (config.subtitle) {\n      ctx.fillStyle = theme.textSecondary;\n      ctx.font = `400 13px ${theme.fontFamily}`;\n      ctx.fillText(config.subtitle, padding.left, 50);\n    }\n  }\n\n  drawSource() {\n    const { ctx, config, theme, width, height } = this;\n    const text = `Source: ${config.source || 'DropThe'} | dropthe.org`;\n    ctx.fillStyle = theme.textSource;\n    ctx.font = `400 10px ${theme.monoFamily}`;\n    ctx.textAlign = 'left';\n    ctx.fillText(text, this.padding.left, height - 12);\n  }\n\n  createGradient(x: number, y1: number, y2: number, colors: string[]): CanvasGradient {\n    const grad = this.ctx.createLinearGradient(x, y1, x, y2);\n    grad.addColorStop(0, colors[0]);\n    grad.addColorStop(1, colors[1]);\n    return grad;\n  }\n\n  // Lava lamp / mesh gradient fill for a rectangular region\n  // Creates overlapping radial gradients that blend like bubbles\n  fillLavaGradient(x: number, y: number, w: number, h: number, colors: string[], seed: number = 0) {\n    const { ctx } = this;\n\n    // Use seed for deterministic but varied blob positions per bar\n    const s = (n: number) => {\n      let v = Math.sin(seed * 127.1 + n * 311.7) * 43758.5453;\n      return v - Math.floor(v);\n    };\n\n    // Base: fill with first color\n    ctx.fillStyle = colors[0];\n    ctx.fill();\n\n    // Layer 3-4 radial gradient blobs\n    const blobCount = 4;\n    for (let i = 0; i < blobCount; i++) {\n      const bx = x + w * (0.15 + s(i * 3) * 0.7);\n      const by = y + h * (0.15 + s(i * 3 + 1) * 0.7);\n      const radius = Math.max(w, h) * (0.4 + s(i * 3 + 2) * 0.5);\n\n      // Alternate between the two gradient colors + their blends\n      const colorIdx = i % 2;\n      const blobColor = colors[colorIdx];\n\n      const radGrad = ctx.createRadialGradient(bx, by, 0, bx, by, radius);\n      radGrad.addColorStop(0, blobColor);\n      radGrad.addColorStop(0.6, blobColor + '88');\n      radGrad.addColorStop(1, blobColor + '00');\n\n      ctx.save();\n      // Clip to current path (the bar shape)\n      ctx.fillStyle = radGrad;\n      ctx.globalCompositeOperation = 'source-atop';\n      ctx.fillRect(x - radius, y - radius, w + radius * 2, h + radius * 2);\n      ctx.restore();\n    }\n  }\n\n  animate(drawFn: (progress: number) => void, duration: number = 800) {\n    if (this.config.animate === false) {\n      drawFn(1);\n      this.drawGrain();\n      return;\n    }\n    const start = performance.now();\n    const step = (now: number) => {\n      const elapsed = now - start;\n      const t = Math.min(elapsed / duration, 1);\n      const ease = 1 - Math.pow(1 - t, 3);\n      this.animProgress = ease;\n      drawFn(ease);\n      if (t < 1) {\n        this.animFrame = requestAnimationFrame(step);\n      } else {\n        this.drawGrain();\n      }\n    };\n    this.animFrame = requestAnimationFrame(step);\n  }\n\n  destroy() {\n    if (this.animFrame) cancelAnimationFrame(this.animFrame);\n    this.canvas.remove();\n  }\n\n  toPNG(): string {\n    return this.canvas.toDataURL('image/png');\n  }\n}\n", "// DropThe Charts -- Bar Chart (Vertical)\n\nimport { BaseChart, ChartConfig } from '../core/Chart';\n\nexport interface BarDataPoint {\n  label: string;\n  value: number;\n  url?: string;\n  highlight?: boolean;\n}\n\nexport interface BarChartConfig extends ChartConfig {\n  data: BarDataPoint[];\n  valuePrefix?: string;\n  valueSuffix?: string;\n  showValues?: boolean;\n  valuesOnBar?: boolean;\n  barRadius?: number;\n  highlightTop?: number; // highlight top N bars\n  highlightLine?: number; // highlight specific bar at position N (1-indexed)\n}\n\nexport class BarChart extends BaseChart {\n  barConfig: BarChartConfig;\n\n  constructor(container: HTMLElement | string, config: BarChartConfig) {\n    super(container, config);\n    this.barConfig = { showValues: true, valuesOnBar: false, barRadius: 6, ...config };\n    this.render();\n  }\n\n  render() {\n    this.animate((progress) => this.draw(progress));\n  }\n\n  isActive(d: BarDataPoint, i: number): boolean {\n    const { data, highlightTop, highlightLine } = this.barConfig;\n    if (highlightLine !== undefined) return i === (highlightLine - 1); // 1-indexed\n    if (highlightTop !== undefined) return i < highlightTop;\n    if (data.some(dd => dd.highlight)) return !!d.highlight;\n    return true;\n  }\n\n  hasContrast(): boolean {\n    const { data, highlightTop, highlightLine } = this.barConfig;\n    if (highlightLine !== undefined) return true;\n    if (highlightTop !== undefined) return highlightTop < data.length;\n    return data.some(d => d.highlight);\n  }\n\n  draw(progress: number) {\n    const { ctx, width, height, theme, padding, barConfig } = this;\n    const { data, valuePrefix = '', valueSuffix = '', showValues, valuesOnBar, barRadius } = barConfig;\n\n    this.drawBackground();\n    this.drawTitle();\n\n    const chartTop = padding.top + 8;\n    const chartBottom = height - padding.bottom - 20;\n    const chartLeft = padding.left;\n    const chartRight = width - padding.right;\n    const chartWidth = chartRight - chartLeft;\n    const chartHeight = chartBottom - chartTop;\n\n    const barCount = data.length;\n    const barGap = Math.max(12, chartWidth * 0.08);\n    const totalGaps = (barCount - 1) * barGap;\n    const barWidth = Math.min(80, (chartWidth - totalGaps) / barCount);\n    const totalBarsWidth = barCount * barWidth + totalGaps;\n    const startX = chartLeft + (chartWidth - totalBarsWidth) / 2;\n    const maxVal = Math.max(...data.map(d => d.value));\n    const scaleY = chartHeight / (maxVal * 1.15);\n    const contrast = this.hasContrast();\n\n    // Grid\n    ctx.strokeStyle = theme.grid; ctx.lineWidth = 1;\n    for (let i = 1; i <= 3; i++) {\n      const y = chartBottom - (chartHeight * i / 4);\n      ctx.beginPath(); ctx.moveTo(chartLeft, y); ctx.lineTo(chartRight, y); ctx.stroke();\n    }\n    ctx.beginPath(); ctx.moveTo(chartLeft, chartBottom); ctx.lineTo(chartRight, chartBottom); ctx.stroke();\n\n    // Labels\n    data.forEach((d, i) => {\n      const x = startX + i * (barWidth + barGap);\n      const active = this.isActive(d, i);\n      ctx.fillStyle = (contrast && !active) ? theme.textSource : theme.textSecondary;\n      ctx.font = `400 11px ${theme.monoFamily}`;\n      ctx.textAlign = 'center';\n      ctx.fillText(this.truncateLabel(d.label, barWidth + barGap * 0.6), x + barWidth / 2, chartBottom + 16);\n    });\n\n    this.drawSource();\n    this.snapshotBackground();\n\n    // Bars\n    data.forEach((d, i) => {\n      const x = startX + i * (barWidth + barGap);\n      const barHeight = d.value * scaleY * progress;\n      const y = chartBottom - barHeight;\n      if (barHeight <= 0) return;\n\n      const active = this.isActive(d, i);\n      const r = Math.min(barRadius || 6, barHeight / 2);\n\n      ctx.beginPath();\n      ctx.moveTo(x + r, y); ctx.lineTo(x + barWidth - r, y);\n      ctx.quadraticCurveTo(x + barWidth, y, x + barWidth, y + r);\n      ctx.lineTo(x + barWidth, y + barHeight); ctx.lineTo(x, y + barHeight);\n      ctx.lineTo(x, y + r); ctx.quadraticCurveTo(x, y, x + r, y);\n      ctx.closePath();\n\n      if (contrast && !active) {\n        const isDark = theme.name === 'midnight';\n        ctx.fillStyle = isDark ? 'rgba(255,255,240,0.08)' : 'rgba(0,0,0,0.06)';\n        ctx.fill();\n        ctx.strokeStyle = isDark ? 'rgba(255,255,240,0.06)' : 'rgba(0,0,0,0.04)';\n        ctx.lineWidth = 1; ctx.stroke();\n      } else {\n        ctx.save(); ctx.clip();\n        const gc = theme.gradients[i % theme.gradients.length];\n        ctx.fillStyle = gc[0];\n        ctx.fillRect(x, y, barWidth, barHeight);\n        this.drawLavaBlobs(x, y, barWidth, barHeight, gc, i);\n        ctx.restore();\n      }\n\n      // Values\n      if (showValues && progress > 0.3) {\n        const a = Math.min(1, (progress - 0.3) * 1.43);\n        ctx.globalAlpha = a;\n        const cp = Math.min(1, (progress - 0.3) / 0.7);\n        const ec = 1 - Math.pow(1 - cp, 2);\n        const vt = valuePrefix + this.formatNumber(d.value * ec) + valueSuffix;\n\n        if (valuesOnBar && barHeight > 35) {\n          const isDark = theme.name === 'midnight';\n          ctx.fillStyle = (contrast && !active)\n            ? (isDark ? 'rgba(255,255,240,0.25)' : 'rgba(0,0,0,0.2)')\n            : (isDark ? 'rgba(10,10,15,0.75)' : 'rgba(255,255,255,0.9)');\n          ctx.font = active ? `700 16px ${theme.fontFamily}` : `600 14px ${theme.fontFamily}`;\n          ctx.textAlign = 'center';\n          ctx.fillText(vt, x + barWidth / 2, y + 22);\n        } else {\n          if (active) {\n            const gc = theme.gradients[i % theme.gradients.length];\n            const tg = ctx.createLinearGradient(x, 0, x + barWidth, 0);\n            tg.addColorStop(0, gc[0]); tg.addColorStop(1, gc[1]);\n            ctx.fillStyle = tg;\n            ctx.font = `700 18px ${theme.fontFamily}`;\n          } else {\n            ctx.fillStyle = theme.textSource;\n            ctx.font = `500 14px ${theme.fontFamily}`;\n          }\n          ctx.textAlign = 'center';\n          ctx.fillText(vt, x + barWidth / 2, y - 12);\n        }\n        ctx.globalAlpha = 1;\n      }\n    });\n  }\n\n  drawLavaBlobs(x: number, y: number, w: number, h: number, colors: string[], seed: number) {\n    const { ctx } = this;\n    const s = (n: number) => { let v = Math.sin(seed*127.1+n*311.7)*43758.5453; return v-Math.floor(v); };\n    for (let i = 0; i < 5; i++) {\n      const bx=x+w*(0.1+s(i*3)*0.8), by=y+h*(0.1+s(i*3+1)*0.8);\n      const radius=Math.max(w,h)*(0.35+s(i*3+2)*0.55), color=colors[i%colors.length];\n      const rg=ctx.createRadialGradient(bx,by,0,bx,by,radius);\n      rg.addColorStop(0,color); rg.addColorStop(0.5,color+'99'); rg.addColorStop(1,color+'00');\n      ctx.globalCompositeOperation='source-atop'; ctx.fillStyle=rg; ctx.fillRect(x,y,w,h);\n      ctx.globalCompositeOperation='source-over';\n    }\n  }\n\n  formatNumber(n: number): string {\n    if (n>=1e9) return (n/1e9).toFixed(1)+'B'; if (n>=1e6) return (n/1e6).toFixed(1)+'M';\n    if (n>=1e3) return (n/1e3).toFixed(1)+'K'; return n.toLocaleString();\n  }\n\n  truncateLabel(label: string, maxWidth: number): string {\n    const { ctx, theme } = this;\n    ctx.font = `400 11px ${theme.monoFamily}`;\n    if (ctx.measureText(label).width <= maxWidth) return label;\n    const p=label.split(' '); if (p.length>1 && ctx.measureText(p[0]).width<=maxWidth) return p[0];\n    let t=label; while (t.length>3 && ctx.measureText(t+'..').width>maxWidth) t=t.slice(0,-1); return t+'..';\n  }\n}\n", "// DropThe Charts -- Line Chart (Time-Series)\n// Lava gradient area fills\n\nimport { BaseChart, ChartConfig } from '../core/Chart';\n\nexport interface LineDataPoint {\n  x: number | string;\n  y: number;\n}\n\nexport interface LineSeries {\n  label: string;\n  data: LineDataPoint[];\n  color?: string;\n}\n\nexport interface LineChartConfig extends ChartConfig {\n  data: LineSeries[];\n  showDots?: boolean;\n  showArea?: boolean;\n  yPrefix?: string;\n  ySuffix?: string;\n}\n\nexport class LineChart extends BaseChart {\n  lineConfig: LineChartConfig;\n\n  constructor(container: HTMLElement | string, config: LineChartConfig) {\n    super(container, config);\n    this.lineConfig = { showDots: true, showArea: true, ...config };\n    this.render();\n  }\n\n  render() {\n    this.animate((progress) => this.draw(progress));\n  }\n\n  draw(progress: number) {\n    const { ctx, width, height, theme, padding, lineConfig } = this;\n    const { data: series, showDots, showArea, yPrefix = '', ySuffix = '' } = lineConfig;\n\n    this.drawBackground();\n    this.drawTitle();\n\n    const chartTop = padding.top + 8;\n    const chartBottom = height - padding.bottom - 20;\n    const chartLeft = padding.left + 50;\n    const chartRight = width - padding.right;\n    const chartWidth = chartRight - chartLeft;\n    const chartHeight = chartBottom - chartTop;\n\n    const allY = series.flatMap(s => s.data.map(d => d.y));\n    const minY = Math.min(...allY) * 0.95;\n    const maxY = Math.max(...allY) * 1.05;\n    const yRange = maxY - minY || 1;\n\n    const allX = series[0]?.data.map(d => Number(d.x)) || [];\n    const minX = Math.min(...allX);\n    const maxX = Math.max(...allX);\n    const xRange = maxX - minX || 1;\n\n    // Y grid\n    const yTicks = 5;\n    ctx.strokeStyle = theme.grid;\n    ctx.lineWidth = 1;\n    for (let i = 0; i <= yTicks; i++) {\n      const frac = i / yTicks;\n      const y = chartBottom - frac * chartHeight;\n      const val = minY + frac * yRange;\n      ctx.beginPath();\n      ctx.moveTo(chartLeft, y);\n      ctx.lineTo(chartRight, y);\n      ctx.stroke();\n      ctx.fillStyle = theme.textSecondary;\n      ctx.font = `400 10px ${theme.monoFamily}`;\n      ctx.textAlign = 'right';\n      ctx.fillText(yPrefix + this.formatVal(val) + ySuffix, chartLeft - 8, y + 4);\n    }\n\n    // X labels\n    const xLabelCount = Math.min(allX.length, 8);\n    const xStep = Math.max(1, Math.floor(allX.length / xLabelCount));\n    ctx.fillStyle = theme.textSecondary;\n    ctx.font = `400 10px ${theme.monoFamily}`;\n    ctx.textAlign = 'center';\n    for (let i = 0; i < allX.length; i += xStep) {\n      const px = chartLeft + ((allX[i] - minX) / xRange) * chartWidth;\n      ctx.fillText(String(allX[i]), px, chartBottom + 16);\n    }\n\n    // Baseline\n    ctx.strokeStyle = theme.textSecondary + '40';\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.moveTo(chartLeft, chartBottom);\n    ctx.lineTo(chartRight, chartBottom);\n    ctx.stroke();\n\n    // Legend\n    if (series.length > 1) {\n      let legendX = chartLeft;\n      const legendY = chartBottom + 32;\n      series.forEach((s, si) => {\n        const color = s.color || theme.gradients[si % theme.gradients.length][0];\n        ctx.fillStyle = color;\n        ctx.fillRect(legendX, legendY - 4, 12, 3);\n        ctx.fillStyle = theme.textSecondary;\n        ctx.font = `400 10px ${theme.monoFamily}`;\n        ctx.textAlign = 'left';\n        ctx.fillText(s.label, legendX + 16, legendY);\n        legendX += ctx.measureText(s.label).width + 32;\n      });\n    }\n\n    this.drawSource();\n    this.snapshotBackground();\n\n    // Draw series\n    series.forEach((s, si) => {\n      const color = s.color || theme.gradients[si % theme.gradients.length][0];\n      const gradColors = theme.gradients[si % theme.gradients.length];\n      const points: [number, number][] = [];\n\n      s.data.forEach(d => {\n        const px = chartLeft + ((Number(d.x) - minX) / xRange) * chartWidth;\n        const py = chartBottom - ((d.y - minY) / yRange) * chartHeight;\n        points.push([px, py]);\n      });\n\n      const visibleCount = Math.max(1, Math.floor(points.length * progress));\n      const visible = points.slice(0, visibleCount);\n\n      // Area fill with lava blobs\n      if (showArea && visible.length > 1) {\n        ctx.save();\n\n        // Create area path\n        ctx.beginPath();\n        ctx.moveTo(visible[0][0], chartBottom);\n        visible.forEach(([x, y]) => ctx.lineTo(x, y));\n        ctx.lineTo(visible[visible.length - 1][0], chartBottom);\n        ctx.closePath();\n        ctx.clip();\n\n        // Base fill\n        const baseGrad = ctx.createLinearGradient(0, chartTop, 0, chartBottom);\n        baseGrad.addColorStop(0, gradColors[0] + '50');\n        baseGrad.addColorStop(1, gradColors[0] + '05');\n        ctx.fillStyle = baseGrad;\n        ctx.fillRect(chartLeft, chartTop, chartWidth, chartHeight);\n\n        // Lava blobs inside area\n        const areaMinX = visible[0][0];\n        const areaMaxX = visible[visible.length - 1][0];\n        const areaW = areaMaxX - areaMinX;\n        const blobCount = 6;\n        for (let i = 0; i < blobCount; i++) {\n          let v = Math.sin(si * 127.1 + i * 311.7) * 43758.5453;\n          const rand = v - Math.floor(v);\n          let v2 = Math.sin(si * 127.1 + (i * 3 + 1) * 311.7) * 43758.5453;\n          const rand2 = v2 - Math.floor(v2);\n          let v3 = Math.sin(si * 127.1 + (i * 3 + 2) * 311.7) * 43758.5453;\n          const rand3 = v3 - Math.floor(v3);\n\n          const bx = areaMinX + areaW * (0.05 + rand * 0.9);\n          const by = chartTop + chartHeight * (0.2 + rand2 * 0.6);\n          const radius = chartHeight * (0.3 + rand3 * 0.4);\n          const blobColor = gradColors[i % gradColors.length];\n\n          const radGrad = ctx.createRadialGradient(bx, by, 0, bx, by, radius);\n          radGrad.addColorStop(0, blobColor + '60');\n          radGrad.addColorStop(0.5, blobColor + '30');\n          radGrad.addColorStop(1, blobColor + '00');\n\n          ctx.fillStyle = radGrad;\n          ctx.fillRect(chartLeft, chartTop, chartWidth, chartHeight);\n        }\n\n        ctx.restore();\n      }\n\n      // Line\n      if (visible.length > 1) {\n        ctx.beginPath();\n        ctx.moveTo(visible[0][0], visible[0][1]);\n        for (let i = 1; i < visible.length; i++) {\n          ctx.lineTo(visible[i][0], visible[i][1]);\n        }\n        ctx.strokeStyle = color;\n        ctx.lineWidth = 2.5;\n        ctx.lineJoin = 'round';\n        ctx.lineCap = 'round';\n        ctx.stroke();\n      }\n\n      // Dots\n      if (showDots && progress > 0.8) {\n        const dotAlpha = (progress - 0.8) * 5;\n        ctx.globalAlpha = dotAlpha;\n        visible.forEach(([x, y]) => {\n          ctx.beginPath();\n          ctx.arc(x, y, 3, 0, Math.PI * 2);\n          ctx.fillStyle = color;\n          ctx.fill();\n          ctx.strokeStyle = theme.bg;\n          ctx.lineWidth = 1.5;\n          ctx.stroke();\n        });\n        ctx.globalAlpha = 1;\n      }\n    });\n  }\n\n  formatVal(n: number): string {\n    if (Math.abs(n) >= 1e12) return (n / 1e12).toFixed(1) + 'T';\n    if (Math.abs(n) >= 1e9) return (n / 1e9).toFixed(1) + 'B';\n    if (Math.abs(n) >= 1e6) return (n / 1e6).toFixed(1) + 'M';\n    if (Math.abs(n) >= 1e3) return (n / 1e3).toFixed(1) + 'K';\n    return n.toFixed(0);\n  }\n}\n", "// DropThe Charts -- Horizontal Bar Chart (Rankings)\n\nimport { BaseChart, ChartConfig } from '../core/Chart';\n\nexport interface HBarDataPoint {\n  label: string;\n  value: number;\n  url?: string;\n  highlight?: boolean;\n}\n\nexport interface HBarChartConfig extends ChartConfig {\n  data: HBarDataPoint[];\n  valuePrefix?: string;\n  valueSuffix?: string;\n  barHeight?: number;\n  valuesOnBar?: boolean;\n  showRank?: boolean;\n  highlightTop?: number; // highlight top N bars\n  highlightLine?: number; // highlight specific bar at position N (1-indexed)\n}\n\nexport class HBarChart extends BaseChart {\n  hbarConfig: HBarChartConfig;\n\n  constructor(container: HTMLElement | string, config: HBarChartConfig) {\n    const barH = config.barHeight || 36;\n    const autoHeight = Math.max(300, config.data.length * (barH + 8) + 100);\n    config.height = config.height || autoHeight;\n    super(container, config);\n    this.hbarConfig = { barHeight: barH, valuesOnBar: false, showRank: false, ...config };\n    this.render();\n  }\n\n  render() {\n    this.animate((progress) => this.draw(progress));\n  }\n\n  isActive(d: HBarDataPoint, i: number): boolean {\n    const { data, highlightTop, highlightLine, showRank } = this.hbarConfig;\n    if (highlightLine !== undefined) return i === (highlightLine - 1); // 1-indexed\n    if (highlightTop !== undefined) return i < highlightTop;\n    if (showRank) return i < 3;\n    if (data.some(dd => dd.highlight)) return !!d.highlight;\n    return true;\n  }\n\n  hasContrast(): boolean {\n    const { data, highlightTop, highlightLine, showRank } = this.hbarConfig;\n    if (highlightLine !== undefined) return true;\n    if (highlightTop !== undefined) return highlightTop < data.length;\n    if (showRank) return data.length > 3;\n    return data.some(d => d.highlight);\n  }\n\n  draw(progress: number) {\n    const { ctx, width, height, theme, padding, hbarConfig } = this;\n    const { data, valuePrefix = '', valueSuffix = '', barHeight = 36, valuesOnBar, showRank } = hbarConfig;\n\n    this.drawBackground();\n    this.drawTitle();\n\n    const chartTop = padding.top + 8;\n    const rankWidth = showRank ? 36 : 0;\n    const labelWidth = 120;\n    const chartLeft = padding.left + rankWidth + labelWidth;\n    const chartRight = width - padding.right - 70;\n    const chartWidth = chartRight - chartLeft;\n    const barGap = 8;\n    const maxVal = Math.max(...data.map(d => d.value));\n    const contrast = this.hasContrast();\n\n    // Rank badges + labels\n    data.forEach((d, i) => {\n      const y = chartTop + i * (barHeight + barGap);\n      const active = this.isActive(d, i);\n\n      if (showRank) {\n        const rankX = padding.left;\n        const rankY = y + barHeight / 2;\n\n        if (active) {\n          const gc = theme.gradients[i % theme.gradients.length];\n          const pillW = 26, pillH = 18;\n          const grad = ctx.createLinearGradient(rankX, rankY-pillH/2, rankX+pillW, rankY-pillH/2);\n          grad.addColorStop(0, gc[0]); grad.addColorStop(1, gc[1]);\n          ctx.beginPath(); ctx.roundRect(rankX, rankY-pillH/2, pillW, pillH, 9);\n          ctx.fillStyle = grad; ctx.fill();\n          ctx.fillStyle = theme.name === 'midnight' ? 'rgba(10,10,15,0.8)' : 'rgba(255,255,255,0.9)';\n          ctx.font = `700 10px ${theme.fontFamily}`;\n          ctx.textAlign = 'center';\n          ctx.fillText('#'+(i+1), rankX+pillW/2, rankY+3.5);\n        } else {\n          ctx.fillStyle = theme.textSource;\n          ctx.font = `400 10px ${theme.monoFamily}`;\n          ctx.textAlign = 'center';\n          ctx.fillText('#'+(i+1), rankX+13, rankY+4);\n        }\n      }\n\n      ctx.fillStyle = (contrast && !active) ? theme.textSource : theme.textSecondary;\n      ctx.font = active ? `500 12px ${theme.fontFamily}` : `400 12px ${theme.fontFamily}`;\n      ctx.textAlign = 'right';\n      ctx.fillText(d.label, chartLeft - 12, y + barHeight/2 + 4);\n    });\n\n    this.drawSource();\n    this.snapshotBackground();\n\n    // Bars\n    data.forEach((d, i) => {\n      const y = chartTop + i * (barHeight + barGap);\n      const barW = (d.value / maxVal) * chartWidth * progress;\n      if (barW <= 0) return;\n\n      const active = this.isActive(d, i);\n      const gc = theme.gradients[i % theme.gradients.length];\n      const r = Math.min(4, barW / 2);\n\n      ctx.beginPath();\n      ctx.moveTo(chartLeft, y);\n      ctx.lineTo(chartLeft+barW-r, y);\n      ctx.quadraticCurveTo(chartLeft+barW, y, chartLeft+barW, y+r);\n      ctx.lineTo(chartLeft+barW, y+barHeight-r);\n      ctx.quadraticCurveTo(chartLeft+barW, y+barHeight, chartLeft+barW-r, y+barHeight);\n      ctx.lineTo(chartLeft, y+barHeight);\n      ctx.closePath();\n\n      if (contrast && !active) {\n        const isDark = theme.name === 'midnight';\n        ctx.fillStyle = isDark ? 'rgba(255,255,240,0.08)' : 'rgba(0,0,0,0.06)';\n        ctx.fill();\n        ctx.strokeStyle = isDark ? 'rgba(255,255,240,0.06)' : 'rgba(0,0,0,0.04)';\n        ctx.lineWidth = 1; ctx.stroke();\n      } else {\n        ctx.save(); ctx.clip();\n        ctx.fillStyle = gc[0];\n        ctx.fillRect(chartLeft, y, barW, barHeight);\n        this.drawLavaBlobs(chartLeft, y, barW, barHeight, gc, i);\n        ctx.restore();\n      }\n\n      // Values\n      if (progress > 0.3) {\n        const a = Math.min(1, (progress-0.3)*1.43);\n        ctx.globalAlpha = a;\n        const cp = Math.min(1, (progress-0.3)/0.7);\n        const ec = 1-Math.pow(1-cp, 2);\n        const vt = valuePrefix + this.formatNumber(d.value * ec) + valueSuffix;\n\n        if (valuesOnBar && barW > 70) {\n          const isDark = theme.name === 'midnight';\n          ctx.fillStyle = (contrast && !active)\n            ? (isDark ? 'rgba(255,255,240,0.25)' : 'rgba(0,0,0,0.2)')\n            : (isDark ? 'rgba(10,10,15,0.75)' : 'rgba(255,255,255,0.9)');\n          ctx.font = active ? `700 14px ${theme.fontFamily}` : `600 12px ${theme.fontFamily}`;\n          ctx.textAlign = 'right';\n          ctx.fillText(vt, chartLeft+barW-10, y+barHeight/2+5);\n        } else {\n          if (active) {\n            const tg = ctx.createLinearGradient(chartLeft+barW+8, 0, chartLeft+barW+70, 0);\n            tg.addColorStop(0, gc[0]); tg.addColorStop(1, gc[1]);\n            ctx.fillStyle = tg;\n            ctx.font = `700 14px ${theme.fontFamily}`;\n          } else {\n            ctx.fillStyle = theme.textSource;\n            ctx.font = `400 12px ${theme.fontFamily}`;\n          }\n          ctx.textAlign = 'left';\n          ctx.fillText(vt, chartLeft+barW+8, y+barHeight/2+5);\n        }\n        ctx.globalAlpha = 1;\n      }\n    });\n  }\n\n  drawLavaBlobs(x: number, y: number, w: number, h: number, colors: string[], seed: number) {\n    const { ctx } = this;\n    const s = (n: number) => { let v=Math.sin(seed*127.1+n*311.7)*43758.5453; return v-Math.floor(v); };\n    for (let i=0; i<6; i++) {\n      const bx=x+w*(0.05+s(i*3)*0.9), by=y+h*(0.1+s(i*3+1)*0.8);\n      const radius=Math.max(w*0.3,h)*(0.4+s(i*3+2)*0.5), color=colors[i%colors.length];\n      const rg=ctx.createRadialGradient(bx,by,0,bx,by,radius);\n      rg.addColorStop(0,color); rg.addColorStop(0.5,color+'99'); rg.addColorStop(1,color+'00');\n      ctx.globalCompositeOperation='source-atop'; ctx.fillStyle=rg; ctx.fillRect(x,y,w,h);\n      ctx.globalCompositeOperation='source-over';\n    }\n  }\n\n  formatNumber(n: number): string {\n    if (n>=1e9) return (n/1e9).toFixed(1)+'B'; if (n>=1e6) return (n/1e6).toFixed(1)+'M';\n    if (n>=1e3) return (n/1e3).toFixed(1)+'K'; return n.toLocaleString();\n  }\n}\n", "// DropThe Charts -- Stat Card (Big Number)\n// Gradient text + grain on the number itself, neutral background\n\nimport { BaseChart, ChartConfig } from '../core/Chart';\n\nexport interface StatCardConfig extends ChartConfig {\n  data: {\n    value: number | string;\n    label: string;\n    delta?: string;\n    deltaPositive?: boolean;\n    prefix?: string;\n    suffix?: string;\n  };\n}\n\nexport class StatCard extends BaseChart {\n  statConfig: StatCardConfig;\n\n  constructor(container: HTMLElement | string, config: StatCardConfig) {\n    config.height = config.height || 200;\n    super(container, config);\n    this.statConfig = config;\n    this.render();\n  }\n\n  render() {\n    this.animate((progress) => this.draw(progress), 600);\n  }\n\n  draw(progress: number) {\n    const { ctx, width, height, theme, statConfig } = this;\n    const { value, label, delta, deltaPositive, prefix = '', suffix = '' } = statConfig.data;\n\n    this.drawBackground();\n\n    const numericVal = typeof value === 'number' ? value : parseFloat(String(value));\n    let displayVal: string;\n\n    if (!isNaN(numericVal) && typeof value === 'number') {\n      const current = numericVal * progress;\n      displayVal = prefix + this.formatBigNumber(current) + suffix;\n    } else {\n      displayVal = prefix + String(value) + suffix;\n    }\n\n    // Title (top left)\n    if (this.config.title) {\n      ctx.fillStyle = theme.textSecondary;\n      ctx.font = `400 11px ${theme.monoFamily}`;\n      ctx.textAlign = 'left';\n      ctx.fillText(this.config.title.toUpperCase(), this.padding.left, 24);\n    }\n\n    // Label below number\n    ctx.fillStyle = theme.textSecondary;\n    ctx.font = `400 14px ${theme.fontFamily}`;\n    ctx.textAlign = 'center';\n    ctx.fillText(label, width / 2, height / 2 + 25);\n\n    // Delta badge\n    if (delta && progress > 0.7) {\n      const alpha = (progress - 0.7) * 3.3;\n      ctx.globalAlpha = Math.min(1, alpha);\n\n      const isPos = deltaPositive !== undefined ? deltaPositive : delta.startsWith('+');\n      const badgeColor = isPos ? '#10b981' : '#ef4444';\n\n      ctx.fillStyle = badgeColor + '22';\n      const deltaWidth = ctx.measureText(delta).width + 16;\n      const badgeX = width / 2 - deltaWidth / 2;\n      const badgeY = height / 2 + 38;\n\n      ctx.beginPath();\n      ctx.roundRect(badgeX, badgeY, deltaWidth, 22, 11);\n      ctx.fill();\n\n      ctx.fillStyle = badgeColor;\n      ctx.font = `600 11px ${theme.monoFamily}`;\n      ctx.textAlign = 'center';\n      ctx.fillText(delta, width / 2, badgeY + 15);\n      ctx.globalAlpha = 1;\n    }\n\n    this.drawSource();\n\n    // Snapshot background BEFORE the big number\n    this.snapshotBackground();\n\n    // Big number with gradient fill\n    ctx.font = `700 48px ${theme.fontFamily}`;\n    ctx.textAlign = 'center';\n\n    // Measure text bounds for gradient\n    const metrics = ctx.measureText(displayVal);\n    const textX = width / 2;\n    const textY = height / 2 - 5;\n\n    // Create horizontal gradient across the text\n    const gradColors = theme.highlightGradient;\n    const textWidth = metrics.width;\n    const grad = ctx.createLinearGradient(\n      textX - textWidth / 2, 0,\n      textX + textWidth / 2, 0\n    );\n    grad.addColorStop(0, gradColors[0]);\n    grad.addColorStop(1, gradColors[1]);\n\n    ctx.fillStyle = grad;\n    ctx.fillText(displayVal, textX, textY);\n  }\n\n  formatBigNumber(n: number): string {\n    if (n >= 1e12) return (n / 1e12).toFixed(1) + 'T';\n    if (n >= 1e9) return (n / 1e9).toFixed(1) + 'B';\n    if (n >= 1e6) return (n / 1e6).toFixed(1) + 'M';\n    if (n >= 1e3) return (n / 1e3).toFixed(0).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n    return Math.round(n).toLocaleString();\n  }\n}\n", "// DropThe Charts -- Radar Chart\n// USE IN ARTICLES: Entity comparisons across multiple dimensions.\n// Example: \"How does FromSoftware compare to Nintendo across metacritic, titles, revenue?\"\n// Best for: 4-8 axes, 1-3 overlapping datasets. More than 3 gets noisy.\n\nimport { BaseChart, ChartConfig } from '../core/Chart';\n\nexport interface RadarDataset {\n  label: string;\n  values: number[];\n  highlight?: boolean;\n}\n\nexport interface RadarChartConfig extends ChartConfig {\n  data: {\n    axes: string[];\n    datasets: RadarDataset[];\n    maxValue?: number; // override auto-max\n  };\n}\n\nexport class RadarChart extends BaseChart {\n  radarConfig: RadarChartConfig;\n\n  constructor(container: HTMLElement | string, config: RadarChartConfig) {\n    super(container, config);\n    this.radarConfig = config;\n    this.render();\n  }\n\n  render() {\n    this.animate((progress) => this.draw(progress));\n  }\n\n  draw(progress: number) {\n    const { ctx, width, height, theme, padding } = this;\n    const { data } = this.radarConfig;\n    const { axes, datasets, maxValue } = data;\n    const n = axes.length;\n    if (n < 3) return;\n\n    this.drawBackground();\n    this.drawTitle();\n\n    const cx = width / 2;\n    const cy = padding.top + (height - padding.top - padding.bottom) / 2 + 8;\n    const radius = Math.min(\n      (width - padding.left - padding.right) / 2 - 40,\n      (height - padding.top - padding.bottom) / 2 - 30\n    );\n\n    const max = maxValue || Math.max(...datasets.flatMap(d => d.values)) * 1.1;\n    const angleStep = (Math.PI * 2) / n;\n    const startAngle = -Math.PI / 2; // top\n\n    // Grid rings (5 levels)\n    const rings = 5;\n    ctx.strokeStyle = theme.grid;\n    ctx.lineWidth = 1;\n    for (let r = 1; r <= rings; r++) {\n      const ringR = (radius * r) / rings;\n      ctx.beginPath();\n      for (let i = 0; i <= n; i++) {\n        const angle = startAngle + i * angleStep;\n        const x = cx + Math.cos(angle) * ringR;\n        const y = cy + Math.sin(angle) * ringR;\n        if (i === 0) ctx.moveTo(x, y);\n        else ctx.lineTo(x, y);\n      }\n      ctx.stroke();\n    }\n\n    // Axis lines\n    for (let i = 0; i < n; i++) {\n      const angle = startAngle + i * angleStep;\n      const x = cx + Math.cos(angle) * radius;\n      const y = cy + Math.sin(angle) * radius;\n      ctx.beginPath();\n      ctx.moveTo(cx, cy);\n      ctx.lineTo(x, y);\n      ctx.stroke();\n    }\n\n    // Axis labels\n    ctx.fillStyle = theme.textSecondary;\n    ctx.font = `500 11px ${theme.monoFamily}`;\n    for (let i = 0; i < n; i++) {\n      const angle = startAngle + i * angleStep;\n      const labelR = radius + 18;\n      const x = cx + Math.cos(angle) * labelR;\n      const y = cy + Math.sin(angle) * labelR;\n\n      // Align based on position\n      if (Math.abs(Math.cos(angle)) < 0.1) {\n        ctx.textAlign = 'center';\n      } else if (Math.cos(angle) > 0) {\n        ctx.textAlign = 'left';\n      } else {\n        ctx.textAlign = 'right';\n      }\n      ctx.textBaseline = Math.abs(Math.sin(angle)) < 0.1 ? 'middle'\n        : Math.sin(angle) < 0 ? 'bottom' : 'top';\n\n      ctx.fillText(axes[i], x, y);\n    }\n\n    this.drawSource();\n    this.snapshotBackground();\n\n    // Dataset fills\n    const hasHighlight = datasets.some(d => d.highlight);\n\n    datasets.forEach((dataset, di) => {\n      const active = !hasHighlight || dataset.highlight;\n      const points: [number, number][] = [];\n\n      for (let i = 0; i < n; i++) {\n        const angle = startAngle + i * angleStep;\n        const val = (dataset.values[i] || 0) / max;\n        const r = val * radius * progress;\n        points.push([cx + Math.cos(angle) * r, cy + Math.sin(angle) * r]);\n      }\n\n      // Fill area\n      ctx.beginPath();\n      points.forEach((p, i) => {\n        if (i === 0) ctx.moveTo(p[0], p[1]);\n        else ctx.lineTo(p[0], p[1]);\n      });\n      ctx.closePath();\n\n      if (active) {\n        const gc = dataset.highlight\n          ? theme.highlightGradient\n          : theme.gradients[di % theme.gradients.length];\n        const fillGrad = ctx.createLinearGradient(cx - radius, cy - radius, cx + radius, cy + radius);\n        fillGrad.addColorStop(0, gc[0] + '55');\n        fillGrad.addColorStop(1, gc[1] + '55');\n        ctx.fillStyle = fillGrad;\n        ctx.fill();\n\n        // Stroke\n        const strokeGrad = ctx.createLinearGradient(cx - radius, cy - radius, cx + radius, cy + radius);\n        strokeGrad.addColorStop(0, gc[0]);\n        strokeGrad.addColorStop(1, gc[1]);\n        ctx.strokeStyle = strokeGrad;\n        ctx.lineWidth = 2.5;\n        ctx.stroke();\n\n        // Dots at vertices\n        points.forEach(p => {\n          ctx.beginPath();\n          ctx.arc(p[0], p[1], 4, 0, Math.PI * 2);\n          ctx.fillStyle = gc[0];\n          ctx.fill();\n        });\n      } else {\n        const isDark = theme.name === 'midnight';\n        ctx.fillStyle = isDark ? 'rgba(255,255,240,0.04)' : 'rgba(0,0,0,0.03)';\n        ctx.fill();\n        ctx.strokeStyle = isDark ? 'rgba(255,255,240,0.15)' : 'rgba(0,0,0,0.1)';\n        ctx.lineWidth = 1.5;\n        ctx.stroke();\n      }\n    });\n\n    // Legend\n    if (datasets.length > 1) {\n      const legendY = height - padding.bottom + 4;\n      let legendX = padding.left;\n      ctx.font = `500 11px ${theme.fontFamily}`;\n      datasets.forEach((dataset, di) => {\n        const active = !hasHighlight || dataset.highlight;\n        const gc = dataset.highlight\n          ? theme.highlightGradient\n          : theme.gradients[di % theme.gradients.length];\n        ctx.fillStyle = active ? gc[0] : theme.textSource;\n        ctx.fillRect(legendX, legendY - 4, 12, 3);\n        ctx.fillStyle = active ? theme.textSecondary : theme.textSource;\n        ctx.textAlign = 'left';\n        ctx.fillText(dataset.label, legendX + 16, legendY);\n        legendX += ctx.measureText(dataset.label).width + 36;\n      });\n    }\n  }\n}\n", "// DropThe Charts -- Donut Chart\n// USE IN ARTICLES: Market share, proportions, single-metric gauges.\n// Example: \"Netflix holds 35% of the streaming market\" or \"Feelgood Score: 78/100\"\n// Best for: 2-7 segments. More than 7 = use bar chart instead.\n// Gauge mode: single value 0-100, perfect for scores and ratings.\n\nimport { BaseChart, ChartConfig } from '../core/Chart';\n\nexport interface DonutDataPoint {\n  label: string;\n  value: number;\n  highlight?: boolean;\n}\n\nexport interface DonutChartConfig extends ChartConfig {\n  data: DonutDataPoint[];\n  centerLabel?: string;\n  centerValue?: string;\n  gauge?: boolean;      // single-value gauge mode (0-100)\n  gaugeValue?: number;  // value for gauge mode\n  ringWidth?: number;   // thickness of the ring (default: 0.35 of radius)\n}\n\nexport class DonutChart extends BaseChart {\n  donutConfig: DonutChartConfig;\n\n  constructor(container: HTMLElement | string, config: DonutChartConfig) {\n    super(container, config);\n    this.donutConfig = { ringWidth: 0.35, ...config };\n    this.render();\n  }\n\n  render() {\n    this.animate((progress) => this.draw(progress));\n  }\n\n  draw(progress: number) {\n    const { ctx, width, height, theme, padding } = this;\n\n    this.drawBackground();\n    this.drawTitle();\n\n    const cx = width / 2;\n    const cy = padding.top + (height - padding.top - padding.bottom) / 2 + 8;\n    const outerR = Math.min(\n      (width - padding.left - padding.right) / 2 - 20,\n      (height - padding.top - padding.bottom) / 2 - 20\n    );\n    const ringRatio = this.donutConfig.ringWidth || 0.35;\n    const innerR = outerR * (1 - ringRatio);\n\n    this.drawSource();\n    this.snapshotBackground();\n\n    if (this.donutConfig.gauge) {\n      this.drawGauge(cx, cy, outerR, innerR, progress);\n    } else {\n      this.drawDonut(cx, cy, outerR, innerR, progress);\n    }\n  }\n\n  drawGauge(cx: number, cy: number, outerR: number, innerR: number, progress: number) {\n    const { ctx, theme } = this;\n    const val = Math.min(100, Math.max(0, this.donutConfig.gaugeValue || 0));\n    const sweepAngle = Math.PI * 1.5; // 270 degrees\n    const startAngle = Math.PI * 0.75; // start from bottom-left\n    const endAngle = startAngle + sweepAngle;\n    const fillAngle = startAngle + (sweepAngle * (val / 100)) * progress;\n\n    // Background track\n    ctx.beginPath();\n    ctx.arc(cx, cy, outerR, startAngle, endAngle);\n    ctx.arc(cx, cy, innerR, endAngle, startAngle, true);\n    ctx.closePath();\n    const isDark = theme.name === 'midnight';\n    ctx.fillStyle = isDark ? 'rgba(255,255,240,0.05)' : 'rgba(0,0,0,0.04)';\n    ctx.fill();\n\n    // Filled arc\n    if (val > 0 && progress > 0) {\n      ctx.beginPath();\n      ctx.arc(cx, cy, outerR, startAngle, fillAngle);\n      ctx.arc(cx, cy, innerR, fillAngle, startAngle, true);\n      ctx.closePath();\n\n      ctx.save();\n      ctx.clip();\n      const gc = theme.highlightGradient;\n      const grad = ctx.createLinearGradient(cx - outerR, cy - outerR, cx + outerR, cy + outerR);\n      grad.addColorStop(0, gc[0]);\n      grad.addColorStop(1, gc[1]);\n      ctx.fillStyle = grad;\n      ctx.fillRect(cx - outerR, cy - outerR, outerR * 2, outerR * 2);\n\n      // Lava blobs inside the arc\n      this.drawLavaInArc(cx, cy, outerR, gc);\n      ctx.restore();\n    }\n\n    // Center value\n    const cp = Math.min(1, (progress - 0.2) / 0.6);\n    if (cp > 0) {\n      const displayVal = Math.round(val * Math.min(1, cp));\n      ctx.globalAlpha = Math.min(1, cp * 1.5);\n\n      const gc = theme.highlightGradient;\n      const tg = ctx.createLinearGradient(cx - 30, cy, cx + 30, cy);\n      tg.addColorStop(0, gc[0]);\n      tg.addColorStop(1, gc[1]);\n      ctx.fillStyle = tg;\n      ctx.font = `700 ${Math.round(outerR * 0.45)}px ${theme.fontFamily}`;\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(displayVal + '', cx, cy - 6);\n\n      if (this.donutConfig.centerLabel) {\n        ctx.fillStyle = theme.textSecondary;\n        ctx.font = `400 13px ${theme.fontFamily}`;\n        ctx.fillText(this.donutConfig.centerLabel, cx, cy + outerR * 0.25);\n      }\n      ctx.globalAlpha = 1;\n    }\n  }\n\n  drawDonut(cx: number, cy: number, outerR: number, innerR: number, progress: number) {\n    const { ctx, theme } = this;\n    const { data } = this.donutConfig;\n    const total = data.reduce((s, d) => s + d.value, 0);\n    const hasHighlight = data.some(d => d.highlight);\n\n    let currentAngle = -Math.PI / 2; // start from top\n\n    data.forEach((d, i) => {\n      const sliceAngle = (d.value / total) * Math.PI * 2 * progress;\n      const endAngle = currentAngle + sliceAngle;\n      const active = !hasHighlight || d.highlight;\n\n      // Draw segment\n      ctx.beginPath();\n      ctx.arc(cx, cy, outerR, currentAngle, endAngle);\n      ctx.arc(cx, cy, innerR, endAngle, currentAngle, true);\n      ctx.closePath();\n\n      if (active) {\n        const gc = d.highlight\n          ? theme.highlightGradient\n          : theme.gradients[i % theme.gradients.length];\n\n        ctx.save();\n        ctx.clip();\n        const grad = ctx.createLinearGradient(\n          cx + Math.cos(currentAngle + sliceAngle / 2) * outerR * 0.5,\n          cy + Math.sin(currentAngle + sliceAngle / 2) * outerR * 0.5,\n          cx - Math.cos(currentAngle + sliceAngle / 2) * outerR * 0.5,\n          cy - Math.sin(currentAngle + sliceAngle / 2) * outerR * 0.5\n        );\n        grad.addColorStop(0, gc[0]);\n        grad.addColorStop(1, gc[1]);\n        ctx.fillStyle = grad;\n        ctx.fillRect(cx - outerR, cy - outerR, outerR * 2, outerR * 2);\n        this.drawLavaInArc(cx, cy, outerR, gc);\n        ctx.restore();\n      } else {\n        const isDark = theme.name === 'midnight';\n        ctx.fillStyle = isDark ? 'rgba(255,255,240,0.06)' : 'rgba(0,0,0,0.04)';\n        ctx.fill();\n      }\n\n      // Gap between segments\n      ctx.strokeStyle = theme.bg;\n      ctx.lineWidth = 2;\n      ctx.stroke();\n\n      // Label line + text\n      if (progress > 0.7 && sliceAngle > 0.15) {\n        const labelAlpha = Math.min(1, (progress - 0.7) / 0.3);\n        ctx.globalAlpha = labelAlpha;\n        const midAngle = currentAngle + sliceAngle / 2;\n        const labelR = outerR + 14;\n        const lx = cx + Math.cos(midAngle) * labelR;\n        const ly = cy + Math.sin(midAngle) * labelR;\n        const isRight = Math.cos(midAngle) > 0;\n\n        ctx.fillStyle = active ? theme.textPrimary : theme.textSource;\n        ctx.font = `500 11px ${theme.monoFamily}`;\n        ctx.textAlign = isRight ? 'left' : 'right';\n        ctx.textBaseline = 'middle';\n\n        const pct = Math.round((d.value / total) * 100);\n        ctx.fillText(`${d.label} ${pct}%`, lx + (isRight ? 4 : -4), ly);\n        ctx.globalAlpha = 1;\n      }\n\n      currentAngle = endAngle;\n    });\n\n    // Center label\n    if (this.donutConfig.centerValue && progress > 0.5) {\n      const a = Math.min(1, (progress - 0.5) * 2);\n      ctx.globalAlpha = a;\n\n      const gc = theme.highlightGradient;\n      const tg = ctx.createLinearGradient(cx - 30, cy, cx + 30, cy);\n      tg.addColorStop(0, gc[0]);\n      tg.addColorStop(1, gc[1]);\n      ctx.fillStyle = tg;\n      ctx.font = `700 ${Math.round(innerR * 0.55)}px ${theme.fontFamily}`;\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      ctx.fillText(this.donutConfig.centerValue, cx, cy - 4);\n\n      if (this.donutConfig.centerLabel) {\n        ctx.fillStyle = theme.textSecondary;\n        ctx.font = `400 12px ${theme.fontFamily}`;\n        ctx.fillText(this.donutConfig.centerLabel, cx, cy + innerR * 0.35);\n      }\n      ctx.globalAlpha = 1;\n    }\n  }\n\n  drawLavaInArc(cx: number, cy: number, r: number, colors: string[]) {\n    const { ctx } = this;\n    for (let i = 0; i < 4; i++) {\n      const angle = (i / 4) * Math.PI * 2 + 0.7;\n      const bx = cx + Math.cos(angle) * r * 0.5;\n      const by = cy + Math.sin(angle) * r * 0.5;\n      const blobR = r * (0.4 + (i * 0.15));\n      const color = colors[i % colors.length];\n      const rg = ctx.createRadialGradient(bx, by, 0, bx, by, blobR);\n      rg.addColorStop(0, color);\n      rg.addColorStop(0.5, color + '88');\n      rg.addColorStop(1, color + '00');\n      ctx.globalCompositeOperation = 'source-atop';\n      ctx.fillStyle = rg;\n      ctx.fillRect(cx - r, cy - r, r * 2, r * 2);\n      ctx.globalCompositeOperation = 'source-over';\n    }\n  }\n}\n", "// DropThe Charts -- Heatmap Chart\n// USE IN ARTICLES: Density, availability, correlation matrices.\n// Example: \"Streaming availability by country\" or \"Entity coverage across verticals\"\n// Best for: 3-15 rows, 3-20 cols. Small enough to read, big enough to show patterns.\n// Values: 0-1 normalized, or raw values auto-scaled.\n\nimport { BaseChart, ChartConfig } from '../core/Chart';\n\nexport interface HeatmapChartConfig extends ChartConfig {\n  data: {\n    rows: string[];\n    cols: string[];\n    values: number[][]; // rows x cols matrix\n  };\n  showValues?: boolean;    // show numbers in cells\n  colorScale?: string[][]; // override gradient [[low1,low2],[high1,high2]]\n  cellRadius?: number;     // rounded corners (default: 4)\n}\n\nexport class HeatmapChart extends BaseChart {\n  heatConfig: HeatmapChartConfig;\n\n  constructor(container: HTMLElement | string, config: HeatmapChartConfig) {\n    super(container, config);\n    this.heatConfig = { showValues: false, cellRadius: 4, ...config };\n    this.padding = { top: 60, right: 24, bottom: 24, left: 100 };\n    this.render();\n  }\n\n  render() {\n    this.animate((progress) => this.draw(progress), 600);\n  }\n\n  draw(progress: number) {\n    const { ctx, width, height, theme, padding } = this;\n    const { data, showValues, cellRadius } = this.heatConfig;\n    const { rows, cols, values } = data;\n\n    this.drawBackground();\n    this.drawTitle();\n\n    const chartTop = padding.top + 24; // room for col labels\n    const chartBottom = height - padding.bottom;\n    const chartLeft = padding.left;\n    const chartRight = width - padding.right;\n    const chartWidth = chartRight - chartLeft;\n    const chartHeight = chartBottom - chartTop;\n\n    const cellW = chartWidth / cols.length;\n    const cellH = chartHeight / rows.length;\n    const gap = 2;\n    const r = Math.min(cellRadius || 4, cellW / 4, cellH / 4);\n\n    // Find min/max for normalization\n    const flat = values.flat();\n    const minVal = Math.min(...flat);\n    const maxVal = Math.max(...flat);\n    const range = maxVal - minVal || 1;\n\n    // Column labels (top)\n    ctx.fillStyle = theme.textSecondary;\n    ctx.font = `500 10px ${theme.monoFamily}`;\n    ctx.textAlign = 'center';\n    cols.forEach((col, ci) => {\n      const x = chartLeft + ci * cellW + cellW / 2;\n      ctx.fillText(col, x, chartTop - 8);\n    });\n\n    // Row labels (left)\n    ctx.textAlign = 'right';\n    rows.forEach((row, ri) => {\n      const y = chartTop + ri * cellH + cellH / 2 + 4;\n      ctx.fillText(row, chartLeft - 10, y);\n    });\n\n    this.drawSource();\n    this.snapshotBackground();\n\n    // Cells\n    rows.forEach((_, ri) => {\n      cols.forEach((_, ci) => {\n        const val = values[ri]?.[ci] ?? 0;\n        const norm = (val - minVal) / range;\n        const intensity = norm * progress;\n\n        const x = chartLeft + ci * cellW + gap / 2;\n        const y = chartTop + ri * cellH + gap / 2;\n        const w = cellW - gap;\n        const h = cellH - gap;\n\n        // Rounded rect path\n        ctx.beginPath();\n        ctx.moveTo(x + r, y);\n        ctx.lineTo(x + w - r, y);\n        ctx.quadraticCurveTo(x + w, y, x + w, y + r);\n        ctx.lineTo(x + w, y + h - r);\n        ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n        ctx.lineTo(x + r, y + h);\n        ctx.quadraticCurveTo(x, y + h, x, y + h - r);\n        ctx.lineTo(x, y + r);\n        ctx.quadraticCurveTo(x, y, x + r, y);\n        ctx.closePath();\n\n        if (intensity < 0.05) {\n          // Empty / near-zero\n          const isDark = theme.name === 'midnight';\n          ctx.fillStyle = isDark ? 'rgba(255,255,240,0.03)' : 'rgba(0,0,0,0.02)';\n          ctx.fill();\n        } else {\n          // Gradient fill based on intensity\n          ctx.save();\n          ctx.clip();\n\n          // Pick gradient based on intensity (cold to hot)\n          const gcIdx = Math.min(\n            theme.gradients.length - 1,\n            Math.floor(intensity * theme.gradients.length * 0.99)\n          );\n          const gc = theme.gradients[gcIdx];\n\n          const grad = ctx.createLinearGradient(x, y, x + w, y + h);\n          grad.addColorStop(0, gc[0] + this.alphaHex(intensity));\n          grad.addColorStop(1, gc[1] + this.alphaHex(intensity));\n          ctx.fillStyle = grad;\n          ctx.fillRect(x, y, w, h);\n\n          // Lava blob for high-value cells\n          if (intensity > 0.6) {\n            const s = (n: number) => { let v = Math.sin(ri * 127.1 + ci * 311.7 + n * 43.7) * 43758.5453; return v - Math.floor(v); };\n            const bx = x + w * (0.2 + s(0) * 0.6);\n            const by = y + h * (0.2 + s(1) * 0.6);\n            const blobR = Math.max(w, h) * 0.6;\n            const rg = ctx.createRadialGradient(bx, by, 0, bx, by, blobR);\n            rg.addColorStop(0, gc[1]);\n            rg.addColorStop(0.5, gc[1] + '66');\n            rg.addColorStop(1, gc[1] + '00');\n            ctx.globalCompositeOperation = 'source-atop';\n            ctx.fillStyle = rg;\n            ctx.fillRect(x, y, w, h);\n            ctx.globalCompositeOperation = 'source-over';\n          }\n          ctx.restore();\n        }\n\n        // Cell value text\n        if (showValues && progress > 0.5 && cellW > 30 && cellH > 20) {\n          const a = Math.min(1, (progress - 0.5) * 2);\n          ctx.globalAlpha = a;\n          ctx.fillStyle = intensity > 0.5 ? theme.bg : theme.textSecondary;\n          ctx.font = `500 ${Math.min(11, cellH * 0.4)}px ${theme.monoFamily}`;\n          ctx.textAlign = 'center';\n          ctx.textBaseline = 'middle';\n          ctx.fillText(this.formatCellValue(val), x + w / 2, y + h / 2);\n          ctx.globalAlpha = 1;\n        }\n      });\n    });\n  }\n\n  alphaHex(intensity: number): string {\n    const alpha = Math.round(intensity * 220 + 35);\n    return alpha.toString(16).padStart(2, '0');\n  }\n\n  formatCellValue(v: number): string {\n    if (v >= 1e6) return (v / 1e6).toFixed(1) + 'M';\n    if (v >= 1e3) return (v / 1e3).toFixed(1) + 'K';\n    if (Number.isInteger(v)) return v + '';\n    return v.toFixed(1);\n  }\n}\n", "// DropThe Charts -- Bump Chart (Rankings Over Time)\n// USE IN ARTICLES: Showing how rankings shift over time.\n// Example: \"Netflix was #1 in 2020, fell to #3 by 2025\" or \"FromSoftware's rise from #8 to #1\"\n// Best for: 3-8 entities, 4-12 time periods. Shows drama in ranking changes.\n// The story is in the crossings -- where lines swap positions.\n\nimport { BaseChart, ChartConfig } from '../core/Chart';\n\nexport interface BumpSeries {\n  label: string;\n  ranks: number[]; // rank at each time period (1 = top)\n  highlight?: boolean;\n}\n\nexport interface BumpChartConfig extends ChartConfig {\n  data: BumpSeries[];\n  periods?: string[]; // x-axis labels (e.g., ['2020', '2021', '2022'])\n  highlightTop?: number;\n}\n\nexport class BumpChart extends BaseChart {\n  bumpConfig: BumpChartConfig;\n\n  constructor(container: HTMLElement | string, config: BumpChartConfig) {\n    super(container, config);\n    this.bumpConfig = config;\n    this.padding = { top: 60, right: 90, bottom: 48, left: 90 };\n    this.render();\n  }\n\n  render() {\n    this.animate((progress) => this.draw(progress), 1000);\n  }\n\n  isActive(series: BumpSeries, idx: number): boolean {\n    const { data, highlightTop } = this.bumpConfig;\n    if (highlightTop !== undefined) {\n      // Highlight series that end in top N\n      const lastRank = series.ranks[series.ranks.length - 1];\n      return lastRank <= highlightTop;\n    }\n    if (data.some(d => d.highlight)) return !!series.highlight;\n    return true;\n  }\n\n  hasContrast(): boolean {\n    const { data, highlightTop } = this.bumpConfig;\n    if (highlightTop !== undefined) return true;\n    return data.some(d => d.highlight);\n  }\n\n  draw(progress: number) {\n    const { ctx, width, height, theme, padding } = this;\n    const { data, periods } = this.bumpConfig;\n\n    this.drawBackground();\n    this.drawTitle();\n\n    const nPeriods = data[0]?.ranks.length || 0;\n    const maxRank = Math.max(...data.flatMap(d => d.ranks));\n\n    const chartTop = padding.top + 8;\n    const chartBottom = height - padding.bottom - 20;\n    const chartLeft = padding.left;\n    const chartRight = width - padding.right;\n    const chartWidth = chartRight - chartLeft;\n    const chartHeight = chartBottom - chartTop;\n\n    // Rank Y positions (rank 1 at top)\n    const rankY = (rank: number) => chartTop + ((rank - 1) / (maxRank - 1 || 1)) * chartHeight;\n    const periodX = (i: number) => chartLeft + (i / (nPeriods - 1 || 1)) * chartWidth;\n\n    // Grid lines for each rank\n    ctx.strokeStyle = theme.grid;\n    ctx.lineWidth = 1;\n    for (let r = 1; r <= maxRank; r++) {\n      const y = rankY(r);\n      ctx.beginPath();\n      ctx.moveTo(chartLeft - 8, y);\n      ctx.lineTo(chartRight + 8, y);\n      ctx.stroke();\n\n      // Rank number on left\n      ctx.fillStyle = theme.textSource;\n      ctx.font = `400 10px ${theme.monoFamily}`;\n      ctx.textAlign = 'right';\n      ctx.fillText('#' + r, chartLeft - 14, y + 4);\n    }\n\n    // Period labels\n    ctx.fillStyle = theme.textSecondary;\n    ctx.font = `500 11px ${theme.monoFamily}`;\n    ctx.textAlign = 'center';\n    for (let i = 0; i < nPeriods; i++) {\n      const label = periods?.[i] || (i + 1) + '';\n      ctx.fillText(label, periodX(i), chartBottom + 20);\n    }\n\n    this.drawSource();\n    this.snapshotBackground();\n\n    const contrast = this.hasContrast();\n\n    // Draw lines (inactive first, then active on top)\n    const sorted = [...data.map((d, i) => ({ ...d, idx: i }))]\n      .sort((a, b) => {\n        const aActive = this.isActive(a, a.idx) ? 1 : 0;\n        const bActive = this.isActive(b, b.idx) ? 1 : 0;\n        return aActive - bActive;\n      });\n\n    sorted.forEach((series) => {\n      const active = this.isActive(series, series.idx);\n      const gc = series.highlight\n        ? theme.highlightGradient\n        : theme.gradients[series.idx % theme.gradients.length];\n\n      // Calculate visible points based on progress\n      const visiblePeriods = Math.max(1, Math.floor(nPeriods * progress));\n      const points: [number, number][] = [];\n      for (let i = 0; i < visiblePeriods; i++) {\n        points.push([periodX(i), rankY(series.ranks[i])]);\n      }\n      // Partial last segment\n      if (visiblePeriods < nPeriods) {\n        const frac = (nPeriods * progress) - visiblePeriods;\n        if (frac > 0 && visiblePeriods > 0) {\n          const prevX = periodX(visiblePeriods - 1);\n          const prevY = rankY(series.ranks[visiblePeriods - 1]);\n          const nextX = periodX(visiblePeriods);\n          const nextY = rankY(series.ranks[visiblePeriods]);\n          points.push([prevX + (nextX - prevX) * frac, prevY + (nextY - prevY) * frac]);\n        }\n      }\n\n      if (points.length < 2) return;\n\n      // Draw smooth curve through points\n      ctx.beginPath();\n      ctx.moveTo(points[0][0], points[0][1]);\n\n      for (let i = 1; i < points.length; i++) {\n        const [x0, y0] = points[i - 1];\n        const [x1, y1] = points[i];\n        const cpx = (x0 + x1) / 2;\n        ctx.bezierCurveTo(cpx, y0, cpx, y1, x1, y1);\n      }\n\n      if (contrast && !active) {\n        const isDark = theme.name === 'midnight';\n        ctx.strokeStyle = isDark ? 'rgba(255,255,240,0.1)' : 'rgba(0,0,0,0.08)';\n        ctx.lineWidth = 2;\n      } else {\n        const grad = ctx.createLinearGradient(points[0][0], 0, points[points.length - 1][0], 0);\n        grad.addColorStop(0, gc[0]);\n        grad.addColorStop(1, gc[1]);\n        ctx.strokeStyle = grad;\n        ctx.lineWidth = 3;\n      }\n      ctx.stroke();\n\n      // Dots at each rank position\n      points.forEach((p, i) => {\n        ctx.beginPath();\n        ctx.arc(p[0], p[1], active ? 5 : 3, 0, Math.PI * 2);\n        if (contrast && !active) {\n          const isDark = theme.name === 'midnight';\n          ctx.fillStyle = isDark ? 'rgba(255,255,240,0.12)' : 'rgba(0,0,0,0.08)';\n        } else {\n          ctx.fillStyle = gc[i < points.length / 2 ? 0 : 1];\n        }\n        ctx.fill();\n      });\n\n      // Start label (left)\n      if (points.length > 0) {\n        const [fx, fy] = points[0];\n        ctx.fillStyle = (contrast && !active) ? theme.textSource : theme.textSecondary;\n        ctx.font = (contrast && !active) ? `400 10px ${theme.monoFamily}` : `500 11px ${theme.monoFamily}`;\n        ctx.textAlign = 'right';\n        ctx.textBaseline = 'middle';\n        ctx.fillText(series.label, fx - 12, fy);\n      }\n\n      // End label (right) -- only when fully revealed\n      if (progress > 0.9 && points.length >= nPeriods) {\n        const a = Math.min(1, (progress - 0.9) * 10);\n        ctx.globalAlpha = a;\n        const [lx, ly] = points[points.length - 1];\n        ctx.textAlign = 'left';\n\n        if (active) {\n          const tg = ctx.createLinearGradient(lx, ly - 8, lx + 60, ly + 8);\n          tg.addColorStop(0, gc[0]);\n          tg.addColorStop(1, gc[1]);\n          ctx.fillStyle = tg;\n          ctx.font = `600 12px ${theme.fontFamily}`;\n        } else {\n          ctx.fillStyle = theme.textSource;\n          ctx.font = `400 10px ${theme.monoFamily}`;\n        }\n        ctx.fillText(series.label, lx + 12, ly);\n        ctx.globalAlpha = 1;\n      }\n    });\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACoCO,MAAM,WAAkB;AAAA,IAC7B,MAAM;AAAA,IACN,IAAI;AAAA,IACJ,SAAS;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,IACb,eAAe;AAAA,IACf,YAAY;AAAA,IACZ,WAAW;AAAA,MACT,CAAC,WAAW,SAAS;AAAA;AAAA,MACrB,CAAC,WAAW,SAAS;AAAA;AAAA,MACrB,CAAC,WAAW,SAAS;AAAA;AAAA,MACrB,CAAC,WAAW,SAAS;AAAA;AAAA,MACrB,CAAC,WAAW,SAAS;AAAA;AAAA,MACrB,CAAC,WAAW,SAAS;AAAA;AAAA,IACvB;AAAA,IACA,mBAAmB,CAAC,WAAW,SAAS;AAAA;AAAA,IACxC,YAAY;AAAA,IACZ,UAAU,CAAC,0BAA0B,qBAAqB;AAAA,IAC1D,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,OAAO;AAAA;AAAA,IACP,aAAa;AAAA,EACf;AAEO,MAAM,OAAc;AAAA,IACzB,MAAM;AAAA,IACN,IAAI;AAAA,IACJ,SAAS;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,IACb,eAAe;AAAA,IACf,YAAY;AAAA;AAAA,IAEZ,WAAW;AAAA,MACT,CAAC,WAAW,SAAS;AAAA,MACrB,CAAC,WAAW,SAAS;AAAA,MACrB,CAAC,WAAW,SAAS;AAAA,MACrB,CAAC,WAAW,SAAS;AAAA,MACrB,CAAC,WAAW,SAAS;AAAA,MACrB,CAAC,WAAW,SAAS;AAAA,IACvB;AAAA,IACA,mBAAmB,CAAC,WAAW,SAAS;AAAA,IACxC,YAAY;AAAA,IACZ,UAAU,CAAC,yBAAyB,qBAAqB;AAAA,IACzD,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,OAAO;AAAA,IACP,aAAa;AAAA,EACf;AAEO,WAAS,SAAS,MAAsB;AAC7C,QAAI,SAAS,OAAQ,QAAO;AAC5B,WAAO;AAAA,EACT;;;AClEO,MAAM,YAAN,MAAgB;AAAA,IACrB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,eAAuB;AAAA,IACvB,YAAoB;AAAA,IACZ,aAA+B;AAAA,IAEvC,YAAY,WAAiC,QAAqB;AAChE,YAAM,KAAK,OAAO,cAAc,WAC5B,SAAS,cAAc,SAAS,IAChC;AAEJ,UAAI,CAAC,GAAI,OAAM,IAAI,MAAM,qCAAqC;AAE9D,WAAK,SAAS;AACd,WAAK,QAAQ,SAAS,OAAO,KAAK;AAClC,WAAK,MAAM,OAAO,oBAAoB;AACtC,WAAK,QAAQ,OAAO,SAAS,GAAG,eAAe;AAC/C,WAAK,SAAS,OAAO,UAAU;AAE/B,WAAK,UAAU,EAAE,KAAK,IAAI,OAAO,IAAI,QAAQ,IAAI,MAAM,GAAG;AAE1D,WAAK,SAAS,SAAS,cAAc,QAAQ;AAC7C,WAAK,OAAO,QAAQ,KAAK,QAAQ,KAAK;AACtC,WAAK,OAAO,SAAS,KAAK,SAAS,KAAK;AACxC,WAAK,OAAO,MAAM,QAAQ,KAAK,QAAQ;AACvC,WAAK,OAAO,MAAM,SAAS,KAAK,SAAS;AACzC,WAAK,OAAO,MAAM,eAAe;AACjC,SAAG,YAAY,KAAK,MAAM;AAE1B,WAAK,MAAM,KAAK,OAAO,WAAW,IAAI;AACtC,WAAK,IAAI,MAAM,KAAK,KAAK,KAAK,GAAG;AAAA,IACnC;AAAA,IAEA,qBAAqB;AACnB,WAAK,aAAa,KAAK,IAAI,aAAa,GAAG,GAAG,KAAK,QAAQ,KAAK,KAAK,KAAK,SAAS,KAAK,GAAG;AAAA,IAC7F;AAAA,IAEA,YAAY;AACV,YAAM,EAAE,KAAK,OAAO,QAAQ,MAAM,IAAI;AACtC,YAAM,IAAI,QAAQ,KAAK;AACvB,YAAM,IAAI,SAAS,KAAK;AACxB,YAAM,YAAY,IAAI,aAAa,GAAG,GAAG,GAAG,CAAC;AAC7C,YAAM,OAAO,UAAU;AACvB,YAAM,KAAK,KAAK,YAAY;AAC5B,YAAM,eAAe,MAAM,gBAAgB,cAAc;AACzD,YAAM,WAAW;AAEjB,eAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACvC,YAAI,cAAc;AAChB,gBAAM,KAAK,KAAK,IAAI,KAAK,CAAC,IAAI,GAAI,CAAC,CAAC;AACpC,gBAAM,KAAK,KAAK,IAAI,KAAK,IAAE,CAAC,IAAI,GAAI,IAAE,CAAC,CAAC;AACxC,gBAAM,KAAK,KAAK,IAAI,KAAK,IAAE,CAAC,IAAI,GAAI,IAAE,CAAC,CAAC;AACxC,gBAAM,OAAO,KAAK,KAAK;AACvB,cAAI,OAAO,EAAG;AACd,gBAAM,WAAW,KAAK,IAAI,GAAG,OAAO,EAAE;AACtC,gBAAM,SAAS,KAAK,OAAO,IAAI,OAAO,WAAW;AACjD,eAAK,CAAC,IAAM,KAAK,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,CAAC,IAAI,KAAK,CAAC;AACtD,eAAK,IAAE,CAAC,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,IAAE,CAAC,IAAI,KAAK,CAAC;AACxD,eAAK,IAAE,CAAC,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,IAAE,CAAC,IAAI,KAAK,CAAC;AAAA,QAC1D,OAAO;AACL,gBAAM,SAAS,KAAK,OAAO,IAAI,OAAO;AACtC,eAAK,CAAC,IAAM,KAAK,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,CAAC,IAAI,KAAK,CAAC;AACtD,eAAK,IAAE,CAAC,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,IAAE,CAAC,IAAI,KAAK,CAAC;AACxD,eAAK,IAAE,CAAC,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,IAAE,CAAC,IAAI,KAAK,CAAC;AAAA,QAC1D;AAAA,MACF;AACA,UAAI,aAAa,WAAW,GAAG,CAAC;AAAA,IAClC;AAAA,IAEA,iBAAiB;AACf,YAAM,EAAE,KAAK,OAAO,QAAQ,MAAM,IAAI;AACtC,UAAI,YAAY,MAAM;AACtB,UAAI,SAAS,GAAG,GAAG,OAAO,MAAM;AAAA,IAClC;AAAA,IAEA,YAAY;AACV,YAAM,EAAE,KAAK,QAAQ,OAAO,QAAQ,IAAI;AACxC,UAAI,CAAC,OAAO,MAAO;AACnB,UAAI,YAAY,MAAM;AACtB,UAAI,OAAO,YAAY,MAAM,UAAU;AACvC,UAAI,YAAY;AAChB,UAAI,SAAS,OAAO,OAAO,QAAQ,MAAM,EAAE;AAC3C,UAAI,OAAO,UAAU;AACnB,YAAI,YAAY,MAAM;AACtB,YAAI,OAAO,YAAY,MAAM,UAAU;AACvC,YAAI,SAAS,OAAO,UAAU,QAAQ,MAAM,EAAE;AAAA,MAChD;AAAA,IACF;AAAA,IAEA,aAAa;AACX,YAAM,EAAE,KAAK,QAAQ,OAAO,OAAO,OAAO,IAAI;AAC9C,YAAM,OAAO,WAAW,OAAO,UAAU,SAAS;AAClD,UAAI,YAAY,MAAM;AACtB,UAAI,OAAO,YAAY,MAAM,UAAU;AACvC,UAAI,YAAY;AAChB,UAAI,SAAS,MAAM,KAAK,QAAQ,MAAM,SAAS,EAAE;AAAA,IACnD;AAAA,IAEA,eAAe,GAAW,IAAY,IAAY,QAAkC;AAClF,YAAM,OAAO,KAAK,IAAI,qBAAqB,GAAG,IAAI,GAAG,EAAE;AACvD,WAAK,aAAa,GAAG,OAAO,CAAC,CAAC;AAC9B,WAAK,aAAa,GAAG,OAAO,CAAC,CAAC;AAC9B,aAAO;AAAA,IACT;AAAA;AAAA;AAAA,IAIA,iBAAiB,GAAW,GAAW,GAAW,GAAW,QAAkB,OAAe,GAAG;AAC/F,YAAM,EAAE,IAAI,IAAI;AAGhB,YAAM,IAAI,CAAC,MAAc;AACvB,YAAI,IAAI,KAAK,IAAI,OAAO,QAAQ,IAAI,KAAK,IAAI;AAC7C,eAAO,IAAI,KAAK,MAAM,CAAC;AAAA,MACzB;AAGA,UAAI,YAAY,OAAO,CAAC;AACxB,UAAI,KAAK;AAGT,YAAM,YAAY;AAClB,eAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AAClC,cAAM,KAAK,IAAI,KAAK,OAAO,EAAE,IAAI,CAAC,IAAI;AACtC,cAAM,KAAK,IAAI,KAAK,OAAO,EAAE,IAAI,IAAI,CAAC,IAAI;AAC1C,cAAM,SAAS,KAAK,IAAI,GAAG,CAAC,KAAK,MAAM,EAAE,IAAI,IAAI,CAAC,IAAI;AAGtD,cAAM,WAAW,IAAI;AACrB,cAAM,YAAY,OAAO,QAAQ;AAEjC,cAAM,UAAU,IAAI,qBAAqB,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM;AAClE,gBAAQ,aAAa,GAAG,SAAS;AACjC,gBAAQ,aAAa,KAAK,YAAY,IAAI;AAC1C,gBAAQ,aAAa,GAAG,YAAY,IAAI;AAExC,YAAI,KAAK;AAET,YAAI,YAAY;AAChB,YAAI,2BAA2B;AAC/B,YAAI,SAAS,IAAI,QAAQ,IAAI,QAAQ,IAAI,SAAS,GAAG,IAAI,SAAS,CAAC;AACnE,YAAI,QAAQ;AAAA,MACd;AAAA,IACF;AAAA,IAEA,QAAQ,QAAoC,WAAmB,KAAK;AAClE,UAAI,KAAK,OAAO,YAAY,OAAO;AACjC,eAAO,CAAC;AACR,aAAK,UAAU;AACf;AAAA,MACF;AACA,YAAM,QAAQ,YAAY,IAAI;AAC9B,YAAM,OAAO,CAAC,QAAgB;AAC5B,cAAM,UAAU,MAAM;AACtB,cAAM,IAAI,KAAK,IAAI,UAAU,UAAU,CAAC;AACxC,cAAM,OAAO,IAAI,KAAK,IAAI,IAAI,GAAG,CAAC;AAClC,aAAK,eAAe;AACpB,eAAO,IAAI;AACX,YAAI,IAAI,GAAG;AACT,eAAK,YAAY,sBAAsB,IAAI;AAAA,QAC7C,OAAO;AACL,eAAK,UAAU;AAAA,QACjB;AAAA,MACF;AACA,WAAK,YAAY,sBAAsB,IAAI;AAAA,IAC7C;AAAA,IAEA,UAAU;AACR,UAAI,KAAK,UAAW,sBAAqB,KAAK,SAAS;AACvD,WAAK,OAAO,OAAO;AAAA,IACrB;AAAA,IAEA,QAAgB;AACd,aAAO,KAAK,OAAO,UAAU,WAAW;AAAA,IAC1C;AAAA,EACF;;;ACxLO,MAAM,WAAN,cAAuB,UAAU;AAAA,IACtC;AAAA,IAEA,YAAY,WAAiC,QAAwB;AACnE,YAAM,WAAW,MAAM;AACvB,WAAK,YAAY,EAAE,YAAY,MAAM,aAAa,OAAO,WAAW,GAAG,GAAG,OAAO;AACjF,WAAK,OAAO;AAAA,IACd;AAAA,IAEA,SAAS;AACP,WAAK,QAAQ,CAAC,aAAa,KAAK,KAAK,QAAQ,CAAC;AAAA,IAChD;AAAA,IAEA,SAAS,GAAiB,GAAoB;AAC5C,YAAM,EAAE,MAAM,cAAc,cAAc,IAAI,KAAK;AACnD,UAAI,kBAAkB,OAAW,QAAO,MAAO,gBAAgB;AAC/D,UAAI,iBAAiB,OAAW,QAAO,IAAI;AAC3C,UAAI,KAAK,KAAK,QAAM,GAAG,SAAS,EAAG,QAAO,CAAC,CAAC,EAAE;AAC9C,aAAO;AAAA,IACT;AAAA,IAEA,cAAuB;AACrB,YAAM,EAAE,MAAM,cAAc,cAAc,IAAI,KAAK;AACnD,UAAI,kBAAkB,OAAW,QAAO;AACxC,UAAI,iBAAiB,OAAW,QAAO,eAAe,KAAK;AAC3D,aAAO,KAAK,KAAK,OAAK,EAAE,SAAS;AAAA,IACnC;AAAA,IAEA,KAAK,UAAkB;AACrB,YAAM,EAAE,KAAK,OAAO,QAAQ,OAAO,SAAS,UAAU,IAAI;AAC1D,YAAM,EAAE,MAAM,cAAc,IAAI,cAAc,IAAI,YAAY,aAAa,UAAU,IAAI;AAEzF,WAAK,eAAe;AACpB,WAAK,UAAU;AAEf,YAAM,WAAW,QAAQ,MAAM;AAC/B,YAAM,cAAc,SAAS,QAAQ,SAAS;AAC9C,YAAM,YAAY,QAAQ;AAC1B,YAAM,aAAa,QAAQ,QAAQ;AACnC,YAAM,aAAa,aAAa;AAChC,YAAM,cAAc,cAAc;AAElC,YAAM,WAAW,KAAK;AACtB,YAAM,SAAS,KAAK,IAAI,IAAI,aAAa,IAAI;AAC7C,YAAM,aAAa,WAAW,KAAK;AACnC,YAAM,WAAW,KAAK,IAAI,KAAK,aAAa,aAAa,QAAQ;AACjE,YAAM,iBAAiB,WAAW,WAAW;AAC7C,YAAM,SAAS,aAAa,aAAa,kBAAkB;AAC3D,YAAM,SAAS,KAAK,IAAI,GAAG,KAAK,IAAI,OAAK,EAAE,KAAK,CAAC;AACjD,YAAM,SAAS,eAAe,SAAS;AACvC,YAAM,WAAW,KAAK,YAAY;AAGlC,UAAI,cAAc,MAAM;AAAM,UAAI,YAAY;AAC9C,eAAS,IAAI,GAAG,KAAK,GAAG,KAAK;AAC3B,cAAM,IAAI,cAAe,cAAc,IAAI;AAC3C,YAAI,UAAU;AAAG,YAAI,OAAO,WAAW,CAAC;AAAG,YAAI,OAAO,YAAY,CAAC;AAAG,YAAI,OAAO;AAAA,MACnF;AACA,UAAI,UAAU;AAAG,UAAI,OAAO,WAAW,WAAW;AAAG,UAAI,OAAO,YAAY,WAAW;AAAG,UAAI,OAAO;AAGrG,WAAK,QAAQ,CAAC,GAAG,MAAM;AACrB,cAAM,IAAI,SAAS,KAAK,WAAW;AACnC,cAAM,SAAS,KAAK,SAAS,GAAG,CAAC;AACjC,YAAI,YAAa,YAAY,CAAC,SAAU,MAAM,aAAa,MAAM;AACjE,YAAI,OAAO,YAAY,MAAM,UAAU;AACvC,YAAI,YAAY;AAChB,YAAI,SAAS,KAAK,cAAc,EAAE,OAAO,WAAW,SAAS,GAAG,GAAG,IAAI,WAAW,GAAG,cAAc,EAAE;AAAA,MACvG,CAAC;AAED,WAAK,WAAW;AAChB,WAAK,mBAAmB;AAGxB,WAAK,QAAQ,CAAC,GAAG,MAAM;AACrB,cAAM,IAAI,SAAS,KAAK,WAAW;AACnC,cAAM,YAAY,EAAE,QAAQ,SAAS;AACrC,cAAM,IAAI,cAAc;AACxB,YAAI,aAAa,EAAG;AAEpB,cAAM,SAAS,KAAK,SAAS,GAAG,CAAC;AACjC,cAAM,IAAI,KAAK,IAAI,aAAa,GAAG,YAAY,CAAC;AAEhD,YAAI,UAAU;AACd,YAAI,OAAO,IAAI,GAAG,CAAC;AAAG,YAAI,OAAO,IAAI,WAAW,GAAG,CAAC;AACpD,YAAI,iBAAiB,IAAI,UAAU,GAAG,IAAI,UAAU,IAAI,CAAC;AACzD,YAAI,OAAO,IAAI,UAAU,IAAI,SAAS;AAAG,YAAI,OAAO,GAAG,IAAI,SAAS;AACpE,YAAI,OAAO,GAAG,IAAI,CAAC;AAAG,YAAI,iBAAiB,GAAG,GAAG,IAAI,GAAG,CAAC;AACzD,YAAI,UAAU;AAEd,YAAI,YAAY,CAAC,QAAQ;AACvB,gBAAM,SAAS,MAAM,SAAS;AAC9B,cAAI,YAAY,SAAS,2BAA2B;AACpD,cAAI,KAAK;AACT,cAAI,cAAc,SAAS,2BAA2B;AACtD,cAAI,YAAY;AAAG,cAAI,OAAO;AAAA,QAChC,OAAO;AACL,cAAI,KAAK;AAAG,cAAI,KAAK;AACrB,gBAAM,KAAK,MAAM,UAAU,IAAI,MAAM,UAAU,MAAM;AACrD,cAAI,YAAY,GAAG,CAAC;AACpB,cAAI,SAAS,GAAG,GAAG,UAAU,SAAS;AACtC,eAAK,cAAc,GAAG,GAAG,UAAU,WAAW,IAAI,CAAC;AACnD,cAAI,QAAQ;AAAA,QACd;AAGA,YAAI,cAAc,WAAW,KAAK;AAChC,gBAAM,IAAI,KAAK,IAAI,IAAI,WAAW,OAAO,IAAI;AAC7C,cAAI,cAAc;AAClB,gBAAM,KAAK,KAAK,IAAI,IAAI,WAAW,OAAO,GAAG;AAC7C,gBAAM,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI,CAAC;AACjC,gBAAM,KAAK,cAAc,KAAK,aAAa,EAAE,QAAQ,EAAE,IAAI;AAE3D,cAAI,eAAe,YAAY,IAAI;AACjC,kBAAM,SAAS,MAAM,SAAS;AAC9B,gBAAI,YAAa,YAAY,CAAC,SACzB,SAAS,2BAA2B,oBACpC,SAAS,wBAAwB;AACtC,gBAAI,OAAO,SAAS,YAAY,MAAM,UAAU,KAAK,YAAY,MAAM,UAAU;AACjF,gBAAI,YAAY;AAChB,gBAAI,SAAS,IAAI,IAAI,WAAW,GAAG,IAAI,EAAE;AAAA,UAC3C,OAAO;AACL,gBAAI,QAAQ;AACV,oBAAM,KAAK,MAAM,UAAU,IAAI,MAAM,UAAU,MAAM;AACrD,oBAAM,KAAK,IAAI,qBAAqB,GAAG,GAAG,IAAI,UAAU,CAAC;AACzD,iBAAG,aAAa,GAAG,GAAG,CAAC,CAAC;AAAG,iBAAG,aAAa,GAAG,GAAG,CAAC,CAAC;AACnD,kBAAI,YAAY;AAChB,kBAAI,OAAO,YAAY,MAAM,UAAU;AAAA,YACzC,OAAO;AACL,kBAAI,YAAY,MAAM;AACtB,kBAAI,OAAO,YAAY,MAAM,UAAU;AAAA,YACzC;AACA,gBAAI,YAAY;AAChB,gBAAI,SAAS,IAAI,IAAI,WAAW,GAAG,IAAI,EAAE;AAAA,UAC3C;AACA,cAAI,cAAc;AAAA,QACpB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IAEA,cAAc,GAAW,GAAW,GAAW,GAAW,QAAkB,MAAc;AACxF,YAAM,EAAE,IAAI,IAAI;AAChB,YAAM,IAAI,CAAC,MAAc;AAAE,YAAI,IAAI,KAAK,IAAI,OAAK,QAAM,IAAE,KAAK,IAAE;AAAY,eAAO,IAAE,KAAK,MAAM,CAAC;AAAA,MAAG;AACpG,eAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,cAAM,KAAG,IAAE,KAAG,MAAI,EAAE,IAAE,CAAC,IAAE,MAAM,KAAG,IAAE,KAAG,MAAI,EAAE,IAAE,IAAE,CAAC,IAAE;AACpD,cAAM,SAAO,KAAK,IAAI,GAAE,CAAC,KAAG,OAAK,EAAE,IAAE,IAAE,CAAC,IAAE,OAAO,QAAM,OAAO,IAAE,OAAO,MAAM;AAC7E,cAAM,KAAG,IAAI,qBAAqB,IAAG,IAAG,GAAE,IAAG,IAAG,MAAM;AACtD,WAAG,aAAa,GAAE,KAAK;AAAG,WAAG,aAAa,KAAI,QAAM,IAAI;AAAG,WAAG,aAAa,GAAE,QAAM,IAAI;AACvF,YAAI,2BAAyB;AAAe,YAAI,YAAU;AAAI,YAAI,SAAS,GAAE,GAAE,GAAE,CAAC;AAClF,YAAI,2BAAyB;AAAA,MAC/B;AAAA,IACF;AAAA,IAEA,aAAa,GAAmB;AAC9B,UAAI,KAAG,IAAK,SAAQ,IAAE,KAAK,QAAQ,CAAC,IAAE;AAAK,UAAI,KAAG,IAAK,SAAQ,IAAE,KAAK,QAAQ,CAAC,IAAE;AACjF,UAAI,KAAG,IAAK,SAAQ,IAAE,KAAK,QAAQ,CAAC,IAAE;AAAK,aAAO,EAAE,eAAe;AAAA,IACrE;AAAA,IAEA,cAAc,OAAe,UAA0B;AACrD,YAAM,EAAE,KAAK,MAAM,IAAI;AACvB,UAAI,OAAO,YAAY,MAAM,UAAU;AACvC,UAAI,IAAI,YAAY,KAAK,EAAE,SAAS,SAAU,QAAO;AACrD,YAAM,IAAE,MAAM,MAAM,GAAG;AAAG,UAAI,EAAE,SAAO,KAAK,IAAI,YAAY,EAAE,CAAC,CAAC,EAAE,SAAO,SAAU,QAAO,EAAE,CAAC;AAC7F,UAAI,IAAE;AAAO,aAAO,EAAE,SAAO,KAAK,IAAI,YAAY,IAAE,IAAI,EAAE,QAAM,SAAU,KAAE,EAAE,MAAM,GAAE,EAAE;AAAG,aAAO,IAAE;AAAA,IACtG;AAAA,EACF;;;ACnKO,MAAM,YAAN,cAAwB,UAAU;AAAA,IACvC;AAAA,IAEA,YAAY,WAAiC,QAAyB;AACpE,YAAM,WAAW,MAAM;AACvB,WAAK,aAAa,EAAE,UAAU,MAAM,UAAU,MAAM,GAAG,OAAO;AAC9D,WAAK,OAAO;AAAA,IACd;AAAA,IAEA,SAAS;AACP,WAAK,QAAQ,CAAC,aAAa,KAAK,KAAK,QAAQ,CAAC;AAAA,IAChD;AAAA,IAEA,KAAK,UAAkB;AACrB,YAAM,EAAE,KAAK,OAAO,QAAQ,OAAO,SAAS,WAAW,IAAI;AAC3D,YAAM,EAAE,MAAM,QAAQ,UAAU,UAAU,UAAU,IAAI,UAAU,GAAG,IAAI;AAEzE,WAAK,eAAe;AACpB,WAAK,UAAU;AAEf,YAAM,WAAW,QAAQ,MAAM;AAC/B,YAAM,cAAc,SAAS,QAAQ,SAAS;AAC9C,YAAM,YAAY,QAAQ,OAAO;AACjC,YAAM,aAAa,QAAQ,QAAQ;AACnC,YAAM,aAAa,aAAa;AAChC,YAAM,cAAc,cAAc;AAElC,YAAM,OAAO,OAAO,QAAQ,OAAK,EAAE,KAAK,IAAI,OAAK,EAAE,CAAC,CAAC;AACrD,YAAM,OAAO,KAAK,IAAI,GAAG,IAAI,IAAI;AACjC,YAAM,OAAO,KAAK,IAAI,GAAG,IAAI,IAAI;AACjC,YAAM,SAAS,OAAO,QAAQ;AAE9B,YAAM,OAAO,OAAO,CAAC,GAAG,KAAK,IAAI,OAAK,OAAO,EAAE,CAAC,CAAC,KAAK,CAAC;AACvD,YAAM,OAAO,KAAK,IAAI,GAAG,IAAI;AAC7B,YAAM,OAAO,KAAK,IAAI,GAAG,IAAI;AAC7B,YAAM,SAAS,OAAO,QAAQ;AAG9B,YAAM,SAAS;AACf,UAAI,cAAc,MAAM;AACxB,UAAI,YAAY;AAChB,eAAS,IAAI,GAAG,KAAK,QAAQ,KAAK;AAChC,cAAM,OAAO,IAAI;AACjB,cAAM,IAAI,cAAc,OAAO;AAC/B,cAAM,MAAM,OAAO,OAAO;AAC1B,YAAI,UAAU;AACd,YAAI,OAAO,WAAW,CAAC;AACvB,YAAI,OAAO,YAAY,CAAC;AACxB,YAAI,OAAO;AACX,YAAI,YAAY,MAAM;AACtB,YAAI,OAAO,YAAY,MAAM,UAAU;AACvC,YAAI,YAAY;AAChB,YAAI,SAAS,UAAU,KAAK,UAAU,GAAG,IAAI,SAAS,YAAY,GAAG,IAAI,CAAC;AAAA,MAC5E;AAGA,YAAM,cAAc,KAAK,IAAI,KAAK,QAAQ,CAAC;AAC3C,YAAM,QAAQ,KAAK,IAAI,GAAG,KAAK,MAAM,KAAK,SAAS,WAAW,CAAC;AAC/D,UAAI,YAAY,MAAM;AACtB,UAAI,OAAO,YAAY,MAAM,UAAU;AACvC,UAAI,YAAY;AAChB,eAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,OAAO;AAC3C,cAAM,KAAK,aAAc,KAAK,CAAC,IAAI,QAAQ,SAAU;AACrD,YAAI,SAAS,OAAO,KAAK,CAAC,CAAC,GAAG,IAAI,cAAc,EAAE;AAAA,MACpD;AAGA,UAAI,cAAc,MAAM,gBAAgB;AACxC,UAAI,YAAY;AAChB,UAAI,UAAU;AACd,UAAI,OAAO,WAAW,WAAW;AACjC,UAAI,OAAO,YAAY,WAAW;AAClC,UAAI,OAAO;AAGX,UAAI,OAAO,SAAS,GAAG;AACrB,YAAI,UAAU;AACd,cAAM,UAAU,cAAc;AAC9B,eAAO,QAAQ,CAAC,GAAG,OAAO;AACxB,gBAAM,QAAQ,EAAE,SAAS,MAAM,UAAU,KAAK,MAAM,UAAU,MAAM,EAAE,CAAC;AACvE,cAAI,YAAY;AAChB,cAAI,SAAS,SAAS,UAAU,GAAG,IAAI,CAAC;AACxC,cAAI,YAAY,MAAM;AACtB,cAAI,OAAO,YAAY,MAAM,UAAU;AACvC,cAAI,YAAY;AAChB,cAAI,SAAS,EAAE,OAAO,UAAU,IAAI,OAAO;AAC3C,qBAAW,IAAI,YAAY,EAAE,KAAK,EAAE,QAAQ;AAAA,QAC9C,CAAC;AAAA,MACH;AAEA,WAAK,WAAW;AAChB,WAAK,mBAAmB;AAGxB,aAAO,QAAQ,CAAC,GAAG,OAAO;AACxB,cAAM,QAAQ,EAAE,SAAS,MAAM,UAAU,KAAK,MAAM,UAAU,MAAM,EAAE,CAAC;AACvE,cAAM,aAAa,MAAM,UAAU,KAAK,MAAM,UAAU,MAAM;AAC9D,cAAM,SAA6B,CAAC;AAEpC,UAAE,KAAK,QAAQ,OAAK;AAClB,gBAAM,KAAK,aAAc,OAAO,EAAE,CAAC,IAAI,QAAQ,SAAU;AACzD,gBAAM,KAAK,eAAgB,EAAE,IAAI,QAAQ,SAAU;AACnD,iBAAO,KAAK,CAAC,IAAI,EAAE,CAAC;AAAA,QACtB,CAAC;AAED,cAAM,eAAe,KAAK,IAAI,GAAG,KAAK,MAAM,OAAO,SAAS,QAAQ,CAAC;AACrE,cAAM,UAAU,OAAO,MAAM,GAAG,YAAY;AAG5C,YAAI,YAAY,QAAQ,SAAS,GAAG;AAClC,cAAI,KAAK;AAGT,cAAI,UAAU;AACd,cAAI,OAAO,QAAQ,CAAC,EAAE,CAAC,GAAG,WAAW;AACrC,kBAAQ,QAAQ,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,OAAO,GAAG,CAAC,CAAC;AAC5C,cAAI,OAAO,QAAQ,QAAQ,SAAS,CAAC,EAAE,CAAC,GAAG,WAAW;AACtD,cAAI,UAAU;AACd,cAAI,KAAK;AAGT,gBAAM,WAAW,IAAI,qBAAqB,GAAG,UAAU,GAAG,WAAW;AACrE,mBAAS,aAAa,GAAG,WAAW,CAAC,IAAI,IAAI;AAC7C,mBAAS,aAAa,GAAG,WAAW,CAAC,IAAI,IAAI;AAC7C,cAAI,YAAY;AAChB,cAAI,SAAS,WAAW,UAAU,YAAY,WAAW;AAGzD,gBAAM,WAAW,QAAQ,CAAC,EAAE,CAAC;AAC7B,gBAAM,WAAW,QAAQ,QAAQ,SAAS,CAAC,EAAE,CAAC;AAC9C,gBAAM,QAAQ,WAAW;AACzB,gBAAM,YAAY;AAClB,mBAAS,IAAI,GAAG,IAAI,WAAW,KAAK;AAClC,gBAAI,IAAI,KAAK,IAAI,KAAK,QAAQ,IAAI,KAAK,IAAI;AAC3C,kBAAM,OAAO,IAAI,KAAK,MAAM,CAAC;AAC7B,gBAAI,KAAK,KAAK,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,KAAK,IAAI;AACtD,kBAAM,QAAQ,KAAK,KAAK,MAAM,EAAE;AAChC,gBAAI,KAAK,KAAK,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,KAAK,IAAI;AACtD,kBAAM,QAAQ,KAAK,KAAK,MAAM,EAAE;AAEhC,kBAAM,KAAK,WAAW,SAAS,OAAO,OAAO;AAC7C,kBAAM,KAAK,WAAW,eAAe,MAAM,QAAQ;AACnD,kBAAM,SAAS,eAAe,MAAM,QAAQ;AAC5C,kBAAM,YAAY,WAAW,IAAI,WAAW,MAAM;AAElD,kBAAM,UAAU,IAAI,qBAAqB,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM;AAClE,oBAAQ,aAAa,GAAG,YAAY,IAAI;AACxC,oBAAQ,aAAa,KAAK,YAAY,IAAI;AAC1C,oBAAQ,aAAa,GAAG,YAAY,IAAI;AAExC,gBAAI,YAAY;AAChB,gBAAI,SAAS,WAAW,UAAU,YAAY,WAAW;AAAA,UAC3D;AAEA,cAAI,QAAQ;AAAA,QACd;AAGA,YAAI,QAAQ,SAAS,GAAG;AACtB,cAAI,UAAU;AACd,cAAI,OAAO,QAAQ,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;AACvC,mBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACvC,gBAAI,OAAO,QAAQ,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;AAAA,UACzC;AACA,cAAI,cAAc;AAClB,cAAI,YAAY;AAChB,cAAI,WAAW;AACf,cAAI,UAAU;AACd,cAAI,OAAO;AAAA,QACb;AAGA,YAAI,YAAY,WAAW,KAAK;AAC9B,gBAAM,YAAY,WAAW,OAAO;AACpC,cAAI,cAAc;AAClB,kBAAQ,QAAQ,CAAC,CAAC,GAAG,CAAC,MAAM;AAC1B,gBAAI,UAAU;AACd,gBAAI,IAAI,GAAG,GAAG,GAAG,GAAG,KAAK,KAAK,CAAC;AAC/B,gBAAI,YAAY;AAChB,gBAAI,KAAK;AACT,gBAAI,cAAc,MAAM;AACxB,gBAAI,YAAY;AAChB,gBAAI,OAAO;AAAA,UACb,CAAC;AACD,cAAI,cAAc;AAAA,QACpB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IAEA,UAAU,GAAmB;AAC3B,UAAI,KAAK,IAAI,CAAC,KAAK,KAAM,SAAQ,IAAI,MAAM,QAAQ,CAAC,IAAI;AACxD,UAAI,KAAK,IAAI,CAAC,KAAK,IAAK,SAAQ,IAAI,KAAK,QAAQ,CAAC,IAAI;AACtD,UAAI,KAAK,IAAI,CAAC,KAAK,IAAK,SAAQ,IAAI,KAAK,QAAQ,CAAC,IAAI;AACtD,UAAI,KAAK,IAAI,CAAC,KAAK,IAAK,SAAQ,IAAI,KAAK,QAAQ,CAAC,IAAI;AACtD,aAAO,EAAE,QAAQ,CAAC;AAAA,IACpB;AAAA,EACF;;;ACtMO,MAAM,YAAN,cAAwB,UAAU;AAAA,IACvC;AAAA,IAEA,YAAY,WAAiC,QAAyB;AACpE,YAAM,OAAO,OAAO,aAAa;AACjC,YAAM,aAAa,KAAK,IAAI,KAAK,OAAO,KAAK,UAAU,OAAO,KAAK,GAAG;AACtE,aAAO,SAAS,OAAO,UAAU;AACjC,YAAM,WAAW,MAAM;AACvB,WAAK,aAAa,EAAE,WAAW,MAAM,aAAa,OAAO,UAAU,OAAO,GAAG,OAAO;AACpF,WAAK,OAAO;AAAA,IACd;AAAA,IAEA,SAAS;AACP,WAAK,QAAQ,CAAC,aAAa,KAAK,KAAK,QAAQ,CAAC;AAAA,IAChD;AAAA,IAEA,SAAS,GAAkB,GAAoB;AAC7C,YAAM,EAAE,MAAM,cAAc,eAAe,SAAS,IAAI,KAAK;AAC7D,UAAI,kBAAkB,OAAW,QAAO,MAAO,gBAAgB;AAC/D,UAAI,iBAAiB,OAAW,QAAO,IAAI;AAC3C,UAAI,SAAU,QAAO,IAAI;AACzB,UAAI,KAAK,KAAK,QAAM,GAAG,SAAS,EAAG,QAAO,CAAC,CAAC,EAAE;AAC9C,aAAO;AAAA,IACT;AAAA,IAEA,cAAuB;AACrB,YAAM,EAAE,MAAM,cAAc,eAAe,SAAS,IAAI,KAAK;AAC7D,UAAI,kBAAkB,OAAW,QAAO;AACxC,UAAI,iBAAiB,OAAW,QAAO,eAAe,KAAK;AAC3D,UAAI,SAAU,QAAO,KAAK,SAAS;AACnC,aAAO,KAAK,KAAK,OAAK,EAAE,SAAS;AAAA,IACnC;AAAA,IAEA,KAAK,UAAkB;AACrB,YAAM,EAAE,KAAK,OAAO,QAAQ,OAAO,SAAS,WAAW,IAAI;AAC3D,YAAM,EAAE,MAAM,cAAc,IAAI,cAAc,IAAI,YAAY,IAAI,aAAa,SAAS,IAAI;AAE5F,WAAK,eAAe;AACpB,WAAK,UAAU;AAEf,YAAM,WAAW,QAAQ,MAAM;AAC/B,YAAM,YAAY,WAAW,KAAK;AAClC,YAAM,aAAa;AACnB,YAAM,YAAY,QAAQ,OAAO,YAAY;AAC7C,YAAM,aAAa,QAAQ,QAAQ,QAAQ;AAC3C,YAAM,aAAa,aAAa;AAChC,YAAM,SAAS;AACf,YAAM,SAAS,KAAK,IAAI,GAAG,KAAK,IAAI,OAAK,EAAE,KAAK,CAAC;AACjD,YAAM,WAAW,KAAK,YAAY;AAGlC,WAAK,QAAQ,CAAC,GAAG,MAAM;AACrB,cAAM,IAAI,WAAW,KAAK,YAAY;AACtC,cAAM,SAAS,KAAK,SAAS,GAAG,CAAC;AAEjC,YAAI,UAAU;AACZ,gBAAM,QAAQ,QAAQ;AACtB,gBAAM,QAAQ,IAAI,YAAY;AAE9B,cAAI,QAAQ;AACV,kBAAM,KAAK,MAAM,UAAU,IAAI,MAAM,UAAU,MAAM;AACrD,kBAAM,QAAQ,IAAI,QAAQ;AAC1B,kBAAM,OAAO,IAAI,qBAAqB,OAAO,QAAM,QAAM,GAAG,QAAM,OAAO,QAAM,QAAM,CAAC;AACtF,iBAAK,aAAa,GAAG,GAAG,CAAC,CAAC;AAAG,iBAAK,aAAa,GAAG,GAAG,CAAC,CAAC;AACvD,gBAAI,UAAU;AAAG,gBAAI,UAAU,OAAO,QAAM,QAAM,GAAG,OAAO,OAAO,CAAC;AACpE,gBAAI,YAAY;AAAM,gBAAI,KAAK;AAC/B,gBAAI,YAAY,MAAM,SAAS,aAAa,uBAAuB;AACnE,gBAAI,OAAO,YAAY,MAAM,UAAU;AACvC,gBAAI,YAAY;AAChB,gBAAI,SAAS,OAAK,IAAE,IAAI,QAAM,QAAM,GAAG,QAAM,GAAG;AAAA,UAClD,OAAO;AACL,gBAAI,YAAY,MAAM;AACtB,gBAAI,OAAO,YAAY,MAAM,UAAU;AACvC,gBAAI,YAAY;AAChB,gBAAI,SAAS,OAAK,IAAE,IAAI,QAAM,IAAI,QAAM,CAAC;AAAA,UAC3C;AAAA,QACF;AAEA,YAAI,YAAa,YAAY,CAAC,SAAU,MAAM,aAAa,MAAM;AACjE,YAAI,OAAO,SAAS,YAAY,MAAM,UAAU,KAAK,YAAY,MAAM,UAAU;AACjF,YAAI,YAAY;AAChB,YAAI,SAAS,EAAE,OAAO,YAAY,IAAI,IAAI,YAAU,IAAI,CAAC;AAAA,MAC3D,CAAC;AAED,WAAK,WAAW;AAChB,WAAK,mBAAmB;AAGxB,WAAK,QAAQ,CAAC,GAAG,MAAM;AACrB,cAAM,IAAI,WAAW,KAAK,YAAY;AACtC,cAAM,OAAQ,EAAE,QAAQ,SAAU,aAAa;AAC/C,YAAI,QAAQ,EAAG;AAEf,cAAM,SAAS,KAAK,SAAS,GAAG,CAAC;AACjC,cAAM,KAAK,MAAM,UAAU,IAAI,MAAM,UAAU,MAAM;AACrD,cAAM,IAAI,KAAK,IAAI,GAAG,OAAO,CAAC;AAE9B,YAAI,UAAU;AACd,YAAI,OAAO,WAAW,CAAC;AACvB,YAAI,OAAO,YAAU,OAAK,GAAG,CAAC;AAC9B,YAAI,iBAAiB,YAAU,MAAM,GAAG,YAAU,MAAM,IAAE,CAAC;AAC3D,YAAI,OAAO,YAAU,MAAM,IAAE,YAAU,CAAC;AACxC,YAAI,iBAAiB,YAAU,MAAM,IAAE,WAAW,YAAU,OAAK,GAAG,IAAE,SAAS;AAC/E,YAAI,OAAO,WAAW,IAAE,SAAS;AACjC,YAAI,UAAU;AAEd,YAAI,YAAY,CAAC,QAAQ;AACvB,gBAAM,SAAS,MAAM,SAAS;AAC9B,cAAI,YAAY,SAAS,2BAA2B;AACpD,cAAI,KAAK;AACT,cAAI,cAAc,SAAS,2BAA2B;AACtD,cAAI,YAAY;AAAG,cAAI,OAAO;AAAA,QAChC,OAAO;AACL,cAAI,KAAK;AAAG,cAAI,KAAK;AACrB,cAAI,YAAY,GAAG,CAAC;AACpB,cAAI,SAAS,WAAW,GAAG,MAAM,SAAS;AAC1C,eAAK,cAAc,WAAW,GAAG,MAAM,WAAW,IAAI,CAAC;AACvD,cAAI,QAAQ;AAAA,QACd;AAGA,YAAI,WAAW,KAAK;AAClB,gBAAM,IAAI,KAAK,IAAI,IAAI,WAAS,OAAK,IAAI;AACzC,cAAI,cAAc;AAClB,gBAAM,KAAK,KAAK,IAAI,IAAI,WAAS,OAAK,GAAG;AACzC,gBAAM,KAAK,IAAE,KAAK,IAAI,IAAE,IAAI,CAAC;AAC7B,gBAAM,KAAK,cAAc,KAAK,aAAa,EAAE,QAAQ,EAAE,IAAI;AAE3D,cAAI,eAAe,OAAO,IAAI;AAC5B,kBAAM,SAAS,MAAM,SAAS;AAC9B,gBAAI,YAAa,YAAY,CAAC,SACzB,SAAS,2BAA2B,oBACpC,SAAS,wBAAwB;AACtC,gBAAI,OAAO,SAAS,YAAY,MAAM,UAAU,KAAK,YAAY,MAAM,UAAU;AACjF,gBAAI,YAAY;AAChB,gBAAI,SAAS,IAAI,YAAU,OAAK,IAAI,IAAE,YAAU,IAAE,CAAC;AAAA,UACrD,OAAO;AACL,gBAAI,QAAQ;AACV,oBAAM,KAAK,IAAI,qBAAqB,YAAU,OAAK,GAAG,GAAG,YAAU,OAAK,IAAI,CAAC;AAC7E,iBAAG,aAAa,GAAG,GAAG,CAAC,CAAC;AAAG,iBAAG,aAAa,GAAG,GAAG,CAAC,CAAC;AACnD,kBAAI,YAAY;AAChB,kBAAI,OAAO,YAAY,MAAM,UAAU;AAAA,YACzC,OAAO;AACL,kBAAI,YAAY,MAAM;AACtB,kBAAI,OAAO,YAAY,MAAM,UAAU;AAAA,YACzC;AACA,gBAAI,YAAY;AAChB,gBAAI,SAAS,IAAI,YAAU,OAAK,GAAG,IAAE,YAAU,IAAE,CAAC;AAAA,UACpD;AACA,cAAI,cAAc;AAAA,QACpB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IAEA,cAAc,GAAW,GAAW,GAAW,GAAW,QAAkB,MAAc;AACxF,YAAM,EAAE,IAAI,IAAI;AAChB,YAAM,IAAI,CAAC,MAAc;AAAE,YAAI,IAAE,KAAK,IAAI,OAAK,QAAM,IAAE,KAAK,IAAE;AAAY,eAAO,IAAE,KAAK,MAAM,CAAC;AAAA,MAAG;AAClG,eAAS,IAAE,GAAG,IAAE,GAAG,KAAK;AACtB,cAAM,KAAG,IAAE,KAAG,OAAK,EAAE,IAAE,CAAC,IAAE,MAAM,KAAG,IAAE,KAAG,MAAI,EAAE,IAAE,IAAE,CAAC,IAAE;AACrD,cAAM,SAAO,KAAK,IAAI,IAAE,KAAI,CAAC,KAAG,MAAI,EAAE,IAAE,IAAE,CAAC,IAAE,MAAM,QAAM,OAAO,IAAE,OAAO,MAAM;AAC/E,cAAM,KAAG,IAAI,qBAAqB,IAAG,IAAG,GAAE,IAAG,IAAG,MAAM;AACtD,WAAG,aAAa,GAAE,KAAK;AAAG,WAAG,aAAa,KAAI,QAAM,IAAI;AAAG,WAAG,aAAa,GAAE,QAAM,IAAI;AACvF,YAAI,2BAAyB;AAAe,YAAI,YAAU;AAAI,YAAI,SAAS,GAAE,GAAE,GAAE,CAAC;AAClF,YAAI,2BAAyB;AAAA,MAC/B;AAAA,IACF;AAAA,IAEA,aAAa,GAAmB;AAC9B,UAAI,KAAG,IAAK,SAAQ,IAAE,KAAK,QAAQ,CAAC,IAAE;AAAK,UAAI,KAAG,IAAK,SAAQ,IAAE,KAAK,QAAQ,CAAC,IAAE;AACjF,UAAI,KAAG,IAAK,SAAQ,IAAE,KAAK,QAAQ,CAAC,IAAE;AAAK,aAAO,EAAE,eAAe;AAAA,IACrE;AAAA,EACF;;;ACjLO,MAAM,WAAN,cAAuB,UAAU;AAAA,IACtC;AAAA,IAEA,YAAY,WAAiC,QAAwB;AACnE,aAAO,SAAS,OAAO,UAAU;AACjC,YAAM,WAAW,MAAM;AACvB,WAAK,aAAa;AAClB,WAAK,OAAO;AAAA,IACd;AAAA,IAEA,SAAS;AACP,WAAK,QAAQ,CAAC,aAAa,KAAK,KAAK,QAAQ,GAAG,GAAG;AAAA,IACrD;AAAA,IAEA,KAAK,UAAkB;AACrB,YAAM,EAAE,KAAK,OAAO,QAAQ,OAAO,WAAW,IAAI;AAClD,YAAM,EAAE,OAAO,OAAO,OAAO,eAAe,SAAS,IAAI,SAAS,GAAG,IAAI,WAAW;AAEpF,WAAK,eAAe;AAEpB,YAAM,aAAa,OAAO,UAAU,WAAW,QAAQ,WAAW,OAAO,KAAK,CAAC;AAC/E,UAAI;AAEJ,UAAI,CAAC,MAAM,UAAU,KAAK,OAAO,UAAU,UAAU;AACnD,cAAM,UAAU,aAAa;AAC7B,qBAAa,SAAS,KAAK,gBAAgB,OAAO,IAAI;AAAA,MACxD,OAAO;AACL,qBAAa,SAAS,OAAO,KAAK,IAAI;AAAA,MACxC;AAGA,UAAI,KAAK,OAAO,OAAO;AACrB,YAAI,YAAY,MAAM;AACtB,YAAI,OAAO,YAAY,MAAM,UAAU;AACvC,YAAI,YAAY;AAChB,YAAI,SAAS,KAAK,OAAO,MAAM,YAAY,GAAG,KAAK,QAAQ,MAAM,EAAE;AAAA,MACrE;AAGA,UAAI,YAAY,MAAM;AACtB,UAAI,OAAO,YAAY,MAAM,UAAU;AACvC,UAAI,YAAY;AAChB,UAAI,SAAS,OAAO,QAAQ,GAAG,SAAS,IAAI,EAAE;AAG9C,UAAI,SAAS,WAAW,KAAK;AAC3B,cAAM,SAAS,WAAW,OAAO;AACjC,YAAI,cAAc,KAAK,IAAI,GAAG,KAAK;AAEnC,cAAM,QAAQ,kBAAkB,SAAY,gBAAgB,MAAM,WAAW,GAAG;AAChF,cAAM,aAAa,QAAQ,YAAY;AAEvC,YAAI,YAAY,aAAa;AAC7B,cAAM,aAAa,IAAI,YAAY,KAAK,EAAE,QAAQ;AAClD,cAAM,SAAS,QAAQ,IAAI,aAAa;AACxC,cAAM,SAAS,SAAS,IAAI;AAE5B,YAAI,UAAU;AACd,YAAI,UAAU,QAAQ,QAAQ,YAAY,IAAI,EAAE;AAChD,YAAI,KAAK;AAET,YAAI,YAAY;AAChB,YAAI,OAAO,YAAY,MAAM,UAAU;AACvC,YAAI,YAAY;AAChB,YAAI,SAAS,OAAO,QAAQ,GAAG,SAAS,EAAE;AAC1C,YAAI,cAAc;AAAA,MACpB;AAEA,WAAK,WAAW;AAGhB,WAAK,mBAAmB;AAGxB,UAAI,OAAO,YAAY,MAAM,UAAU;AACvC,UAAI,YAAY;AAGhB,YAAM,UAAU,IAAI,YAAY,UAAU;AAC1C,YAAM,QAAQ,QAAQ;AACtB,YAAM,QAAQ,SAAS,IAAI;AAG3B,YAAM,aAAa,MAAM;AACzB,YAAM,YAAY,QAAQ;AAC1B,YAAM,OAAO,IAAI;AAAA,QACf,QAAQ,YAAY;AAAA,QAAG;AAAA,QACvB,QAAQ,YAAY;AAAA,QAAG;AAAA,MACzB;AACA,WAAK,aAAa,GAAG,WAAW,CAAC,CAAC;AAClC,WAAK,aAAa,GAAG,WAAW,CAAC,CAAC;AAElC,UAAI,YAAY;AAChB,UAAI,SAAS,YAAY,OAAO,KAAK;AAAA,IACvC;AAAA,IAEA,gBAAgB,GAAmB;AACjC,UAAI,KAAK,KAAM,SAAQ,IAAI,MAAM,QAAQ,CAAC,IAAI;AAC9C,UAAI,KAAK,IAAK,SAAQ,IAAI,KAAK,QAAQ,CAAC,IAAI;AAC5C,UAAI,KAAK,IAAK,SAAQ,IAAI,KAAK,QAAQ,CAAC,IAAI;AAC5C,UAAI,KAAK,IAAK,SAAQ,IAAI,KAAK,QAAQ,CAAC,EAAE,QAAQ,yBAAyB,GAAG;AAC9E,aAAO,KAAK,MAAM,CAAC,EAAE,eAAe;AAAA,IACtC;AAAA,EACF;;;AClGO,MAAM,aAAN,cAAyB,UAAU;AAAA,IACxC;AAAA,IAEA,YAAY,WAAiC,QAA0B;AACrE,YAAM,WAAW,MAAM;AACvB,WAAK,cAAc;AACnB,WAAK,OAAO;AAAA,IACd;AAAA,IAEA,SAAS;AACP,WAAK,QAAQ,CAAC,aAAa,KAAK,KAAK,QAAQ,CAAC;AAAA,IAChD;AAAA,IAEA,KAAK,UAAkB;AACrB,YAAM,EAAE,KAAK,OAAO,QAAQ,OAAO,QAAQ,IAAI;AAC/C,YAAM,EAAE,KAAK,IAAI,KAAK;AACtB,YAAM,EAAE,MAAM,UAAU,SAAS,IAAI;AACrC,YAAM,IAAI,KAAK;AACf,UAAI,IAAI,EAAG;AAEX,WAAK,eAAe;AACpB,WAAK,UAAU;AAEf,YAAM,KAAK,QAAQ;AACnB,YAAM,KAAK,QAAQ,OAAO,SAAS,QAAQ,MAAM,QAAQ,UAAU,IAAI;AACvE,YAAM,SAAS,KAAK;AAAA,SACjB,QAAQ,QAAQ,OAAO,QAAQ,SAAS,IAAI;AAAA,SAC5C,SAAS,QAAQ,MAAM,QAAQ,UAAU,IAAI;AAAA,MAChD;AAEA,YAAM,MAAM,YAAY,KAAK,IAAI,GAAG,SAAS,QAAQ,OAAK,EAAE,MAAM,CAAC,IAAI;AACvE,YAAM,YAAa,KAAK,KAAK,IAAK;AAClC,YAAM,aAAa,CAAC,KAAK,KAAK;AAG9B,YAAM,QAAQ;AACd,UAAI,cAAc,MAAM;AACxB,UAAI,YAAY;AAChB,eAAS,IAAI,GAAG,KAAK,OAAO,KAAK;AAC/B,cAAM,QAAS,SAAS,IAAK;AAC7B,YAAI,UAAU;AACd,iBAAS,IAAI,GAAG,KAAK,GAAG,KAAK;AAC3B,gBAAM,QAAQ,aAAa,IAAI;AAC/B,gBAAM,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI;AACjC,gBAAM,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI;AACjC,cAAI,MAAM,EAAG,KAAI,OAAO,GAAG,CAAC;AAAA,cACvB,KAAI,OAAO,GAAG,CAAC;AAAA,QACtB;AACA,YAAI,OAAO;AAAA,MACb;AAGA,eAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,cAAM,QAAQ,aAAa,IAAI;AAC/B,cAAM,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI;AACjC,cAAM,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI;AACjC,YAAI,UAAU;AACd,YAAI,OAAO,IAAI,EAAE;AACjB,YAAI,OAAO,GAAG,CAAC;AACf,YAAI,OAAO;AAAA,MACb;AAGA,UAAI,YAAY,MAAM;AACtB,UAAI,OAAO,YAAY,MAAM,UAAU;AACvC,eAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,cAAM,QAAQ,aAAa,IAAI;AAC/B,cAAM,SAAS,SAAS;AACxB,cAAM,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI;AACjC,cAAM,IAAI,KAAK,KAAK,IAAI,KAAK,IAAI;AAGjC,YAAI,KAAK,IAAI,KAAK,IAAI,KAAK,CAAC,IAAI,KAAK;AACnC,cAAI,YAAY;AAAA,QAClB,WAAW,KAAK,IAAI,KAAK,IAAI,GAAG;AAC9B,cAAI,YAAY;AAAA,QAClB,OAAO;AACL,cAAI,YAAY;AAAA,QAClB;AACA,YAAI,eAAe,KAAK,IAAI,KAAK,IAAI,KAAK,CAAC,IAAI,MAAM,WACjD,KAAK,IAAI,KAAK,IAAI,IAAI,WAAW;AAErC,YAAI,SAAS,KAAK,CAAC,GAAG,GAAG,CAAC;AAAA,MAC5B;AAEA,WAAK,WAAW;AAChB,WAAK,mBAAmB;AAGxB,YAAM,eAAe,SAAS,KAAK,OAAK,EAAE,SAAS;AAEnD,eAAS,QAAQ,CAAC,SAAS,OAAO;AAChC,cAAM,SAAS,CAAC,gBAAgB,QAAQ;AACxC,cAAM,SAA6B,CAAC;AAEpC,iBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,gBAAM,QAAQ,aAAa,IAAI;AAC/B,gBAAM,OAAO,QAAQ,OAAO,CAAC,KAAK,KAAK;AACvC,gBAAM,IAAI,MAAM,SAAS;AACzB,iBAAO,KAAK,CAAC,KAAK,KAAK,IAAI,KAAK,IAAI,GAAG,KAAK,KAAK,IAAI,KAAK,IAAI,CAAC,CAAC;AAAA,QAClE;AAGA,YAAI,UAAU;AACd,eAAO,QAAQ,CAAC,GAAG,MAAM;AACvB,cAAI,MAAM,EAAG,KAAI,OAAO,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;AAAA,cAC7B,KAAI,OAAO,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;AAAA,QAC5B,CAAC;AACD,YAAI,UAAU;AAEd,YAAI,QAAQ;AACV,gBAAM,KAAK,QAAQ,YACf,MAAM,oBACN,MAAM,UAAU,KAAK,MAAM,UAAU,MAAM;AAC/C,gBAAM,WAAW,IAAI,qBAAqB,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAC5F,mBAAS,aAAa,GAAG,GAAG,CAAC,IAAI,IAAI;AACrC,mBAAS,aAAa,GAAG,GAAG,CAAC,IAAI,IAAI;AACrC,cAAI,YAAY;AAChB,cAAI,KAAK;AAGT,gBAAM,aAAa,IAAI,qBAAqB,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAC9F,qBAAW,aAAa,GAAG,GAAG,CAAC,CAAC;AAChC,qBAAW,aAAa,GAAG,GAAG,CAAC,CAAC;AAChC,cAAI,cAAc;AAClB,cAAI,YAAY;AAChB,cAAI,OAAO;AAGX,iBAAO,QAAQ,OAAK;AAClB,gBAAI,UAAU;AACd,gBAAI,IAAI,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,GAAG,GAAG,KAAK,KAAK,CAAC;AACrC,gBAAI,YAAY,GAAG,CAAC;AACpB,gBAAI,KAAK;AAAA,UACX,CAAC;AAAA,QACH,OAAO;AACL,gBAAM,SAAS,MAAM,SAAS;AAC9B,cAAI,YAAY,SAAS,2BAA2B;AACpD,cAAI,KAAK;AACT,cAAI,cAAc,SAAS,2BAA2B;AACtD,cAAI,YAAY;AAChB,cAAI,OAAO;AAAA,QACb;AAAA,MACF,CAAC;AAGD,UAAI,SAAS,SAAS,GAAG;AACvB,cAAM,UAAU,SAAS,QAAQ,SAAS;AAC1C,YAAI,UAAU,QAAQ;AACtB,YAAI,OAAO,YAAY,MAAM,UAAU;AACvC,iBAAS,QAAQ,CAAC,SAAS,OAAO;AAChC,gBAAM,SAAS,CAAC,gBAAgB,QAAQ;AACxC,gBAAM,KAAK,QAAQ,YACf,MAAM,oBACN,MAAM,UAAU,KAAK,MAAM,UAAU,MAAM;AAC/C,cAAI,YAAY,SAAS,GAAG,CAAC,IAAI,MAAM;AACvC,cAAI,SAAS,SAAS,UAAU,GAAG,IAAI,CAAC;AACxC,cAAI,YAAY,SAAS,MAAM,gBAAgB,MAAM;AACrD,cAAI,YAAY;AAChB,cAAI,SAAS,QAAQ,OAAO,UAAU,IAAI,OAAO;AACjD,qBAAW,IAAI,YAAY,QAAQ,KAAK,EAAE,QAAQ;AAAA,QACpD,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;;;AClKO,MAAM,aAAN,cAAyB,UAAU;AAAA,IACxC;AAAA,IAEA,YAAY,WAAiC,QAA0B;AACrE,YAAM,WAAW,MAAM;AACvB,WAAK,cAAc,EAAE,WAAW,MAAM,GAAG,OAAO;AAChD,WAAK,OAAO;AAAA,IACd;AAAA,IAEA,SAAS;AACP,WAAK,QAAQ,CAAC,aAAa,KAAK,KAAK,QAAQ,CAAC;AAAA,IAChD;AAAA,IAEA,KAAK,UAAkB;AACrB,YAAM,EAAE,KAAK,OAAO,QAAQ,OAAO,QAAQ,IAAI;AAE/C,WAAK,eAAe;AACpB,WAAK,UAAU;AAEf,YAAM,KAAK,QAAQ;AACnB,YAAM,KAAK,QAAQ,OAAO,SAAS,QAAQ,MAAM,QAAQ,UAAU,IAAI;AACvE,YAAM,SAAS,KAAK;AAAA,SACjB,QAAQ,QAAQ,OAAO,QAAQ,SAAS,IAAI;AAAA,SAC5C,SAAS,QAAQ,MAAM,QAAQ,UAAU,IAAI;AAAA,MAChD;AACA,YAAM,YAAY,KAAK,YAAY,aAAa;AAChD,YAAM,SAAS,UAAU,IAAI;AAE7B,WAAK,WAAW;AAChB,WAAK,mBAAmB;AAExB,UAAI,KAAK,YAAY,OAAO;AAC1B,aAAK,UAAU,IAAI,IAAI,QAAQ,QAAQ,QAAQ;AAAA,MACjD,OAAO;AACL,aAAK,UAAU,IAAI,IAAI,QAAQ,QAAQ,QAAQ;AAAA,MACjD;AAAA,IACF;AAAA,IAEA,UAAU,IAAY,IAAY,QAAgB,QAAgB,UAAkB;AAClF,YAAM,EAAE,KAAK,MAAM,IAAI;AACvB,YAAM,MAAM,KAAK,IAAI,KAAK,KAAK,IAAI,GAAG,KAAK,YAAY,cAAc,CAAC,CAAC;AACvE,YAAM,aAAa,KAAK,KAAK;AAC7B,YAAM,aAAa,KAAK,KAAK;AAC7B,YAAM,WAAW,aAAa;AAC9B,YAAM,YAAY,aAAc,cAAc,MAAM,OAAQ;AAG5D,UAAI,UAAU;AACd,UAAI,IAAI,IAAI,IAAI,QAAQ,YAAY,QAAQ;AAC5C,UAAI,IAAI,IAAI,IAAI,QAAQ,UAAU,YAAY,IAAI;AAClD,UAAI,UAAU;AACd,YAAM,SAAS,MAAM,SAAS;AAC9B,UAAI,YAAY,SAAS,2BAA2B;AACpD,UAAI,KAAK;AAGT,UAAI,MAAM,KAAK,WAAW,GAAG;AAC3B,YAAI,UAAU;AACd,YAAI,IAAI,IAAI,IAAI,QAAQ,YAAY,SAAS;AAC7C,YAAI,IAAI,IAAI,IAAI,QAAQ,WAAW,YAAY,IAAI;AACnD,YAAI,UAAU;AAEd,YAAI,KAAK;AACT,YAAI,KAAK;AACT,cAAM,KAAK,MAAM;AACjB,cAAM,OAAO,IAAI,qBAAqB,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,MAAM;AACxF,aAAK,aAAa,GAAG,GAAG,CAAC,CAAC;AAC1B,aAAK,aAAa,GAAG,GAAG,CAAC,CAAC;AAC1B,YAAI,YAAY;AAChB,YAAI,SAAS,KAAK,QAAQ,KAAK,QAAQ,SAAS,GAAG,SAAS,CAAC;AAG7D,aAAK,cAAc,IAAI,IAAI,QAAQ,EAAE;AACrC,YAAI,QAAQ;AAAA,MACd;AAGA,YAAM,KAAK,KAAK,IAAI,IAAI,WAAW,OAAO,GAAG;AAC7C,UAAI,KAAK,GAAG;AACV,cAAM,aAAa,KAAK,MAAM,MAAM,KAAK,IAAI,GAAG,EAAE,CAAC;AACnD,YAAI,cAAc,KAAK,IAAI,GAAG,KAAK,GAAG;AAEtC,cAAM,KAAK,MAAM;AACjB,cAAM,KAAK,IAAI,qBAAqB,KAAK,IAAI,IAAI,KAAK,IAAI,EAAE;AAC5D,WAAG,aAAa,GAAG,GAAG,CAAC,CAAC;AACxB,WAAG,aAAa,GAAG,GAAG,CAAC,CAAC;AACxB,YAAI,YAAY;AAChB,YAAI,OAAO,OAAO,KAAK,MAAM,SAAS,IAAI,CAAC,MAAM,MAAM,UAAU;AACjE,YAAI,YAAY;AAChB,YAAI,eAAe;AACnB,YAAI,SAAS,aAAa,IAAI,IAAI,KAAK,CAAC;AAExC,YAAI,KAAK,YAAY,aAAa;AAChC,cAAI,YAAY,MAAM;AACtB,cAAI,OAAO,YAAY,MAAM,UAAU;AACvC,cAAI,SAAS,KAAK,YAAY,aAAa,IAAI,KAAK,SAAS,IAAI;AAAA,QACnE;AACA,YAAI,cAAc;AAAA,MACpB;AAAA,IACF;AAAA,IAEA,UAAU,IAAY,IAAY,QAAgB,QAAgB,UAAkB;AAClF,YAAM,EAAE,KAAK,MAAM,IAAI;AACvB,YAAM,EAAE,KAAK,IAAI,KAAK;AACtB,YAAM,QAAQ,KAAK,OAAO,CAAC,GAAG,MAAM,IAAI,EAAE,OAAO,CAAC;AAClD,YAAM,eAAe,KAAK,KAAK,OAAK,EAAE,SAAS;AAE/C,UAAI,eAAe,CAAC,KAAK,KAAK;AAE9B,WAAK,QAAQ,CAAC,GAAG,MAAM;AACrB,cAAM,aAAc,EAAE,QAAQ,QAAS,KAAK,KAAK,IAAI;AACrD,cAAM,WAAW,eAAe;AAChC,cAAM,SAAS,CAAC,gBAAgB,EAAE;AAGlC,YAAI,UAAU;AACd,YAAI,IAAI,IAAI,IAAI,QAAQ,cAAc,QAAQ;AAC9C,YAAI,IAAI,IAAI,IAAI,QAAQ,UAAU,cAAc,IAAI;AACpD,YAAI,UAAU;AAEd,YAAI,QAAQ;AACV,gBAAM,KAAK,EAAE,YACT,MAAM,oBACN,MAAM,UAAU,IAAI,MAAM,UAAU,MAAM;AAE9C,cAAI,KAAK;AACT,cAAI,KAAK;AACT,gBAAM,OAAO,IAAI;AAAA,YACf,KAAK,KAAK,IAAI,eAAe,aAAa,CAAC,IAAI,SAAS;AAAA,YACxD,KAAK,KAAK,IAAI,eAAe,aAAa,CAAC,IAAI,SAAS;AAAA,YACxD,KAAK,KAAK,IAAI,eAAe,aAAa,CAAC,IAAI,SAAS;AAAA,YACxD,KAAK,KAAK,IAAI,eAAe,aAAa,CAAC,IAAI,SAAS;AAAA,UAC1D;AACA,eAAK,aAAa,GAAG,GAAG,CAAC,CAAC;AAC1B,eAAK,aAAa,GAAG,GAAG,CAAC,CAAC;AAC1B,cAAI,YAAY;AAChB,cAAI,SAAS,KAAK,QAAQ,KAAK,QAAQ,SAAS,GAAG,SAAS,CAAC;AAC7D,eAAK,cAAc,IAAI,IAAI,QAAQ,EAAE;AACrC,cAAI,QAAQ;AAAA,QACd,OAAO;AACL,gBAAM,SAAS,MAAM,SAAS;AAC9B,cAAI,YAAY,SAAS,2BAA2B;AACpD,cAAI,KAAK;AAAA,QACX;AAGA,YAAI,cAAc,MAAM;AACxB,YAAI,YAAY;AAChB,YAAI,OAAO;AAGX,YAAI,WAAW,OAAO,aAAa,MAAM;AACvC,gBAAM,aAAa,KAAK,IAAI,IAAI,WAAW,OAAO,GAAG;AACrD,cAAI,cAAc;AAClB,gBAAM,WAAW,eAAe,aAAa;AAC7C,gBAAM,SAAS,SAAS;AACxB,gBAAM,KAAK,KAAK,KAAK,IAAI,QAAQ,IAAI;AACrC,gBAAM,KAAK,KAAK,KAAK,IAAI,QAAQ,IAAI;AACrC,gBAAM,UAAU,KAAK,IAAI,QAAQ,IAAI;AAErC,cAAI,YAAY,SAAS,MAAM,cAAc,MAAM;AACnD,cAAI,OAAO,YAAY,MAAM,UAAU;AACvC,cAAI,YAAY,UAAU,SAAS;AACnC,cAAI,eAAe;AAEnB,gBAAM,MAAM,KAAK,MAAO,EAAE,QAAQ,QAAS,GAAG;AAC9C,cAAI,SAAS,GAAG,EAAE,KAAK,IAAI,GAAG,KAAK,MAAM,UAAU,IAAI,KAAK,EAAE;AAC9D,cAAI,cAAc;AAAA,QACpB;AAEA,uBAAe;AAAA,MACjB,CAAC;AAGD,UAAI,KAAK,YAAY,eAAe,WAAW,KAAK;AAClD,cAAM,IAAI,KAAK,IAAI,IAAI,WAAW,OAAO,CAAC;AAC1C,YAAI,cAAc;AAElB,cAAM,KAAK,MAAM;AACjB,cAAM,KAAK,IAAI,qBAAqB,KAAK,IAAI,IAAI,KAAK,IAAI,EAAE;AAC5D,WAAG,aAAa,GAAG,GAAG,CAAC,CAAC;AACxB,WAAG,aAAa,GAAG,GAAG,CAAC,CAAC;AACxB,YAAI,YAAY;AAChB,YAAI,OAAO,OAAO,KAAK,MAAM,SAAS,IAAI,CAAC,MAAM,MAAM,UAAU;AACjE,YAAI,YAAY;AAChB,YAAI,eAAe;AACnB,YAAI,SAAS,KAAK,YAAY,aAAa,IAAI,KAAK,CAAC;AAErD,YAAI,KAAK,YAAY,aAAa;AAChC,cAAI,YAAY,MAAM;AACtB,cAAI,OAAO,YAAY,MAAM,UAAU;AACvC,cAAI,SAAS,KAAK,YAAY,aAAa,IAAI,KAAK,SAAS,IAAI;AAAA,QACnE;AACA,YAAI,cAAc;AAAA,MACpB;AAAA,IACF;AAAA,IAEA,cAAc,IAAY,IAAY,GAAW,QAAkB;AACjE,YAAM,EAAE,IAAI,IAAI;AAChB,eAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AAC1B,cAAM,QAAS,IAAI,IAAK,KAAK,KAAK,IAAI;AACtC,cAAM,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,IAAI;AACtC,cAAM,KAAK,KAAK,KAAK,IAAI,KAAK,IAAI,IAAI;AACtC,cAAM,QAAQ,KAAK,MAAO,IAAI;AAC9B,cAAM,QAAQ,OAAO,IAAI,OAAO,MAAM;AACtC,cAAM,KAAK,IAAI,qBAAqB,IAAI,IAAI,GAAG,IAAI,IAAI,KAAK;AAC5D,WAAG,aAAa,GAAG,KAAK;AACxB,WAAG,aAAa,KAAK,QAAQ,IAAI;AACjC,WAAG,aAAa,GAAG,QAAQ,IAAI;AAC/B,YAAI,2BAA2B;AAC/B,YAAI,YAAY;AAChB,YAAI,SAAS,KAAK,GAAG,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC;AACzC,YAAI,2BAA2B;AAAA,MACjC;AAAA,IACF;AAAA,EACF;;;AC3NO,MAAM,eAAN,cAA2B,UAAU;AAAA,IAC1C;AAAA,IAEA,YAAY,WAAiC,QAA4B;AACvE,YAAM,WAAW,MAAM;AACvB,WAAK,aAAa,EAAE,YAAY,OAAO,YAAY,GAAG,GAAG,OAAO;AAChE,WAAK,UAAU,EAAE,KAAK,IAAI,OAAO,IAAI,QAAQ,IAAI,MAAM,IAAI;AAC3D,WAAK,OAAO;AAAA,IACd;AAAA,IAEA,SAAS;AACP,WAAK,QAAQ,CAAC,aAAa,KAAK,KAAK,QAAQ,GAAG,GAAG;AAAA,IACrD;AAAA,IAEA,KAAK,UAAkB;AACrB,YAAM,EAAE,KAAK,OAAO,QAAQ,OAAO,QAAQ,IAAI;AAC/C,YAAM,EAAE,MAAM,YAAY,WAAW,IAAI,KAAK;AAC9C,YAAM,EAAE,MAAM,MAAM,OAAO,IAAI;AAE/B,WAAK,eAAe;AACpB,WAAK,UAAU;AAEf,YAAM,WAAW,QAAQ,MAAM;AAC/B,YAAM,cAAc,SAAS,QAAQ;AACrC,YAAM,YAAY,QAAQ;AAC1B,YAAM,aAAa,QAAQ,QAAQ;AACnC,YAAM,aAAa,aAAa;AAChC,YAAM,cAAc,cAAc;AAElC,YAAM,QAAQ,aAAa,KAAK;AAChC,YAAM,QAAQ,cAAc,KAAK;AACjC,YAAM,MAAM;AACZ,YAAM,IAAI,KAAK,IAAI,cAAc,GAAG,QAAQ,GAAG,QAAQ,CAAC;AAGxD,YAAM,OAAO,OAAO,KAAK;AACzB,YAAM,SAAS,KAAK,IAAI,GAAG,IAAI;AAC/B,YAAM,SAAS,KAAK,IAAI,GAAG,IAAI;AAC/B,YAAM,QAAQ,SAAS,UAAU;AAGjC,UAAI,YAAY,MAAM;AACtB,UAAI,OAAO,YAAY,MAAM,UAAU;AACvC,UAAI,YAAY;AAChB,WAAK,QAAQ,CAAC,KAAK,OAAO;AACxB,cAAM,IAAI,YAAY,KAAK,QAAQ,QAAQ;AAC3C,YAAI,SAAS,KAAK,GAAG,WAAW,CAAC;AAAA,MACnC,CAAC;AAGD,UAAI,YAAY;AAChB,WAAK,QAAQ,CAAC,KAAK,OAAO;AACxB,cAAM,IAAI,WAAW,KAAK,QAAQ,QAAQ,IAAI;AAC9C,YAAI,SAAS,KAAK,YAAY,IAAI,CAAC;AAAA,MACrC,CAAC;AAED,WAAK,WAAW;AAChB,WAAK,mBAAmB;AAGxB,WAAK,QAAQ,CAAC,GAAG,OAAO;AACtB,aAAK,QAAQ,CAACA,IAAG,OAAO;AACtB,gBAAM,MAAM,OAAO,EAAE,IAAI,EAAE,KAAK;AAChC,gBAAM,QAAQ,MAAM,UAAU;AAC9B,gBAAM,YAAY,OAAO;AAEzB,gBAAM,IAAI,YAAY,KAAK,QAAQ,MAAM;AACzC,gBAAM,IAAI,WAAW,KAAK,QAAQ,MAAM;AACxC,gBAAM,IAAI,QAAQ;AAClB,gBAAM,IAAI,QAAQ;AAGlB,cAAI,UAAU;AACd,cAAI,OAAO,IAAI,GAAG,CAAC;AACnB,cAAI,OAAO,IAAI,IAAI,GAAG,CAAC;AACvB,cAAI,iBAAiB,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,CAAC;AAC3C,cAAI,OAAO,IAAI,GAAG,IAAI,IAAI,CAAC;AAC3B,cAAI,iBAAiB,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,CAAC;AACnD,cAAI,OAAO,IAAI,GAAG,IAAI,CAAC;AACvB,cAAI,iBAAiB,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,CAAC;AAC3C,cAAI,OAAO,GAAG,IAAI,CAAC;AACnB,cAAI,iBAAiB,GAAG,GAAG,IAAI,GAAG,CAAC;AACnC,cAAI,UAAU;AAEd,cAAI,YAAY,MAAM;AAEpB,kBAAM,SAAS,MAAM,SAAS;AAC9B,gBAAI,YAAY,SAAS,2BAA2B;AACpD,gBAAI,KAAK;AAAA,UACX,OAAO;AAEL,gBAAI,KAAK;AACT,gBAAI,KAAK;AAGT,kBAAM,QAAQ,KAAK;AAAA,cACjB,MAAM,UAAU,SAAS;AAAA,cACzB,KAAK,MAAM,YAAY,MAAM,UAAU,SAAS,IAAI;AAAA,YACtD;AACA,kBAAM,KAAK,MAAM,UAAU,KAAK;AAEhC,kBAAM,OAAO,IAAI,qBAAqB,GAAG,GAAG,IAAI,GAAG,IAAI,CAAC;AACxD,iBAAK,aAAa,GAAG,GAAG,CAAC,IAAI,KAAK,SAAS,SAAS,CAAC;AACrD,iBAAK,aAAa,GAAG,GAAG,CAAC,IAAI,KAAK,SAAS,SAAS,CAAC;AACrD,gBAAI,YAAY;AAChB,gBAAI,SAAS,GAAG,GAAG,GAAG,CAAC;AAGvB,gBAAI,YAAY,KAAK;AACnB,oBAAM,IAAI,CAAC,MAAc;AAAE,oBAAI,IAAI,KAAK,IAAI,KAAK,QAAQ,KAAK,QAAQ,IAAI,IAAI,IAAI;AAAY,uBAAO,IAAI,KAAK,MAAM,CAAC;AAAA,cAAG;AACxH,oBAAM,KAAK,IAAI,KAAK,MAAM,EAAE,CAAC,IAAI;AACjC,oBAAM,KAAK,IAAI,KAAK,MAAM,EAAE,CAAC,IAAI;AACjC,oBAAM,QAAQ,KAAK,IAAI,GAAG,CAAC,IAAI;AAC/B,oBAAM,KAAK,IAAI,qBAAqB,IAAI,IAAI,GAAG,IAAI,IAAI,KAAK;AAC5D,iBAAG,aAAa,GAAG,GAAG,CAAC,CAAC;AACxB,iBAAG,aAAa,KAAK,GAAG,CAAC,IAAI,IAAI;AACjC,iBAAG,aAAa,GAAG,GAAG,CAAC,IAAI,IAAI;AAC/B,kBAAI,2BAA2B;AAC/B,kBAAI,YAAY;AAChB,kBAAI,SAAS,GAAG,GAAG,GAAG,CAAC;AACvB,kBAAI,2BAA2B;AAAA,YACjC;AACA,gBAAI,QAAQ;AAAA,UACd;AAGA,cAAI,cAAc,WAAW,OAAO,QAAQ,MAAM,QAAQ,IAAI;AAC5D,kBAAM,IAAI,KAAK,IAAI,IAAI,WAAW,OAAO,CAAC;AAC1C,gBAAI,cAAc;AAClB,gBAAI,YAAY,YAAY,MAAM,MAAM,KAAK,MAAM;AACnD,gBAAI,OAAO,OAAO,KAAK,IAAI,IAAI,QAAQ,GAAG,CAAC,MAAM,MAAM,UAAU;AACjE,gBAAI,YAAY;AAChB,gBAAI,eAAe;AACnB,gBAAI,SAAS,KAAK,gBAAgB,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC;AAC5D,gBAAI,cAAc;AAAA,UACpB;AAAA,QACF,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AAAA,IAEA,SAAS,WAA2B;AAClC,YAAM,QAAQ,KAAK,MAAM,YAAY,MAAM,EAAE;AAC7C,aAAO,MAAM,SAAS,EAAE,EAAE,SAAS,GAAG,GAAG;AAAA,IAC3C;AAAA,IAEA,gBAAgB,GAAmB;AACjC,UAAI,KAAK,IAAK,SAAQ,IAAI,KAAK,QAAQ,CAAC,IAAI;AAC5C,UAAI,KAAK,IAAK,SAAQ,IAAI,KAAK,QAAQ,CAAC,IAAI;AAC5C,UAAI,OAAO,UAAU,CAAC,EAAG,QAAO,IAAI;AACpC,aAAO,EAAE,QAAQ,CAAC;AAAA,IACpB;AAAA,EACF;;;ACtJO,MAAM,YAAN,cAAwB,UAAU;AAAA,IACvC;AAAA,IAEA,YAAY,WAAiC,QAAyB;AACpE,YAAM,WAAW,MAAM;AACvB,WAAK,aAAa;AAClB,WAAK,UAAU,EAAE,KAAK,IAAI,OAAO,IAAI,QAAQ,IAAI,MAAM,GAAG;AAC1D,WAAK,OAAO;AAAA,IACd;AAAA,IAEA,SAAS;AACP,WAAK,QAAQ,CAAC,aAAa,KAAK,KAAK,QAAQ,GAAG,GAAI;AAAA,IACtD;AAAA,IAEA,SAAS,QAAoB,KAAsB;AACjD,YAAM,EAAE,MAAM,aAAa,IAAI,KAAK;AACpC,UAAI,iBAAiB,QAAW;AAE9B,cAAM,WAAW,OAAO,MAAM,OAAO,MAAM,SAAS,CAAC;AACrD,eAAO,YAAY;AAAA,MACrB;AACA,UAAI,KAAK,KAAK,OAAK,EAAE,SAAS,EAAG,QAAO,CAAC,CAAC,OAAO;AACjD,aAAO;AAAA,IACT;AAAA,IAEA,cAAuB;AACrB,YAAM,EAAE,MAAM,aAAa,IAAI,KAAK;AACpC,UAAI,iBAAiB,OAAW,QAAO;AACvC,aAAO,KAAK,KAAK,OAAK,EAAE,SAAS;AAAA,IACnC;AAAA,IAEA,KAAK,UAAkB;AACrB,YAAM,EAAE,KAAK,OAAO,QAAQ,OAAO,QAAQ,IAAI;AAC/C,YAAM,EAAE,MAAM,QAAQ,IAAI,KAAK;AAE/B,WAAK,eAAe;AACpB,WAAK,UAAU;AAEf,YAAM,WAAW,KAAK,CAAC,GAAG,MAAM,UAAU;AAC1C,YAAM,UAAU,KAAK,IAAI,GAAG,KAAK,QAAQ,OAAK,EAAE,KAAK,CAAC;AAEtD,YAAM,WAAW,QAAQ,MAAM;AAC/B,YAAM,cAAc,SAAS,QAAQ,SAAS;AAC9C,YAAM,YAAY,QAAQ;AAC1B,YAAM,aAAa,QAAQ,QAAQ;AACnC,YAAM,aAAa,aAAa;AAChC,YAAM,cAAc,cAAc;AAGlC,YAAM,QAAQ,CAAC,SAAiB,YAAa,OAAO,MAAM,UAAU,KAAK,KAAM;AAC/E,YAAM,UAAU,CAAC,MAAc,YAAa,KAAK,WAAW,KAAK,KAAM;AAGvE,UAAI,cAAc,MAAM;AACxB,UAAI,YAAY;AAChB,eAAS,IAAI,GAAG,KAAK,SAAS,KAAK;AACjC,cAAM,IAAI,MAAM,CAAC;AACjB,YAAI,UAAU;AACd,YAAI,OAAO,YAAY,GAAG,CAAC;AAC3B,YAAI,OAAO,aAAa,GAAG,CAAC;AAC5B,YAAI,OAAO;AAGX,YAAI,YAAY,MAAM;AACtB,YAAI,OAAO,YAAY,MAAM,UAAU;AACvC,YAAI,YAAY;AAChB,YAAI,SAAS,MAAM,GAAG,YAAY,IAAI,IAAI,CAAC;AAAA,MAC7C;AAGA,UAAI,YAAY,MAAM;AACtB,UAAI,OAAO,YAAY,MAAM,UAAU;AACvC,UAAI,YAAY;AAChB,eAAS,IAAI,GAAG,IAAI,UAAU,KAAK;AACjC,cAAM,QAAQ,UAAU,CAAC,KAAM,IAAI,IAAK;AACxC,YAAI,SAAS,OAAO,QAAQ,CAAC,GAAG,cAAc,EAAE;AAAA,MAClD;AAEA,WAAK,WAAW;AAChB,WAAK,mBAAmB;AAExB,YAAM,WAAW,KAAK,YAAY;AAGlC,YAAM,SAAS,CAAC,GAAG,KAAK,IAAI,CAAC,GAAG,OAAO,EAAE,GAAG,GAAG,KAAK,EAAE,EAAE,CAAC,EACtD,KAAK,CAAC,GAAG,MAAM;AACd,cAAM,UAAU,KAAK,SAAS,GAAG,EAAE,GAAG,IAAI,IAAI;AAC9C,cAAM,UAAU,KAAK,SAAS,GAAG,EAAE,GAAG,IAAI,IAAI;AAC9C,eAAO,UAAU;AAAA,MACnB,CAAC;AAEH,aAAO,QAAQ,CAAC,WAAW;AACzB,cAAM,SAAS,KAAK,SAAS,QAAQ,OAAO,GAAG;AAC/C,cAAM,KAAK,OAAO,YACd,MAAM,oBACN,MAAM,UAAU,OAAO,MAAM,MAAM,UAAU,MAAM;AAGvD,cAAM,iBAAiB,KAAK,IAAI,GAAG,KAAK,MAAM,WAAW,QAAQ,CAAC;AAClE,cAAM,SAA6B,CAAC;AACpC,iBAAS,IAAI,GAAG,IAAI,gBAAgB,KAAK;AACvC,iBAAO,KAAK,CAAC,QAAQ,CAAC,GAAG,MAAM,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC;AAAA,QAClD;AAEA,YAAI,iBAAiB,UAAU;AAC7B,gBAAM,OAAQ,WAAW,WAAY;AACrC,cAAI,OAAO,KAAK,iBAAiB,GAAG;AAClC,kBAAM,QAAQ,QAAQ,iBAAiB,CAAC;AACxC,kBAAM,QAAQ,MAAM,OAAO,MAAM,iBAAiB,CAAC,CAAC;AACpD,kBAAM,QAAQ,QAAQ,cAAc;AACpC,kBAAM,QAAQ,MAAM,OAAO,MAAM,cAAc,CAAC;AAChD,mBAAO,KAAK,CAAC,SAAS,QAAQ,SAAS,MAAM,SAAS,QAAQ,SAAS,IAAI,CAAC;AAAA,UAC9E;AAAA,QACF;AAEA,YAAI,OAAO,SAAS,EAAG;AAGvB,YAAI,UAAU;AACd,YAAI,OAAO,OAAO,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,EAAE,CAAC,CAAC;AAErC,iBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,gBAAM,CAAC,IAAI,EAAE,IAAI,OAAO,IAAI,CAAC;AAC7B,gBAAM,CAAC,IAAI,EAAE,IAAI,OAAO,CAAC;AACzB,gBAAM,OAAO,KAAK,MAAM;AACxB,cAAI,cAAc,KAAK,IAAI,KAAK,IAAI,IAAI,EAAE;AAAA,QAC5C;AAEA,YAAI,YAAY,CAAC,QAAQ;AACvB,gBAAM,SAAS,MAAM,SAAS;AAC9B,cAAI,cAAc,SAAS,0BAA0B;AACrD,cAAI,YAAY;AAAA,QAClB,OAAO;AACL,gBAAM,OAAO,IAAI,qBAAqB,OAAO,CAAC,EAAE,CAAC,GAAG,GAAG,OAAO,OAAO,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC;AACtF,eAAK,aAAa,GAAG,GAAG,CAAC,CAAC;AAC1B,eAAK,aAAa,GAAG,GAAG,CAAC,CAAC;AAC1B,cAAI,cAAc;AAClB,cAAI,YAAY;AAAA,QAClB;AACA,YAAI,OAAO;AAGX,eAAO,QAAQ,CAAC,GAAG,MAAM;AACvB,cAAI,UAAU;AACd,cAAI,IAAI,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,SAAS,IAAI,GAAG,GAAG,KAAK,KAAK,CAAC;AAClD,cAAI,YAAY,CAAC,QAAQ;AACvB,kBAAM,SAAS,MAAM,SAAS;AAC9B,gBAAI,YAAY,SAAS,2BAA2B;AAAA,UACtD,OAAO;AACL,gBAAI,YAAY,GAAG,IAAI,OAAO,SAAS,IAAI,IAAI,CAAC;AAAA,UAClD;AACA,cAAI,KAAK;AAAA,QACX,CAAC;AAGD,YAAI,OAAO,SAAS,GAAG;AACrB,gBAAM,CAAC,IAAI,EAAE,IAAI,OAAO,CAAC;AACzB,cAAI,YAAa,YAAY,CAAC,SAAU,MAAM,aAAa,MAAM;AACjE,cAAI,OAAQ,YAAY,CAAC,SAAU,YAAY,MAAM,UAAU,KAAK,YAAY,MAAM,UAAU;AAChG,cAAI,YAAY;AAChB,cAAI,eAAe;AACnB,cAAI,SAAS,OAAO,OAAO,KAAK,IAAI,EAAE;AAAA,QACxC;AAGA,YAAI,WAAW,OAAO,OAAO,UAAU,UAAU;AAC/C,gBAAM,IAAI,KAAK,IAAI,IAAI,WAAW,OAAO,EAAE;AAC3C,cAAI,cAAc;AAClB,gBAAM,CAAC,IAAI,EAAE,IAAI,OAAO,OAAO,SAAS,CAAC;AACzC,cAAI,YAAY;AAEhB,cAAI,QAAQ;AACV,kBAAM,KAAK,IAAI,qBAAqB,IAAI,KAAK,GAAG,KAAK,IAAI,KAAK,CAAC;AAC/D,eAAG,aAAa,GAAG,GAAG,CAAC,CAAC;AACxB,eAAG,aAAa,GAAG,GAAG,CAAC,CAAC;AACxB,gBAAI,YAAY;AAChB,gBAAI,OAAO,YAAY,MAAM,UAAU;AAAA,UACzC,OAAO;AACL,gBAAI,YAAY,MAAM;AACtB,gBAAI,OAAO,YAAY,MAAM,UAAU;AAAA,UACzC;AACA,cAAI,SAAS,OAAO,OAAO,KAAK,IAAI,EAAE;AACtC,cAAI,cAAc;AAAA,QACpB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;;;AVhMO,WAAS,OAAO,WAAiC,QAAa;AACnE,YAAQ,OAAO,MAAM;AAAA,MACnB,KAAK;AAAO,eAAO,IAAI,SAAS,WAAW,MAAM;AAAA,MACjD,KAAK;AAAQ,eAAO,IAAI,UAAU,WAAW,MAAM;AAAA,MACnD,KAAK;AAAQ,eAAO,IAAI,UAAU,WAAW,MAAM;AAAA,MACnD,KAAK;AAAQ,eAAO,IAAI,SAAS,WAAW,MAAM;AAAA,MAClD,KAAK;AAAS,eAAO,IAAI,WAAW,WAAW,MAAM;AAAA,MACrD,KAAK;AAAS,eAAO,IAAI,WAAW,WAAW,MAAM;AAAA,MACrD,KAAK;AAAW,eAAO,IAAI,aAAa,WAAW,MAAM;AAAA,MACzD,KAAK;AAAQ,eAAO,IAAI,UAAU,WAAW,MAAM;AAAA,MACnD;AAAS,gBAAQ,MAAM,gCAAgC,OAAO,IAAI;AAAA,IACpE;AAAA,EACF;AAGO,WAAS,OAAO;AACrB,aAAS,iBAAiB,iBAAiB,EAAE,QAAQ,QAAM;AACzD,UAAI;AACF,cAAM,SAAS,KAAK,MAAM,GAAG,aAAa,eAAe,KAAK,IAAI;AAClE,eAAO,IAAmB,MAAM;AAAA,MAClC,SAAS,GAAG;AACV,gBAAQ,MAAM,kCAAkC,CAAC;AAAA,MACnD;AAAA,IACF,CAAC;AAAA,EACH;AAEA,MAAI,OAAO,aAAa,aAAa;AACnC,QAAI,SAAS,eAAe,WAAW;AACrC,eAAS,iBAAiB,oBAAoB,IAAI;AAAA,IACpD,OAAO;AACL,WAAK;AAAA,IACP;AAAA,EACF;",
  "names": ["_"]
}

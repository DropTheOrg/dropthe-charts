var DTCharts=(()=>{var pt=Object.defineProperty;var At=Object.getOwnPropertyDescriptor;var Pt=Object.getOwnPropertyNames;var Bt=Object.prototype.hasOwnProperty;var Ft=(D,e)=>{for(var t in e)pt(D,t,{get:e[t],enumerable:!0})},Lt=(D,e,t,h)=>{if(e&&typeof e=="object"||typeof e=="function")for(let x of Pt(e))!Bt.call(D,x)&&x!==t&&pt(D,x,{get:()=>e[x],enumerable:!(h=At(e,x))||h.enumerable});return D};var Rt=D=>Lt(pt({},"__esModule",{value:!0}),D);var $t={};Ft($t,{AreaChart:()=>ht,BarChart:()=>K,BubbleChart:()=>at,BumpChart:()=>tt,CandlestickChart:()=>rt,DonutChart:()=>Q,FunnelChart:()=>lt,HBarChart:()=>U,HeatmapChart:()=>Z,HistogramChart:()=>gt,LineChart:()=>_,LollipopChart:()=>st,RadarChart:()=>j,SankeyChart:()=>ct,ScatterChart:()=>et,SlopeChart:()=>dt,StackedBarChart:()=>ot,StatCard:()=>J,TreemapChart:()=>it,WaffleChart:()=>nt,create:()=>wt,getTheme:()=>mt,init:()=>St,midnight:()=>Ct,sand:()=>yt});var Ct={name:"midnight",bg:"#0a0a0f",surface:"#141419",grid:"#1a1a22",textPrimary:"#f0f0f0",textSecondary:"#555566",textSource:"#333344",gradients:[["#c4b5fd","#f9a8d4"],["#93b8fd","#c4b5fd"],["#86efac","#93b8fd"],["#fdd08a","#f9a8d4"],["#fdba74","#fdd08a"],["#5eead4","#86efac"]],highlightGradient:["#f9a8d4","#93b8fd"],lineStroke:"#c4b5fd",lineFill:["rgba(196,181,253,0.35)","rgba(196,181,253,0)"],fontFamily:"'Space Grotesk', system-ui, sans-serif",monoFamily:"'SF Mono', 'Fira Code', monospace",grain:.055,grainTarget:"elements"},yt={name:"sand",bg:"#ebe5d9",surface:"#e0dace",grid:"#d4cec2",textPrimary:"#1a1815",textSecondary:"#8a8478",textSource:"#b0a89c",gradients:[["#c4b5fd","#f9a8d4"],["#93b8fd","#c4b5fd"],["#86efac","#93b8fd"],["#fdd08a","#f9a8d4"],["#fdba74","#fdd08a"],["#5eead4","#86efac"]],highlightGradient:["#f9a8d4","#93b8fd"],lineStroke:"#c4b5fd",lineFill:["rgba(196,181,253,0.3)","rgba(196,181,253,0)"],fontFamily:"'Space Grotesk', system-ui, sans-serif",monoFamily:"'SF Mono', 'Fira Code', monospace",grain:.055,grainTarget:"elements"};function mt(D){return D==="sand"?yt:Ct}var V=class{canvas;ctx;config;theme;width;height;dpr;padding;animProgress=0;animFrame=0;bgSnapshot=null;constructor(e,t){let h=typeof e=="string"?document.querySelector(e):e;if(!h)throw new Error("DropThe Charts: container not found");this.config=t,this.theme=mt(t.theme),this.dpr=window.devicePixelRatio||1,this.width=t.width||h.clientWidth||600,this.height=t.height||400,this.padding={top:60,right:24,bottom:48,left:24},this.canvas=document.createElement("canvas"),this.canvas.width=this.width*this.dpr,this.canvas.height=this.height*this.dpr,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.style.borderRadius="12px",h.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.scale(this.dpr,this.dpr)}snapshotBackground(){this.bgSnapshot=this.ctx.getImageData(0,0,this.width*this.dpr,this.height*this.dpr)}drawGrain(){let{ctx:e,width:t,height:h,theme:x}=this,a=t*this.dpr,n=h*this.dpr,l=e.getImageData(0,0,a,n),M=l.data,A=this.bgSnapshot?.data,F=x.grainTarget==="elements"&&A,d=70;for(let b=0;b<M.length;b+=4)if(F){let T=Math.abs(M[b]-A[b]),m=Math.abs(M[b+1]-A[b+1]),B=Math.abs(M[b+2]-A[b+2]),H=T+m+B;if(H<8)continue;let w=Math.min(1,H/80),L=(Math.random()-.5)*d*w;M[b]=Math.min(255,Math.max(0,M[b]+L)),M[b+1]=Math.min(255,Math.max(0,M[b+1]+L)),M[b+2]=Math.min(255,Math.max(0,M[b+2]+L))}else{let T=(Math.random()-.5)*50;M[b]=Math.min(255,Math.max(0,M[b]+T)),M[b+1]=Math.min(255,Math.max(0,M[b+1]+T)),M[b+2]=Math.min(255,Math.max(0,M[b+2]+T))}e.putImageData(l,0,0)}drawBackground(){let{ctx:e,width:t,height:h,theme:x}=this;e.fillStyle=x.bg,e.fillRect(0,0,t,h)}drawTitle(){let{ctx:e,config:t,theme:h,padding:x}=this;t.title&&(e.fillStyle=h.textPrimary,e.font=`600 18px ${h.fontFamily}`,e.textAlign="left",e.fillText(t.title,x.left,32),t.subtitle&&(e.fillStyle=h.textSecondary,e.font=`400 13px ${h.fontFamily}`,e.fillText(t.subtitle,x.left,50)))}drawSource(){let{ctx:e,config:t,theme:h,width:x,height:a}=this,n=`Source: ${t.source||"DropThe"} | dropthe.org`;e.fillStyle=h.textSource,e.font=`400 9px ${h.monoFamily}`,e.textAlign="right",e.fillText(n,x-this.padding.right,a-8)}createGradient(e,t,h,x){let a=this.ctx.createLinearGradient(e,t,e,h);return a.addColorStop(0,x[0]),a.addColorStop(1,x[1]),a}fillLavaGradient(e,t,h,x,a,n=0){let{ctx:l}=this,M=F=>{let d=Math.sin(n*127.1+F*311.7)*43758.5453;return d-Math.floor(d)};l.fillStyle=a[0],l.fill();let A=4;for(let F=0;F<A;F++){let d=e+h*(.15+M(F*3)*.7),b=t+x*(.15+M(F*3+1)*.7),T=Math.max(h,x)*(.4+M(F*3+2)*.5),m=F%2,B=a[m],H=l.createRadialGradient(d,b,0,d,b,T);H.addColorStop(0,B),H.addColorStop(.6,B+"88"),H.addColorStop(1,B+"00"),l.save(),l.fillStyle=H,l.globalCompositeOperation="source-atop",l.fillRect(e-T,t-T,h+T*2,x+T*2),l.restore()}}animate(e,t=800){if(this.config.animate===!1){e(1),this.drawGrain();return}let h=performance.now(),x=a=>{let n=a-h,l=Math.min(n/t,1),M=1-Math.pow(1-l,3);this.animProgress=M,e(M),l<1?this.animFrame=requestAnimationFrame(x):this.drawGrain()};this.animFrame=requestAnimationFrame(x)}destroy(){this.animFrame&&cancelAnimationFrame(this.animFrame),this.canvas.remove()}toPNG(){return this.canvas.toDataURL("image/png")}};var K=class extends V{barConfig;constructor(e,t){super(e,t),this.barConfig={showValues:!0,valuesOnBar:!1,barRadius:6,...t},this.render()}render(){this.animate(e=>this.draw(e))}isActive(e,t){let{data:h,highlightTop:x,highlightLine:a}=this.barConfig;return a!==void 0?t===a-1:x!==void 0?t<x:h.some(n=>n.highlight)?!!e.highlight:!0}hasContrast(){let{data:e,highlightTop:t,highlightLine:h}=this.barConfig;return h!==void 0?!0:t!==void 0?t<e.length:e.some(x=>x.highlight)}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n,barConfig:l}=this,{data:M,valuePrefix:A="",valueSuffix:F="",showValues:d,valuesOnBar:b,barRadius:T}=l;this.drawBackground(),this.drawTitle();let m=n.top+8,B=x-n.bottom-20,H=n.left,w=h-n.right,L=w-H,$=B-m,R=M.length,f=Math.max(12,L*.08),g=(R-1)*f,i=Math.min(80,(L-g)/R),s=R*i+g,o=H+(L-s)/2,r=Math.max(...M.map(k=>k.value)),S=$/(r*1.15),P=this.hasContrast();t.strokeStyle=a.grid,t.lineWidth=1;for(let k=1;k<=3;k++){let C=B-$*k/4;t.beginPath(),t.moveTo(H,C),t.lineTo(w,C),t.stroke()}t.beginPath(),t.moveTo(H,B),t.lineTo(w,B),t.stroke(),M.forEach((k,C)=>{let c=o+C*(i+f),p=this.isActive(k,C);t.fillStyle=P&&!p?a.textSource:a.textSecondary,t.font=`400 11px ${a.monoFamily}`,t.textAlign="center",t.fillText(this.truncateLabel(k.label,i+f*.6),c+i/2,B+16)}),this.drawSource(),this.snapshotBackground(),M.forEach((k,C)=>{let c=o+C*(i+f),p=k.value*S*e,u=B-p;if(p<=0)return;let y=this.isActive(k,C),v=Math.min(T||6,p/2);if(t.beginPath(),t.moveTo(c+v,u),t.lineTo(c+i-v,u),t.quadraticCurveTo(c+i,u,c+i,u+v),t.lineTo(c+i,u+p),t.lineTo(c,u+p),t.lineTo(c,u+v),t.quadraticCurveTo(c,u,c+v,u),t.closePath(),P&&!y){let G=a.name==="midnight";t.fillStyle=G?"rgba(255,255,240,0.08)":"rgba(0,0,0,0.06)",t.fill(),t.strokeStyle=G?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.lineWidth=1,t.stroke()}else{t.save(),t.clip();let G=a.gradients[C%a.gradients.length];t.fillStyle=G[0],t.fillRect(c,u,i,p),this.drawLavaBlobs(c,u,i,p,G,C),t.restore()}if(d&&e>.3){let G=Math.min(1,(e-.3)*1.43);t.globalAlpha=G;let E=Math.min(1,(e-.3)/.7),W=1-Math.pow(1-E,2),I=A+this.formatNumber(k.value*W)+F;if(b&&p>35){let q=a.name==="midnight";t.fillStyle=P&&!y?q?"rgba(255,255,240,0.25)":"rgba(0,0,0,0.2)":q?"rgba(10,10,15,0.75)":"rgba(255,255,255,0.9)",t.font=y?`700 16px ${a.fontFamily}`:`600 14px ${a.fontFamily}`,t.textAlign="center",t.fillText(I,c+i/2,u+22)}else{if(y){let q=a.gradients[C%a.gradients.length],O=t.createLinearGradient(c,0,c+i,0);O.addColorStop(0,q[0]),O.addColorStop(1,q[1]),t.fillStyle=O,t.font=`700 18px ${a.fontFamily}`}else t.fillStyle=a.textSource,t.font=`500 14px ${a.fontFamily}`;t.textAlign="center",t.fillText(I,c+i/2,u-12)}t.globalAlpha=1}})}drawLavaBlobs(e,t,h,x,a,n){let{ctx:l}=this,M=A=>{let F=Math.sin(n*127.1+A*311.7)*43758.5453;return F-Math.floor(F)};for(let A=0;A<5;A++){let F=e+h*(.1+M(A*3)*.8),d=t+x*(.1+M(A*3+1)*.8),b=Math.max(h,x)*(.35+M(A*3+2)*.55),T=a[A%a.length],m=l.createRadialGradient(F,d,0,F,d,b);m.addColorStop(0,T),m.addColorStop(.5,T+"99"),m.addColorStop(1,T+"00"),l.globalCompositeOperation="source-atop",l.fillStyle=m,l.fillRect(e,t,h,x),l.globalCompositeOperation="source-over"}}formatNumber(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString()}truncateLabel(e,t){let{ctx:h,theme:x}=this;if(h.font=`400 11px ${x.monoFamily}`,h.measureText(e).width<=t)return e;let a=e.split(" ");if(a.length>1&&h.measureText(a[0]).width<=t)return a[0];let n=e;for(;n.length>3&&h.measureText(n+"..").width>t;)n=n.slice(0,-1);return n+".."}};var _=class extends V{lineConfig;constructor(e,t){super(e,t),this.lineConfig={showDots:!0,showArea:!0,...t},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n,lineConfig:l}=this,{data:M,showDots:A,showArea:F,yPrefix:d="",ySuffix:b=""}=l;this.drawBackground(),this.drawTitle();let T=n.top+8,m=x-n.bottom-20,B=n.left+50,H=h-n.right,w=H-B,L=m-T,$=M.flatMap(C=>C.data.map(c=>c.y)),R=Math.min(...$)*.95,g=Math.max(...$)*1.05-R||1,i=M[0]?.data.map(C=>Number(C.x))||[],s=Math.min(...i),r=Math.max(...i)-s||1,S=5;t.strokeStyle=a.grid,t.lineWidth=1;for(let C=0;C<=S;C++){let c=C/S,p=m-c*L,u=R+c*g;t.beginPath(),t.moveTo(B,p),t.lineTo(H,p),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(d+this.formatVal(u)+b,B-8,p+4)}let P=Math.min(i.length,8),k=Math.max(1,Math.floor(i.length/P));t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="center";for(let C=0;C<i.length;C+=k){let c=B+(i[C]-s)/r*w;t.fillText(String(i[C]),c,m+16)}if(t.strokeStyle=a.textSecondary+"40",t.lineWidth=1,t.beginPath(),t.moveTo(B,m),t.lineTo(H,m),t.stroke(),M.length>1){let C=B,c=m+32;M.forEach((p,u)=>{let y=p.color||a.gradients[u%a.gradients.length][0];t.fillStyle=y,t.fillRect(C,c-4,12,3),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="left",t.fillText(p.label,C+16,c),C+=t.measureText(p.label).width+32})}this.drawSource(),this.snapshotBackground(),M.forEach((C,c)=>{let p=C.color||a.gradients[c%a.gradients.length][0],u=a.gradients[c%a.gradients.length],y=[];C.data.forEach(E=>{let W=B+(Number(E.x)-s)/r*w,I=m-(E.y-R)/g*L;y.push([W,I])});let v=Math.max(1,Math.floor(y.length*e)),G=y.slice(0,v);if(F&&G.length>1){t.save(),t.beginPath(),t.moveTo(G[0][0],m),G.forEach(([z,X])=>t.lineTo(z,X)),t.lineTo(G[G.length-1][0],m),t.closePath(),t.clip();let E=t.createLinearGradient(0,T,0,m);E.addColorStop(0,u[0]+"50"),E.addColorStop(1,u[0]+"05"),t.fillStyle=E,t.fillRect(B,T,w,L);let W=G[0][0],q=G[G.length-1][0]-W,O=6;for(let z=0;z<O;z++){let X=Math.sin(c*127.1+z*311.7)*43758.5453,ut=X-Math.floor(X),Y=Math.sin(c*127.1+(z*3+1)*311.7)*43758.5453,xt=Y-Math.floor(Y),N=Math.sin(c*127.1+(z*3+2)*311.7)*43758.5453,vt=N-Math.floor(N),Mt=W+q*(.05+ut*.9),Tt=T+L*(.2+xt*.6),kt=L*(.3+vt*.4),bt=u[z%u.length],ft=t.createRadialGradient(Mt,Tt,0,Mt,Tt,kt);ft.addColorStop(0,bt+"60"),ft.addColorStop(.5,bt+"30"),ft.addColorStop(1,bt+"00"),t.fillStyle=ft,t.fillRect(B,T,w,L)}t.restore()}if(G.length>1){t.beginPath(),t.moveTo(G[0][0],G[0][1]);for(let E=1;E<G.length;E++)t.lineTo(G[E][0],G[E][1]);t.strokeStyle=p,t.lineWidth=2.5,t.lineJoin="round",t.lineCap="round",t.stroke()}if(A&&e>.8){let E=(e-.8)*5;t.globalAlpha=E,G.forEach(([W,I])=>{t.beginPath(),t.arc(W,I,3,0,Math.PI*2),t.fillStyle=p,t.fill(),t.strokeStyle=a.bg,t.lineWidth=1.5,t.stroke()}),t.globalAlpha=1}})}formatVal(e){return Math.abs(e)>=1e12?(e/1e12).toFixed(1)+"T":Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":e.toFixed(0)}};var U=class extends V{hbarConfig;constructor(e,t){let h=t.barHeight||36,x=Math.max(300,t.data.length*(h+8)+100);t.height=t.height||x,super(e,t),this.hbarConfig={barHeight:h,valuesOnBar:!1,showRank:!1,...t},this.render()}render(){this.animate(e=>this.draw(e))}isActive(e,t){let{data:h,highlightTop:x,highlightLine:a,showRank:n}=this.hbarConfig;return a!==void 0?t===a-1:x!==void 0?t<x:n?t<3:h.some(l=>l.highlight)?!!e.highlight:!0}hasContrast(){let{data:e,highlightTop:t,highlightLine:h,showRank:x}=this.hbarConfig;return h!==void 0?!0:t!==void 0?t<e.length:x?e.length>3:e.some(a=>a.highlight)}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n,hbarConfig:l}=this,{data:M,valuePrefix:A="",valueSuffix:F="",barHeight:d=36,valuesOnBar:b,showRank:T}=l;this.drawBackground(),this.drawTitle();let m=n.top+8,B=T?36:0,w=n.left+B+120,$=h-n.right-70-w,R=8,f=Math.max(...M.map(i=>i.value)),g=this.hasContrast();M.forEach((i,s)=>{let o=m+s*(d+R),r=this.isActive(i,s);if(T){let S=n.left,P=o+d/2;if(r){let k=a.gradients[s%a.gradients.length],C=26,c=18,p=t.createLinearGradient(S,P-c/2,S+C,P-c/2);p.addColorStop(0,k[0]),p.addColorStop(1,k[1]),t.beginPath(),t.roundRect(S,P-c/2,C,c,9),t.fillStyle=p,t.fill(),t.fillStyle=a.name==="midnight"?"rgba(10,10,15,0.8)":"rgba(255,255,255,0.9)",t.font=`700 10px ${a.fontFamily}`,t.textAlign="center",t.fillText("#"+(s+1),S+C/2,P+3.5)}else t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`,t.textAlign="center",t.fillText("#"+(s+1),S+13,P+4)}t.fillStyle=g&&!r?a.textSource:a.textSecondary,t.font=r?`500 12px ${a.fontFamily}`:`400 12px ${a.fontFamily}`,t.textAlign="right",t.fillText(i.label,w-12,o+d/2+4)}),this.drawSource(),this.snapshotBackground(),M.forEach((i,s)=>{let o=m+s*(d+R),r=i.value/f*$*e;if(r<=0)return;let S=this.isActive(i,s),P=a.gradients[s%a.gradients.length],k=Math.min(4,r/2);if(t.beginPath(),t.moveTo(w,o),t.lineTo(w+r-k,o),t.quadraticCurveTo(w+r,o,w+r,o+k),t.lineTo(w+r,o+d-k),t.quadraticCurveTo(w+r,o+d,w+r-k,o+d),t.lineTo(w,o+d),t.closePath(),g&&!S){let C=a.name==="midnight";t.fillStyle=C?"rgba(255,255,240,0.08)":"rgba(0,0,0,0.06)",t.fill(),t.strokeStyle=C?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.lineWidth=1,t.stroke()}else t.save(),t.clip(),t.fillStyle=P[0],t.fillRect(w,o,r,d),this.drawLavaBlobs(w,o,r,d,P,s),t.restore();if(e>.3){let C=Math.min(1,(e-.3)*1.43);t.globalAlpha=C;let c=Math.min(1,(e-.3)/.7),p=1-Math.pow(1-c,2),u=A+this.formatNumber(i.value*p)+F;if(b&&r>70){let y=a.name==="midnight";t.fillStyle=g&&!S?y?"rgba(255,255,240,0.25)":"rgba(0,0,0,0.2)":y?"rgba(10,10,15,0.75)":"rgba(255,255,255,0.9)",t.font=S?`700 14px ${a.fontFamily}`:`600 12px ${a.fontFamily}`,t.textAlign="right",t.fillText(u,w+r-10,o+d/2+5)}else{if(S){let y=t.createLinearGradient(w+r+8,0,w+r+70,0);y.addColorStop(0,P[0]),y.addColorStop(1,P[1]),t.fillStyle=y,t.font=`700 14px ${a.fontFamily}`}else t.fillStyle=a.textSource,t.font=`400 12px ${a.fontFamily}`;t.textAlign="left",t.fillText(u,w+r+8,o+d/2+5)}t.globalAlpha=1}})}drawLavaBlobs(e,t,h,x,a,n){let{ctx:l}=this,M=A=>{let F=Math.sin(n*127.1+A*311.7)*43758.5453;return F-Math.floor(F)};for(let A=0;A<6;A++){let F=e+h*(.05+M(A*3)*.9),d=t+x*(.1+M(A*3+1)*.8),b=Math.max(h*.3,x)*(.4+M(A*3+2)*.5),T=a[A%a.length],m=l.createRadialGradient(F,d,0,F,d,b);m.addColorStop(0,T),m.addColorStop(.5,T+"99"),m.addColorStop(1,T+"00"),l.globalCompositeOperation="source-atop",l.fillStyle=m,l.fillRect(e,t,h,x),l.globalCompositeOperation="source-over"}}formatNumber(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString()}};var J=class extends V{statConfig;constructor(e,t){t.height=t.height||200,super(e,t),this.statConfig=t,this.render()}render(){this.animate(e=>this.draw(e),600)}draw(e){let{ctx:t,width:h,height:x,theme:a,statConfig:n}=this,{value:l,label:M,delta:A,deltaPositive:F,prefix:d="",suffix:b=""}=n.data;this.drawBackground();let T=typeof l=="number"?l:parseFloat(String(l)),m;if(!isNaN(T)&&typeof l=="number"){let f=T*e;m=d+this.formatBigNumber(f)+b}else m=d+String(l)+b;if(this.config.title&&(t.fillStyle=a.textSecondary,t.font=`400 11px ${a.monoFamily}`,t.textAlign="left",t.fillText(this.config.title.toUpperCase(),this.padding.left,24)),t.fillStyle=a.textSecondary,t.font=`400 14px ${a.fontFamily}`,t.textAlign="center",t.fillText(M,h/2,x/2+25),A&&e>.7){let f=(e-.7)*3.3;t.globalAlpha=Math.min(1,f);let i=(F!==void 0?F:A.startsWith("+"))?"#10b981":"#ef4444";t.fillStyle=i+"22";let s=t.measureText(A).width+16,o=h/2-s/2,r=x/2+38;t.beginPath(),t.roundRect(o,r,s,22,11),t.fill(),t.fillStyle=i,t.font=`600 11px ${a.monoFamily}`,t.textAlign="center",t.fillText(A,h/2,r+15),t.globalAlpha=1}this.drawSource(),this.snapshotBackground(),t.font=`700 48px ${a.fontFamily}`,t.textAlign="center";let B=t.measureText(m),H=h/2,w=x/2-5,L=a.highlightGradient,$=B.width,R=t.createLinearGradient(H-$/2,0,H+$/2,0);R.addColorStop(0,L[0]),R.addColorStop(1,L[1]),t.fillStyle=R,t.fillText(m,H,w)}formatBigNumber(e){return e>=1e12?(e/1e12).toFixed(1)+"T":e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,","):Math.round(e).toLocaleString()}};var j=class extends V{radarConfig;constructor(e,t){super(e,t),this.radarConfig=t,this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l}=this.radarConfig,{axes:M,datasets:A,maxValue:F}=l,d=M.length;if(d<3)return;this.drawBackground(),this.drawTitle();let b=h/2,T=n.top+(x-n.top-n.bottom)/2+8,m=Math.min((h-n.left-n.right)/2-40,(x-n.top-n.bottom)/2-30),B=F||Math.max(...A.flatMap(R=>R.values))*1.1,H=Math.PI*2/d,w=-Math.PI/2,L=5;t.strokeStyle=a.grid,t.lineWidth=1;for(let R=1;R<=L;R++){let f=m*R/L;t.beginPath();for(let g=0;g<=d;g++){let i=w+g*H,s=b+Math.cos(i)*f,o=T+Math.sin(i)*f;g===0?t.moveTo(s,o):t.lineTo(s,o)}t.stroke()}for(let R=0;R<d;R++){let f=w+R*H,g=b+Math.cos(f)*m,i=T+Math.sin(f)*m;t.beginPath(),t.moveTo(b,T),t.lineTo(g,i),t.stroke()}t.fillStyle=a.textSecondary,t.font=`500 11px ${a.monoFamily}`;for(let R=0;R<d;R++){let f=w+R*H,g=m+18,i=b+Math.cos(f)*g,s=T+Math.sin(f)*g;Math.abs(Math.cos(f))<.1?t.textAlign="center":Math.cos(f)>0?t.textAlign="left":t.textAlign="right",t.textBaseline=Math.abs(Math.sin(f))<.1?"middle":Math.sin(f)<0?"bottom":"top",t.fillText(M[R],i,s)}this.drawSource(),this.snapshotBackground();let $=A.some(R=>R.highlight);if(A.forEach((R,f)=>{let g=!$||R.highlight,i=[];for(let s=0;s<d;s++){let o=w+s*H,S=(R.values[s]||0)/B*m*e;i.push([b+Math.cos(o)*S,T+Math.sin(o)*S])}if(t.beginPath(),i.forEach((s,o)=>{o===0?t.moveTo(s[0],s[1]):t.lineTo(s[0],s[1])}),t.closePath(),g){let s=R.highlight?a.highlightGradient:a.gradients[f%a.gradients.length],o=t.createLinearGradient(b-m,T-m,b+m,T+m);o.addColorStop(0,s[0]+"55"),o.addColorStop(1,s[1]+"55"),t.fillStyle=o,t.fill();let r=t.createLinearGradient(b-m,T-m,b+m,T+m);r.addColorStop(0,s[0]),r.addColorStop(1,s[1]),t.strokeStyle=r,t.lineWidth=2.5,t.stroke(),i.forEach(S=>{t.beginPath(),t.arc(S[0],S[1],4,0,Math.PI*2),t.fillStyle=s[0],t.fill()})}else{let s=a.name==="midnight";t.fillStyle=s?"rgba(255,255,240,0.04)":"rgba(0,0,0,0.03)",t.fill(),t.strokeStyle=s?"rgba(255,255,240,0.15)":"rgba(0,0,0,0.1)",t.lineWidth=1.5,t.stroke()}}),A.length>1){let R=x-n.bottom+4,f=n.left;t.font=`500 11px ${a.fontFamily}`,A.forEach((g,i)=>{let s=!$||g.highlight,o=g.highlight?a.highlightGradient:a.gradients[i%a.gradients.length];t.fillStyle=s?o[0]:a.textSource,t.fillRect(f,R-4,12,3),t.fillStyle=s?a.textSecondary:a.textSource,t.textAlign="left",t.fillText(g.label,f+16,R),f+=t.measureText(g.label).width+36})}}};var Q=class extends V{donutConfig;constructor(e,t){super(e,t),this.donutConfig={ringWidth:.35,...t},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this;this.drawBackground(),this.drawTitle();let l=h/2,M=n.top+(x-n.top-n.bottom)/2+8,A=Math.min((h-n.left-n.right)/2-20,(x-n.top-n.bottom)/2-20),F=this.donutConfig.ringWidth||.35,d=A*(1-F);this.drawSource(),this.snapshotBackground(),this.donutConfig.gauge?this.drawGauge(l,M,A,d,e):this.drawDonut(l,M,A,d,e)}drawGauge(e,t,h,x,a){let{ctx:n,theme:l}=this,M=Math.min(100,Math.max(0,this.donutConfig.gaugeValue||0)),A=Math.PI*1.5,F=Math.PI*.75,d=F+A,b=F+A*(M/100)*a;n.beginPath(),n.arc(e,t,h,F,d),n.arc(e,t,x,d,F,!0),n.closePath();let T=l.name==="midnight";if(n.fillStyle=T?"rgba(255,255,240,0.05)":"rgba(0,0,0,0.04)",n.fill(),M>0&&a>0){n.beginPath(),n.arc(e,t,h,F,b),n.arc(e,t,x,b,F,!0),n.closePath(),n.save(),n.clip();let B=this.donutConfig.gaugeColor?.[0]||l.highlightGradient,H=n.createLinearGradient(e-h,t-h,e+h,t+h);H.addColorStop(0,B[0]),H.addColorStop(1,B[1]),n.fillStyle=H,n.fillRect(e-h,t-h,h*2,h*2),this.drawLavaInArc(e,t,h,B),n.restore()}let m=Math.min(1,(a-.2)/.6);if(m>0){let B=Math.round(M*Math.min(1,m));n.globalAlpha=Math.min(1,m*1.5);let H=this.donutConfig.gaugeColor?.[0]||l.highlightGradient,w=n.createLinearGradient(e-30,t,e+30,t);w.addColorStop(0,gc[0]),w.addColorStop(1,gc[1]),n.fillStyle=w,n.font=`700 ${Math.round(h*.45)}px ${l.fontFamily}`,n.textAlign="center",n.textBaseline="middle",n.fillText(B+"",e,t-6),this.donutConfig.centerLabel&&(n.fillStyle=l.textSecondary,n.font=`400 13px ${l.fontFamily}`,n.fillText(this.donutConfig.centerLabel,e,t+h*.25)),n.globalAlpha=1}}drawDonut(e,t,h,x,a){let{ctx:n,theme:l}=this,{data:M}=this.donutConfig,A=M.reduce((b,T)=>b+T.value,0),F=M.some(b=>b.highlight),d=-Math.PI/2;if(M.forEach((b,T)=>{let m=b.value/A*Math.PI*2*a,B=d+m,H=!F||b.highlight;if(n.beginPath(),n.arc(e,t,h,d,B),n.arc(e,t,x,B,d,!0),n.closePath(),H){let w=b.highlight?l.highlightGradient:l.gradients[T%l.gradients.length];n.save(),n.clip();let L=n.createLinearGradient(e+Math.cos(d+m/2)*h*.5,t+Math.sin(d+m/2)*h*.5,e-Math.cos(d+m/2)*h*.5,t-Math.sin(d+m/2)*h*.5);L.addColorStop(0,w[0]),L.addColorStop(1,w[1]),n.fillStyle=L,n.fillRect(e-h,t-h,h*2,h*2),this.drawLavaInArc(e,t,h,w),n.restore()}else{let w=l.name==="midnight";n.fillStyle=w?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",n.fill()}if(n.strokeStyle=l.bg,n.lineWidth=2,n.stroke(),a>.7&&m>.15){let w=Math.min(1,(a-.7)/.3);n.globalAlpha=w;let L=d+m/2,$=h+14,R=e+Math.cos(L)*$,f=t+Math.sin(L)*$,g=Math.cos(L)>0;n.fillStyle=H?l.textPrimary:l.textSource,n.font=`500 11px ${l.monoFamily}`,n.textAlign=g?"left":"right",n.textBaseline="middle";let i=Math.round(b.value/A*100);n.fillText(`${b.label} ${i}%`,R+(g?4:-4),f),n.globalAlpha=1}d=B}),this.donutConfig.centerValue&&a>.5){let b=Math.min(1,(a-.5)*2);n.globalAlpha=b;let T=this.donutConfig.gaugeColor?.[0]||l.highlightGradient,m=n.createLinearGradient(e-30,t,e+30,t);m.addColorStop(0,gc[0]),m.addColorStop(1,gc[1]),n.fillStyle=m,n.font=`700 ${Math.round(x*.55)}px ${l.fontFamily}`,n.textAlign="center",n.textBaseline="middle",n.fillText(this.donutConfig.centerValue,e,t-4),this.donutConfig.centerLabel&&(n.fillStyle=l.textSecondary,n.font=`400 12px ${l.fontFamily}`,n.fillText(this.donutConfig.centerLabel,e,t+x*.35)),n.globalAlpha=1}}drawLavaInArc(e,t,h,x){let{ctx:a}=this;for(let n=0;n<4;n++){let l=n/4*Math.PI*2+.7,M=e+Math.cos(l)*h*.5,A=t+Math.sin(l)*h*.5,F=h*(.4+n*.15),d=x[n%x.length],b=a.createRadialGradient(M,A,0,M,A,F);b.addColorStop(0,d),b.addColorStop(.5,d+"88"),b.addColorStop(1,d+"00"),a.globalCompositeOperation="source-atop",a.fillStyle=b,a.fillRect(e-h,t-h,h*2,h*2),a.globalCompositeOperation="source-over"}}};var Z=class extends V{heatConfig;constructor(e,t){super(e,t),this.heatConfig={showValues:!1,cellRadius:4,...t},this.padding={top:60,right:24,bottom:24,left:100},this.render()}render(){this.animate(e=>this.draw(e),600)}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,showValues:M,cellRadius:A}=this.heatConfig,{rows:F,cols:d,values:b}=l;this.drawBackground(),this.drawTitle();let T=n.top+24,m=x-n.bottom,B=n.left,w=h-n.right-B,L=m-T,$=w/d.length,R=L/F.length,f=2,g=Math.min(A||4,$/4,R/4),i=b.flat(),s=Math.min(...i),r=Math.max(...i)-s||1;t.fillStyle=a.textSecondary,t.font=`500 10px ${a.monoFamily}`,t.textAlign="center",d.forEach((S,P)=>{let k=B+P*$+$/2;t.fillText(S,k,T-8)}),t.textAlign="right",F.forEach((S,P)=>{let k=T+P*R+R/2+4;t.fillText(S,B-10,k)}),this.drawSource(),this.snapshotBackground(),F.forEach((S,P)=>{d.forEach((k,C)=>{let c=b[P]?.[C]??0,u=(c-s)/r*e,y=B+C*$+f/2,v=T+P*R+f/2,G=$-f,E=R-f;if(t.beginPath(),t.moveTo(y+g,v),t.lineTo(y+G-g,v),t.quadraticCurveTo(y+G,v,y+G,v+g),t.lineTo(y+G,v+E-g),t.quadraticCurveTo(y+G,v+E,y+G-g,v+E),t.lineTo(y+g,v+E),t.quadraticCurveTo(y,v+E,y,v+E-g),t.lineTo(y,v+g),t.quadraticCurveTo(y,v,y+g,v),t.closePath(),u<.05){let W=a.name==="midnight";t.fillStyle=W?"rgba(255,255,240,0.03)":"rgba(0,0,0,0.02)",t.fill()}else{t.save(),t.clip();let W=Math.min(a.gradients.length-1,Math.floor(u*a.gradients.length*.99)),I=a.gradients[W],q=t.createLinearGradient(y,v,y+G,v+E);if(q.addColorStop(0,I[0]+this.alphaHex(u)),q.addColorStop(1,I[1]+this.alphaHex(u)),t.fillStyle=q,t.fillRect(y,v,G,E),u>.6){let O=xt=>{let N=Math.sin(P*127.1+C*311.7+xt*43.7)*43758.5453;return N-Math.floor(N)},z=y+G*(.2+O(0)*.6),X=v+E*(.2+O(1)*.6),ut=Math.max(G,E)*.6,Y=t.createRadialGradient(z,X,0,z,X,ut);Y.addColorStop(0,I[1]),Y.addColorStop(.5,I[1]+"66"),Y.addColorStop(1,I[1]+"00"),t.globalCompositeOperation="source-atop",t.fillStyle=Y,t.fillRect(y,v,G,E),t.globalCompositeOperation="source-over"}t.restore()}if(M&&e>.5&&$>30&&R>20){let W=Math.min(1,(e-.5)*2);t.globalAlpha=W,t.fillStyle=u>.5?a.bg:a.textSecondary,t.font=`500 ${Math.min(11,R*.4)}px ${a.monoFamily}`,t.textAlign="center",t.textBaseline="middle",t.fillText(this.formatCellValue(c),y+G/2,v+E/2),t.globalAlpha=1}})})}alphaHex(e){return Math.round(e*220+35).toString(16).padStart(2,"0")}formatCellValue(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":Number.isInteger(e)?e+"":e.toFixed(1)}};var tt=class extends V{bumpConfig;constructor(e,t){super(e,t),this.bumpConfig=t,this.padding={top:60,right:90,bottom:48,left:90},this.render()}render(){this.animate(e=>this.draw(e),1e3)}isActive(e,t){let{data:h,highlightTop:x}=this.bumpConfig;return x!==void 0?e.ranks[e.ranks.length-1]<=x:h.some(a=>a.highlight)?!!e.highlight:!0}hasContrast(){let{data:e,highlightTop:t}=this.bumpConfig;return t!==void 0?!0:e.some(h=>h.highlight)}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,periods:M}=this.bumpConfig;this.drawBackground(),this.drawTitle();let A=l[0]?.ranks.length||0,F=Math.max(...l.flatMap(f=>f.ranks)),d=n.top+8,b=x-n.bottom-20,T=n.left,m=h-n.right,B=m-T,H=b-d,w=f=>d+(f-1)/(F-1||1)*H,L=f=>T+f/(A-1||1)*B;t.strokeStyle=a.grid,t.lineWidth=1;for(let f=1;f<=F;f++){let g=w(f);t.beginPath(),t.moveTo(T-8,g),t.lineTo(m+8,g),t.stroke(),t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText("#"+f,T-14,g+4)}t.fillStyle=a.textSecondary,t.font=`500 11px ${a.monoFamily}`,t.textAlign="center";for(let f=0;f<A;f++){let g=M?.[f]||f+1+"";t.fillText(g,L(f),b+20)}this.drawSource(),this.snapshotBackground();let $=this.hasContrast();[...l.map((f,g)=>({...f,idx:g}))].sort((f,g)=>{let i=this.isActive(f,f.idx)?1:0,s=this.isActive(g,g.idx)?1:0;return i-s}).forEach(f=>{let g=this.isActive(f,f.idx),i=f.highlight?a.highlightGradient:a.gradients[f.idx%a.gradients.length],s=Math.max(1,Math.floor(A*e)),o=[];for(let r=0;r<s;r++)o.push([L(r),w(f.ranks[r])]);if(s<A){let r=A*e-s;if(r>0&&s>0){let S=L(s-1),P=w(f.ranks[s-1]),k=L(s),C=w(f.ranks[s]);o.push([S+(k-S)*r,P+(C-P)*r])}}if(!(o.length<2)){t.beginPath(),t.moveTo(o[0][0],o[0][1]);for(let r=1;r<o.length;r++){let[S,P]=o[r-1],[k,C]=o[r],c=(S+k)/2;t.bezierCurveTo(c,P,c,C,k,C)}if($&&!g){let r=a.name==="midnight";t.strokeStyle=r?"rgba(255,255,240,0.1)":"rgba(0,0,0,0.08)",t.lineWidth=2}else{let r=t.createLinearGradient(o[0][0],0,o[o.length-1][0],0);r.addColorStop(0,i[0]),r.addColorStop(1,i[1]),t.strokeStyle=r,t.lineWidth=3}if(t.stroke(),o.forEach((r,S)=>{if(t.beginPath(),t.arc(r[0],r[1],g?5:3,0,Math.PI*2),$&&!g){let P=a.name==="midnight";t.fillStyle=P?"rgba(255,255,240,0.12)":"rgba(0,0,0,0.08)"}else t.fillStyle=i[S<o.length/2?0:1];t.fill()}),o.length>0){let[r,S]=o[0];t.fillStyle=$&&!g?a.textSource:a.textSecondary,t.font=$&&!g?`400 10px ${a.monoFamily}`:`500 11px ${a.monoFamily}`,t.textAlign="right",t.textBaseline="middle",t.fillText(f.label,r-12,S)}if(e>.9&&o.length>=A){let r=Math.min(1,(e-.9)*10);t.globalAlpha=r;let[S,P]=o[o.length-1];if(t.textAlign="left",g){let k=t.createLinearGradient(S,P-8,S+60,P+8);k.addColorStop(0,i[0]),k.addColorStop(1,i[1]),t.fillStyle=k,t.font=`600 12px ${a.fontFamily}`}else t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`;t.fillText(f.label,S+12,P),t.globalAlpha=1}}})}};var et=class extends V{scatterConfig;constructor(e,t){super(e,t),this.scatterConfig={showLabels:!0,...t},this.padding={top:60,right:24,bottom:56,left:60},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,xLabel:M,yLabel:A,xPrefix:F="",xSuffix:d="",yPrefix:b="",ySuffix:T="",showLabels:m}=this.scatterConfig;this.drawBackground(),this.drawTitle();let B=n.top+8,H=x-n.bottom,w=n.left,L=h-n.right,$=L-w,R=H-B,f=l.map(k=>k.x),g=l.map(k=>k.y),i=Math.min(...f)*.95,s=Math.max(...f)*1.05,o=Math.min(...g)*.95,r=Math.max(...g)*1.05,S=s-i||1,P=r-o||1;t.strokeStyle=a.grid,t.lineWidth=1;for(let k=0;k<=4;k++){let C=H-R*k/4;t.beginPath(),t.moveTo(w,C),t.lineTo(L,C),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(b+this.fmt(o+P*k/4)+T,w-8,C+4)}for(let k=0;k<=4;k++){let C=w+$*k/4;t.textAlign="center",t.fillText(F+this.fmt(i+S*k/4)+d,C,H+16)}M&&(t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`,t.textAlign="center",t.fillText(M,w+$/2,H+32)),A&&(t.save(),t.translate(14,B+R/2),t.rotate(-Math.PI/2),t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`,t.textAlign="center",t.fillText(A,0,0),t.restore()),this.drawSource(),this.snapshotBackground(),l.forEach((k,C)=>{let c=w+(k.x-i)/S*$,p=H-(k.y-o)/P*R,u=(k.size||8)*e,y=k.highlight?a.highlightGradient:a.gradients[C%a.gradients.length];t.beginPath(),t.arc(c,p,u,0,Math.PI*2);let v=t.createRadialGradient(c,p,0,c,p,u);v.addColorStop(0,y[0]),v.addColorStop(1,y[1]),t.fillStyle=v,t.globalAlpha=k.highlight?1:.85,t.fill(),t.globalAlpha=1,m&&k.label&&e>.6&&(t.globalAlpha=Math.min(1,(e-.6)*2.5),t.fillStyle=a.textPrimary,t.font=`500 10px ${a.fontFamily}`,t.textAlign="center",t.fillText(k.label,c,p-u-6),t.globalAlpha=1)})}fmt(e){return Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":e<10?e.toFixed(1):Math.round(e)+""}};var at=class extends V{bubbleConfig;constructor(e,t){super(e,t),this.bubbleConfig={maxRadius:40,...t},this.padding={top:60,right:30,bottom:56,left:60},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,xLabel:M,yLabel:A,xPrefix:F="",xSuffix:d="",yPrefix:b="",ySuffix:T="",maxRadius:m}=this.bubbleConfig;this.drawBackground(),this.drawTitle();let B=n.top+8,H=x-n.bottom,w=n.left,L=h-n.right,$=L-w,R=H-B,f=l.map(p=>p.x),g=l.map(p=>p.y),i=l.map(p=>p.z),s=Math.min(...f)*.9,o=Math.max(...f)*1.1,r=Math.min(...g)*.9,S=Math.max(...g)*1.1,P=Math.max(...i),k=o-s||1,C=S-r||1;t.strokeStyle=a.grid,t.lineWidth=1;for(let p=0;p<=4;p++){let u=H-R*p/4;t.beginPath(),t.moveTo(w,u),t.lineTo(L,u),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(b+this.fmt(r+C*p/4)+T,w-8,u+4)}for(let p=0;p<=4;p++){let u=w+$*p/4;t.fillStyle=a.textSecondary,t.textAlign="center",t.fillText(F+this.fmt(s+k*p/4)+d,u,H+16)}M&&(t.fillStyle=a.textSource,t.textAlign="center",t.fillText(M,w+$/2,H+32)),A&&(t.save(),t.translate(14,B+R/2),t.rotate(-Math.PI/2),t.fillStyle=a.textSource,t.textAlign="center",t.fillText(A,0,0),t.restore()),this.drawSource(),this.snapshotBackground(),l.map((p,u)=>({...p,idx:u})).sort((p,u)=>u.z-p.z).forEach(p=>{let u=w+(p.x-s)/k*$,y=H-(p.y-r)/C*R,v=Math.max(6,p.z/P*(m||40))*e,G=p.highlight?a.highlightGradient:a.gradients[p.idx%a.gradients.length];t.beginPath(),t.arc(u,y,v,0,Math.PI*2),t.save(),t.clip();let E=t.createRadialGradient(u-v*.3,y-v*.3,0,u,y,v);E.addColorStop(0,G[0]),E.addColorStop(1,G[1]),t.fillStyle=E,t.globalAlpha=p.highlight?.9:.75,t.fillRect(u-v,y-v,v*2,v*2);let W=t.createRadialGradient(u+v*.2,y+v*.2,0,u,y,v*.8);W.addColorStop(0,G[1]),W.addColorStop(.5,G[1]+"66"),W.addColorStop(1,G[1]+"00"),t.globalCompositeOperation="source-atop",t.fillStyle=W,t.fillRect(u-v,y-v,v*2,v*2),t.globalCompositeOperation="source-over",t.restore(),t.globalAlpha=1,p.label&&e>.5&&(t.globalAlpha=Math.min(1,(e-.5)*2),v>16?(t.fillStyle=a.name==="midnight"?"rgba(10,10,15,0.85)":"rgba(255,255,255,0.95)",t.font=`600 ${Math.min(12,v*.45)}px ${a.fontFamily}`,t.textAlign="center",t.textBaseline="middle",t.fillText(p.label,u,y)):(t.fillStyle=a.textPrimary,t.font=`500 9px ${a.fontFamily}`,t.textAlign="center",t.fillText(p.label,u,y-v-5)),t.globalAlpha=1)})}fmt(e){return Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":e<10?e.toFixed(1):Math.round(e)+""}};var nt=class extends V{waffleConfig;constructor(e,t){super(e,t),this.waffleConfig={gridSize:10,...t},this.render()}render(){this.animate(e=>this.draw(e),600)}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,total:M,gridSize:A}=this.waffleConfig,F=A||10,d=F*F,b=M||l.reduce((c,p)=>c+p.value,0);this.drawBackground(),this.drawTitle();let T=n.top+8,m=x-n.bottom-30,B=n.left+20,w=h-n.right-20-B,L=m-T,$=Math.min(w/F,L/F),R=Math.max(2,$*.1),f=$-R,g=F*$,i=F*$,s=B+(w-g)/2,o=T+(L-i)/2,r=Math.min(3,f/4),S=new Array(d).fill(-1),P=0;for(l.forEach((c,p)=>{let u=Math.round(c.value/b*d);for(let y=0;y<u&&P<d;y++)S[P++]=p});P<d;)S[P++]=l.length-1;this.drawSource(),this.snapshotBackground();let k=Math.floor(d*e),C=l.some(c=>c.highlight);for(let c=0;c<d;c++){let p=c%F,u=Math.floor(c/F),y=s+p*$,v=o+u*$,G=S[c],E=c<k,W=G>=0&&(!C||l[G]?.highlight);if(t.beginPath(),t.moveTo(y+r,v),t.lineTo(y+f-r,v),t.quadraticCurveTo(y+f,v,y+f,v+r),t.lineTo(y+f,v+f-r),t.quadraticCurveTo(y+f,v+f,y+f-r,v+f),t.lineTo(y+r,v+f),t.quadraticCurveTo(y,v+f,y,v+f-r),t.lineTo(y,v+r),t.quadraticCurveTo(y,v,y+r,v),t.closePath(),!E||G<0){let I=a.name==="midnight";t.fillStyle=I?"rgba(255,255,240,0.03)":"rgba(0,0,0,0.02)",t.fill()}else if(W){t.save(),t.clip();let I=l[G].highlight?a.highlightGradient:a.gradients[G%a.gradients.length],q=t.createLinearGradient(y,v,y+f,v+f);q.addColorStop(0,I[0]),q.addColorStop(1,I[1]),t.fillStyle=q,t.fillRect(y,v,f,f),t.restore()}else{let I=a.name==="midnight";t.fillStyle=I?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.fill()}}if(e>.7){let c=Math.min(1,(e-.7)/.3);t.globalAlpha=c;let p=s;l.forEach((u,y)=>{let v=u.highlight?a.highlightGradient:a.gradients[y%a.gradients.length],G=!C||u.highlight;t.fillStyle=G?v[0]:a.textSource,t.fillRect(p,o+i+12,10,10),t.fillStyle=G?a.textSecondary:a.textSource,t.font=`500 11px ${a.fontFamily}`,t.textAlign="left";let E=Math.round(u.value/b*100);t.fillText(`${u.label} ${E}%`,p+14,o+i+21),p+=t.measureText(`${u.label} ${E}%`).width+30}),t.globalAlpha=1}}};var it=class extends V{tmConfig;constructor(e,t){super(e,t),this.tmConfig=t,this.render()}render(){this.animate(e=>this.draw(e),600)}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l}=this.tmConfig;this.drawBackground(),this.drawTitle();let M=n.top+8,A=x-n.bottom-8,F=n.left+4,d=h-n.right-4;this.drawSource(),this.snapshotBackground();let b=this.squarify(l,F,M,d-F,A-M,0),T=l.some(H=>H.highlight),m=3,B=6;b.forEach((H,w)=>{let{x:L,y:$,w:R,h:f,item:g,depth:i}=H,s=L+m/2,o=$+m/2,r=R-m,S=f-m;if(r<2||S<2)return;let P=!T||g.highlight,k=g.highlight?a.highlightGradient:a.gradients[w%a.gradients.length],C=Math.min(B,r/4,S/4);t.beginPath(),t.moveTo(s+C,o),t.lineTo(s+r-C,o),t.quadraticCurveTo(s+r,o,s+r,o+C),t.lineTo(s+r,o+S-C),t.quadraticCurveTo(s+r,o+S,s+r-C,o+S),t.lineTo(s+C,o+S),t.quadraticCurveTo(s,o+S,s,o+S-C),t.lineTo(s,o+C),t.quadraticCurveTo(s,o,s+C,o),t.closePath();let c=Math.min(1,e*1.5);if(P){t.save(),t.clip();let p=t.createLinearGradient(s,o,s+r,o+S);p.addColorStop(0,k[0]),p.addColorStop(1,k[1]),t.globalAlpha=.15+.7*c,t.fillStyle=p,t.fillRect(s,o,r,S);let u=W=>{let I=Math.sin(w*127.1+W*311.7)*43758.5;return I-Math.floor(I)},y=s+r*(.2+u(0)*.6),v=o+S*(.2+u(1)*.6),G=Math.max(r,S)*.5,E=t.createRadialGradient(y,v,0,y,v,G);E.addColorStop(0,k[1]),E.addColorStop(.5,k[1]+"77"),E.addColorStop(1,k[1]+"00"),t.globalCompositeOperation="source-atop",t.fillStyle=E,t.fillRect(s,o,r,S),t.globalCompositeOperation="source-over",t.restore(),t.globalAlpha=1}else{let p=a.name==="midnight";t.fillStyle=p?"rgba(255,255,240,0.05)":"rgba(0,0,0,0.03)",t.globalAlpha=c,t.fill(),t.globalAlpha=1}if(r>40&&S>24&&e>.4){t.globalAlpha=Math.min(1,(e-.4)/.4);let p=a.name==="midnight";t.fillStyle=P?p?"rgba(10,10,15,0.85)":"rgba(255,255,255,0.9)":a.textSource;let u=Math.min(14,r/8,S/3);t.font=`600 ${u}px ${a.fontFamily}`,t.textAlign="center",t.textBaseline="middle",t.fillText(this.truncate(g.label,r-8,u),s+r/2,o+S/2-u*.3),S>40&&(t.font=`400 ${Math.max(9,u*.7)}px ${a.monoFamily}`,t.fillText(this.fmtVal(g.value),s+r/2,o+S/2+u*.6)),t.globalAlpha=1}})}squarify(e,t,h,x,a,n){let l=e.reduce((w,L)=>w+L.value,0);if(l===0||e.length===0)return[];let M=[],A=t,F=h,d=x,b=a,T=[...e].sort((w,L)=>L.value-w.value),m=[],B=0,H=l;for(let w of T)if(m.push(w),B+=w.value,m.length===T.length||this.worst(m,B,d,b,H)<=this.worst([...m,T[m.length]],B+(T[m.length]?.value||0),d,b,H)){let L=d>=b,$=B/H,R=L?d*$:b*$,f=L?F:A;for(let g of m){let i=g.value/B,s=L?b*i:d*i,o=L?{x:A,y:f,w:R,h:s,item:g,depth:n}:{x:f,y:F,w:s,h:R,item:g,depth:n};M.push(o),f+=s}L?(A+=R,d-=R):(F+=R,b-=R),m=[],B=0}return M}worst(e,t,h,x,a){if(!e.length||!a)return 1/0;let n=t/a*(h>=x?h:x);if(n===0)return 1/0;let l=h>=x?x:h,M=0;for(let A of e){let d=A.value/a*h*x/n,b=Math.max(n/d,d/n);M=Math.max(M,b)}return M}truncate(e,t,h){let{ctx:x,theme:a}=this;if(x.font=`600 ${h}px ${a.fontFamily}`,x.measureText(e).width<=t)return e;let n=e;for(;n.length>2&&x.measureText(n+"..").width>t;)n=n.slice(0,-1);return n+".."}fmtVal(e){return e>=1e12?(e/1e12).toFixed(1)+"T":e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e+""}};var ot=class extends V{stackConfig;constructor(e,t){super(e,t),this.stackConfig={showValues:!1,normalized:!1,horizontal:!1,...t},this.padding=t.horizontal?{top:60,right:24,bottom:48,left:100}:{top:60,right:24,bottom:48,left:40},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,horizontal:M,showValues:A,normalized:F}=this.stackConfig,{categories:d,series:b}=l;this.drawBackground(),this.drawTitle();let T=n.top+8,m=x-n.bottom-20,B=n.left,H=h-n.right,w=H-B,L=m-T,$=d.map((i,s)=>b.reduce((o,r)=>o+r.values[s],0)),R=F?1:Math.max(...$)*1.1,f=4,g=b.some(i=>i.highlight);if(M){let i=Math.min(40,(L-(d.length-1)*8)/d.length),s=(L-d.length*i)/(d.length-1||1);t.fillStyle=a.textSecondary,t.font=`400 11px ${a.monoFamily}`,t.textAlign="right",d.forEach((o,r)=>{t.fillText(o,B-10,T+r*(i+s)+i/2+4)}),this.drawSource(),this.snapshotBackground(),d.forEach((o,r)=>{let S=$[r],P=B;b.forEach((k,C)=>{let c=k.values[r],u=(F?c/S:c/R)*w*e,y=T+r*(i+s),v=!g||k.highlight,G=k.highlight?a.highlightGradient:a.gradients[C%a.gradients.length];if(u>1){if(t.beginPath(),t.rect(P,y,u,i),t.closePath(),v){t.save(),t.clip();let E=t.createLinearGradient(P,y,P+u,y+i);E.addColorStop(0,G[0]),E.addColorStop(1,G[1]),t.fillStyle=E,t.fillRect(P,y,u,i),t.restore()}else{let E=a.name==="midnight";t.fillStyle=E?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.fill()}t.strokeStyle=a.bg,t.lineWidth=1,t.stroke()}P+=u})})}else{let i=Math.min(60,(w-(d.length-1)*12)/d.length),s=(w-d.length*i)/(d.length-1||1);t.strokeStyle=a.grid,t.lineWidth=1;for(let o=1;o<=4;o++){let r=m-L*o/4;t.beginPath(),t.moveTo(B,r),t.lineTo(H,r),t.stroke()}t.fillStyle=a.textSecondary,t.font=`400 11px ${a.monoFamily}`,t.textAlign="center",d.forEach((o,r)=>{t.fillText(o,B+r*(i+s)+i/2,m+16)}),this.drawSource(),this.snapshotBackground(),d.forEach((o,r)=>{let S=$[r],P=m;b.forEach((k,C)=>{let c=k.values[r],u=(F?c/S:c/R)*L*e,y=B+r*(i+s);P-=u;let v=!g||k.highlight,G=k.highlight?a.highlightGradient:a.gradients[C%a.gradients.length];if(u>1){if(t.beginPath(),t.rect(y,P,i,u),t.closePath(),v){t.save(),t.clip();let E=t.createLinearGradient(y,P,y,P+u);E.addColorStop(0,G[0]),E.addColorStop(1,G[1]),t.fillStyle=E,t.fillRect(y,P,i,u),t.restore()}else{let E=a.name==="midnight";t.fillStyle=E?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.fill()}t.strokeStyle=a.bg,t.lineWidth=1,t.stroke()}})})}if(e>.8){let i=Math.min(1,(e-.8)/.2);t.globalAlpha=i;let s=B;b.forEach((o,r)=>{let S=o.highlight?a.highlightGradient:a.gradients[r%a.gradients.length],P=!g||o.highlight;t.fillStyle=P?S[0]:a.textSource,t.fillRect(s,x-16,10,3),t.fillStyle=P?a.textSecondary:a.textSource,t.font=`500 10px ${a.fontFamily}`,t.textAlign="left",t.fillText(o.label,s+14,x-12),s+=t.measureText(o.label).width+30}),t.globalAlpha=1}}};var rt=class extends V{candleConfig;constructor(e,t){super(e,t),this.candleConfig=t,this.padding={top:60,right:24,bottom:48,left:60},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,yPrefix:M="",ySuffix:A=""}=this.candleConfig;this.drawBackground(),this.drawTitle();let F=n.top+8,d=x-n.bottom-20,b=n.left,T=h-n.right,m=T-b,B=d-F,H=l.flatMap(o=>[o.high,o.low]),w=Math.min(...H)*.98,$=Math.max(...H)*1.02-w||1,R=o=>d-(o-w)/$*B;t.strokeStyle=a.grid,t.lineWidth=1;for(let o=0;o<=5;o++){let r=d-B*o/5;t.beginPath(),t.moveTo(b,r),t.lineTo(T,r),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(M+this.fmt(w+$*o/5)+A,b-8,r+4)}let f=Math.max(1,Math.floor(l.length/8));t.textAlign="center";for(let o=0;o<l.length;o+=f){let r=b+(o+.5)/l.length*m;t.fillText(l[o].label,r,d+16)}this.drawSource(),this.snapshotBackground();let g=Math.min(20,m/l.length*.7),i=1.5,s=Math.floor(l.length*e);for(let o=0;o<s;o++){let r=l[o],S=b+(o+.5)/l.length*m,P=r.close>=r.open,k=R(Math.max(r.open,r.close)),C=R(Math.min(r.open,r.close)),c=Math.max(1,C-k),p=R(r.high),u=R(r.low),y=P?a.gradients[2]:[a.highlightGradient[0],"#ff6b6b"];t.strokeStyle=P?y[0]+"aa":y[1]+"aa",t.lineWidth=i,t.beginPath(),t.moveTo(S,p),t.lineTo(S,u),t.stroke();let v=S-g/2;t.beginPath();let G=Math.min(3,g/4,c/4);t.moveTo(v+G,k),t.lineTo(v+g-G,k),t.quadraticCurveTo(v+g,k,v+g,k+G),t.lineTo(v+g,C-G),t.quadraticCurveTo(v+g,C,v+g-G,C),t.lineTo(v+G,C),t.quadraticCurveTo(v,C,v,C-G),t.lineTo(v,k+G),t.quadraticCurveTo(v,k,v+G,k),t.closePath(),t.save(),t.clip();let E=t.createLinearGradient(v,k,v+g,C);E.addColorStop(0,y[0]),E.addColorStop(1,y[1]),t.fillStyle=E,t.fillRect(v,k,g,c),t.restore()}}fmt(e){return Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":e<100?e.toFixed(1):Math.round(e)+""}};var lt=class extends V{funnelConfig;constructor(e,t){super(e,t),this.funnelConfig={showPercentage:!0,...t},this.render()}render(){this.animate(e=>this.draw(e),700)}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,showPercentage:M}=this.funnelConfig;this.drawBackground(),this.drawTitle();let A=n.top+8,F=x-n.bottom-8,d=h/2,b=F-A,T=h-n.left-n.right-80,m=l[0]?.value||1,B=b/l.length,H=3;this.drawSource(),this.snapshotBackground();let w=l.some(L=>L.highlight);l.forEach((L,$)=>{let R=L.value/m,f=l[$+1]?l[$+1].value/m:R*.7,g=R*T*e,i=($<l.length-1?f:R*.7)*T*e,s=A+$*B+H/2,o=B-H,r=!w||L.highlight,S=L.highlight?a.highlightGradient:a.gradients[$%a.gradients.length];if(t.beginPath(),t.moveTo(d-g/2,s),t.lineTo(d+g/2,s),t.lineTo(d+i/2,s+o),t.lineTo(d-i/2,s+o),t.closePath(),r){t.save(),t.clip();let P=t.createLinearGradient(d-g/2,s,d+g/2,s+o);P.addColorStop(0,S[0]),P.addColorStop(1,S[1]),t.fillStyle=P,t.fillRect(d-g/2,s,g,o);let k=y=>{let v=Math.sin($*127.1+y*311.7)*43758.5;return v-Math.floor(v)},C=d+g*(k(0)-.5)*.5,c=s+o*k(1),p=Math.max(g,o)*.4,u=t.createRadialGradient(C,c,0,C,c,p);u.addColorStop(0,S[1]),u.addColorStop(.5,S[1]+"77"),u.addColorStop(1,S[1]+"00"),t.globalCompositeOperation="source-atop",t.fillStyle=u,t.fillRect(d-g/2,s,g,o),t.globalCompositeOperation="source-over",t.restore()}else{let P=a.name==="midnight";t.fillStyle=P?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.fill()}if(t.strokeStyle=a.bg,t.lineWidth=1,t.stroke(),e>.5){let P=Math.min(1,(e-.5)*2);t.globalAlpha=P;let k=d+Math.max(g,i)/2+16;t.fillStyle=r?a.textPrimary:a.textSource,t.font=`500 12px ${a.fontFamily}`,t.textAlign="left",t.textBaseline="middle",t.fillText(L.label,k,s+o/2-7),t.fillStyle=r?a.textSecondary:a.textSource,t.font=`400 11px ${a.monoFamily}`;let C=this.fmtVal(L.value);M&&$>0&&(C+=` (${Math.round(L.value/m*100)}%)`),t.fillText(C,k,s+o/2+8),t.globalAlpha=1}})}fmtVal(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString()}};var st=class extends V{lolliConfig;constructor(e,t){super(e,t),this.lolliConfig={horizontal:!0,...t},this.padding=t.horizontal!==!1?{top:60,right:60,bottom:48,left:100}:{top:60,right:24,bottom:48,left:40},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,horizontal:M,valuePrefix:A="",valueSuffix:F=""}=this.lolliConfig;this.drawBackground(),this.drawTitle();let d=n.top+8,b=x-n.bottom-20,T=n.left,B=h-n.right-T,H=b-d,w=Math.max(...l.map($=>$.value))*1.1,L=l.some($=>$.highlight);if(M){let $=Math.min(30,H/l.length),R=(H-l.length*$)/(l.length-1||1);t.font=`400 11px ${a.monoFamily}`,t.textAlign="right",l.forEach((f,g)=>{let i=!L||f.highlight;t.fillStyle=i?a.textSecondary:a.textSource;let s=d+g*($+R)+$/2;t.fillText(f.label,T-10,s+4)}),t.strokeStyle=a.grid,t.lineWidth=1,t.beginPath(),t.moveTo(T,d),t.lineTo(T,b),t.stroke(),this.drawSource(),this.snapshotBackground(),l.forEach((f,g)=>{let i=!L||f.highlight,s=f.highlight?a.highlightGradient:a.gradients[g%a.gradients.length],o=d+g*($+R)+$/2,r=T+f.value/w*B*e,S=i?6:4;if(t.strokeStyle=i?s[0]+"aa":a.name==="midnight"?"rgba(255,255,240,0.1)":"rgba(0,0,0,0.08)",t.lineWidth=i?2.5:1.5,t.beginPath(),t.moveTo(T,o),t.lineTo(r,o),t.stroke(),t.beginPath(),t.arc(r,o,S,0,Math.PI*2),i){let P=t.createRadialGradient(r,o,0,r,o,S);P.addColorStop(0,s[0]),P.addColorStop(1,s[1]),t.fillStyle=P}else t.fillStyle=a.name==="midnight"?"rgba(255,255,240,0.12)":"rgba(0,0,0,0.08)";if(t.fill(),e>.5){if(t.globalAlpha=Math.min(1,(e-.5)*2),i){let P=t.createLinearGradient(r,o-8,r+40,o+8);P.addColorStop(0,s[0]),P.addColorStop(1,s[1]),t.fillStyle=P,t.font=`600 12px ${a.fontFamily}`}else t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`;t.textAlign="left",t.fillText(A+this.fmt(f.value*Math.min(1,e/.8))+F,r+S+6,o+4),t.globalAlpha=1}})}}fmt(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":Math.round(e).toLocaleString()}};var ht=class extends V{areaConfig;constructor(e,t){super(e,t),this.areaConfig={stacked:!1,...t},this.padding={top:60,right:24,bottom:48,left:56},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,stacked:M,yPrefix:A="",ySuffix:F=""}=this.areaConfig;this.drawBackground(),this.drawTitle();let d=n.top+8,b=x-n.bottom-20,T=n.left,m=h-n.right,B=m-T,H=b-d,w=l[0]?.data.length||0,L=l[0]?.data.map(c=>c.x)||[],$=Math.min(...L),f=Math.max(...L)-$||1,g=[];if(M){g=new Array(l.length).fill(null).map(()=>new Array(w).fill(0));for(let c=0;c<w;c++){let p=0;for(let u=0;u<l.length;u++)p+=l[u].data[c]?.y||0,g[u][c]=p}}let i=M?g[l.length-1]||[]:l.flatMap(c=>c.data.map(p=>p.y)),s=Math.max(...i)*1.1,o=M?0:Math.min(0,Math.min(...i)),r=s-o||1,S=c=>T+(c-$)/f*B,P=c=>b-(c-o)/r*H;t.strokeStyle=a.grid,t.lineWidth=1;for(let c=0;c<=4;c++){let p=b-H*c/4;t.beginPath(),t.moveTo(T,p),t.lineTo(m,p),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(A+this.fmt(o+r*c/4)+F,T-8,p+4)}let k=Math.max(1,Math.floor(w/8));t.textAlign="center";for(let c=0;c<w;c+=k)t.fillText(String(L[c]),S(L[c]),b+16);this.drawSource(),this.snapshotBackground();let C=l.some(c=>c.highlight);for(let c=l.length-1;c>=0;c--){let p=l[c],u=!C||p.highlight,y=p.highlight?a.highlightGradient:a.gradients[c%a.gradients.length],v=Math.max(2,Math.ceil(w*e)),G=[],E=[];for(let W=0;W<v&&W<w;W++){let I=S(L[W]);M?(G.push([I,P(g[c][W])]),E.push([I,c>0?P(g[c-1][W]):P(0)])):(G.push([I,P(p.data[W].y)]),E.push([I,P(0)]))}t.beginPath(),G.forEach((W,I)=>I===0?t.moveTo(W[0],W[1]):t.lineTo(W[0],W[1]));for(let W=E.length-1;W>=0;W--)t.lineTo(E[W][0],E[W][1]);if(t.closePath(),u){let W=t.createLinearGradient(0,d,0,b);W.addColorStop(0,y[0]+"66"),W.addColorStop(1,y[1]+"11"),t.fillStyle=W}else{let W=a.name==="midnight";t.fillStyle=W?"rgba(255,255,240,0.04)":"rgba(0,0,0,0.02)"}if(t.fill(),t.beginPath(),G.forEach((W,I)=>I===0?t.moveTo(W[0],W[1]):t.lineTo(W[0],W[1])),u){let W=t.createLinearGradient(G[0][0],0,G[G.length-1][0],0);W.addColorStop(0,y[0]),W.addColorStop(1,y[1]),t.strokeStyle=W,t.lineWidth=2}else t.strokeStyle=a.name==="midnight"?"rgba(255,255,240,0.1)":"rgba(0,0,0,0.06)",t.lineWidth=1;t.stroke()}if(l.length>1&&e>.8){let c=Math.min(1,(e-.8)/.2);t.globalAlpha=c;let p=T;l.forEach((u,y)=>{let v=u.highlight?a.highlightGradient:a.gradients[y%a.gradients.length],G=!C||u.highlight;t.fillStyle=G?v[0]:a.textSource,t.fillRect(p,x-14,12,3),t.fillStyle=G?a.textSecondary:a.textSource,t.font=`500 10px ${a.fontFamily}`,t.textAlign="left",t.fillText(u.label,p+16,x-10),p+=t.measureText(u.label).width+32}),t.globalAlpha=1}}fmt(e){return Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":Math.round(e)+""}};var ct=class extends V{sankeyConfig;constructor(e,t){super(e,t),this.sankeyConfig=t,this.padding={top:60,right:24,bottom:24,left:24},this.render()}render(){this.animate(e=>this.draw(e),900)}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{nodes:l,links:M}=this.sankeyConfig.data;this.drawBackground(),this.drawTitle();let A=n.top+8,F=x-n.bottom-8,d=n.left+60,b=h-n.right-60,T=F-A,m=this.assignColumns(l,M),B=Math.max(...m),H=f=>d+f/(B||1)*(b-d),w=l.map((f,g)=>{let i=M.filter(o=>o.target===g).reduce((o,r)=>o+r.value,0),s=M.filter(o=>o.source===g).reduce((o,r)=>o+r.value,0);return Math.max(i,s)}),L=Math.max(...w)||1,$=new Array(l.length),R=Math.min(20,(b-d)/(B+1)*.15);for(let f=0;f<=B;f++){let g=l.map((r,S)=>S).filter(r=>m[r]===f),i=g.reduce((r,S)=>r+w[S],0),s=Math.min(20,(T-i/L*T*.8)/(g.length||1)),o=A+(T-g.reduce((r,S)=>r+w[S]/L*T*.8,0)-(g.length-1)*s)/2;g.forEach(r=>{let S=Math.max(4,w[r]/L*T*.8);$[r]={x:H(f)-R/2,y:o,w:R,h:S},o+=S+s})}this.drawSource(),this.snapshotBackground(),M.forEach((f,g)=>{let i=$[f.source],s=$[f.target];if(!i||!s)return;let o=a.gradients[f.source%a.gradients.length],r=a.gradients[f.target%a.gradients.length],S=[o[0],r[1]],P=Math.max(2,f.value/L*T*.8),k=i.y+i.h/2,C=s.y+s.h/2,c=i.x+i.w,p=s.x,u=c+(p-c)*.4,y=c+(p-c)*.6;t.beginPath(),t.moveTo(c,k-P/2*e),t.bezierCurveTo(u,k-P/2*e,y,C-P/2*e,p,C-P/2*e),t.lineTo(p,C+P/2*e),t.bezierCurveTo(y,C+P/2*e,u,k+P/2*e,c,k+P/2*e),t.closePath();let v=t.createLinearGradient(c,0,p,0);v.addColorStop(0,S[0]+"66"),v.addColorStop(1,S[1]+"66"),t.fillStyle=v,t.fill()}),l.forEach((f,g)=>{let i=$[g];if(!i)return;let s=a.gradients[g%a.gradients.length];t.beginPath();let o=Math.min(4,i.w/4);t.moveTo(i.x+o,i.y),t.lineTo(i.x+i.w-o,i.y),t.quadraticCurveTo(i.x+i.w,i.y,i.x+i.w,i.y+o),t.lineTo(i.x+i.w,i.y+i.h-o),t.quadraticCurveTo(i.x+i.w,i.y+i.h,i.x+i.w-o,i.y+i.h),t.lineTo(i.x+o,i.y+i.h),t.quadraticCurveTo(i.x,i.y+i.h,i.x,i.y+i.h-o),t.lineTo(i.x,i.y+o),t.quadraticCurveTo(i.x,i.y,i.x+o,i.y),t.closePath();let r=t.createLinearGradient(i.x,i.y,i.x,i.y+i.h);r.addColorStop(0,s[0]),r.addColorStop(1,s[1]),t.fillStyle=r,t.fill(),e>.5&&(t.globalAlpha=Math.min(1,(e-.5)*2),t.fillStyle=a.textPrimary,t.font=`500 11px ${a.fontFamily}`,t.textBaseline="middle",m[g]===0?(t.textAlign="right",t.fillText(f.label,i.x-8,i.y+i.h/2)):(t.textAlign="left",t.fillText(f.label,i.x+i.w+8,i.y+i.h/2)),t.globalAlpha=1)})}assignColumns(e,t){let h=e.length,x=new Array(h).fill(0),a=new Set(t.map(A=>A.target)),n=new Set(t.map(A=>A.source)),l=!0,M=0;for(;l&&M<20;)l=!1,M++,t.forEach(A=>{let F=x[A.source]+1;F>x[A.target]&&(x[A.target]=F,l=!0)});return x}};var gt=class extends V{histConfig;constructor(e,t){super(e,t),this.histConfig=t,this.padding={top:60,right:24,bottom:56,left:50},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,bins:M,xLabel:A,yLabel:F,xPrefix:d="",xSuffix:b=""}=this.histConfig;this.drawBackground(),this.drawTitle();let T=n.top+8,m=x-n.bottom,B=n.left,H=h-n.right,w=H-B,L=m-T,$=Math.min(...l),f=Math.max(...l)-$||1,g=M||Math.max(5,Math.min(30,Math.ceil(Math.sqrt(l.length)))),i=f/g,s=new Array(g).fill(0);l.forEach(C=>{let c=Math.min(g-1,Math.floor((C-$)/i));s[c]++});let o=Math.max(...s);t.strokeStyle=a.grid,t.lineWidth=1;for(let C=0;C<=4;C++){let c=m-L*C/4;t.beginPath(),t.moveTo(B,c),t.lineTo(H,c),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(Math.round(o*C/4)+"",B-8,c+4)}t.textAlign="center";let r=Math.max(1,Math.floor(g/6));for(let C=0;C<=g;C+=r){let c=B+C/g*w;t.fillText(d+this.fmt($+C*i)+b,c,m+16)}A&&(t.fillStyle=a.textSource,t.textAlign="center",t.fillText(A,B+w/2,m+34)),F&&(t.save(),t.translate(14,T+L/2),t.rotate(-Math.PI/2),t.fillStyle=a.textSource,t.textAlign="center",t.fillText(F,0,0),t.restore()),this.drawSource(),this.snapshotBackground();let S=w/g,P=Math.max(1,S*.05),k=Math.min(4,(S-P)/4);s.forEach((C,c)=>{let p=C/o*L*e,u=B+c*S+P/2,y=m-p,v=S-P;if(p<1)return;let G=s.indexOf(o),E=Math.abs(c-G)/(g||1),W=E<.25?a.gradients[2]:E<.5?a.gradients[0]:E<.75?a.gradients[3]:[a.highlightGradient[0],"#ff6b6b"];t.beginPath(),t.moveTo(u+k,y),t.lineTo(u+v-k,y),t.quadraticCurveTo(u+v,y,u+v,y+k),t.lineTo(u+v,y+p),t.lineTo(u,y+p),t.lineTo(u,y+k),t.quadraticCurveTo(u,y,u+k,y),t.closePath(),t.save(),t.clip();let I=t.createLinearGradient(u,y,u+v,y+p);I.addColorStop(0,W[0]),I.addColorStop(1,W[1]),t.fillStyle=I,t.fillRect(u,y,v,p),t.restore()})}fmt(e){return Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":e<10?e.toFixed(1):Math.round(e)+""}};var dt=class extends V{slopeConfig;constructor(e,t){super(e,t),this.slopeConfig=t,this.padding={top:60,right:100,bottom:48,left:100},this.render()}render(){this.animate(e=>this.draw(e),900)}draw(e){let{ctx:t,width:h,height:x,theme:a,padding:n}=this,{data:l,startLabel:M,endLabel:A,valuePrefix:F="",valueSuffix:d=""}=this.slopeConfig;this.drawBackground(),this.drawTitle();let b=n.top+20,T=x-n.bottom-8,m=n.left,B=h-n.right,H=T-b,w=l.flatMap(i=>[i.start,i.end]),L=Math.min(...w)*.9,R=Math.max(...w)*1.1-L||1,f=i=>T-(i-L)/R*H;t.fillStyle=a.textSecondary,t.font=`600 12px ${a.fontFamily}`,t.textAlign="center",t.fillText(M||"Before",m,b-10),t.fillText(A||"After",B,b-10),t.strokeStyle=a.grid,t.lineWidth=1,t.beginPath(),t.moveTo(m,b),t.lineTo(m,T),t.stroke(),t.beginPath(),t.moveTo(B,b),t.lineTo(B,T),t.stroke(),this.drawSource(),this.snapshotBackground();let g=l.some(i=>i.highlight);l.forEach((i,s)=>{let o=!g||i.highlight,r=i.highlight?a.highlightGradient:a.gradients[s%a.gradients.length],S=f(i.start),P=f(i.end),k=m+(B-m)*e,C=S+(P-S)*e;if(t.beginPath(),t.moveTo(m,S),t.lineTo(k,C),o){let c=t.createLinearGradient(m,0,B,0);c.addColorStop(0,r[0]),c.addColorStop(1,r[1]),t.strokeStyle=c,t.lineWidth=3}else t.strokeStyle=a.name==="midnight"?"rgba(255,255,240,0.1)":"rgba(0,0,0,0.06)",t.lineWidth=1.5;if(t.stroke(),t.beginPath(),t.arc(m,S,o?5:3,0,Math.PI*2),t.fillStyle=o?r[0]:a.name==="midnight"?"rgba(255,255,240,0.12)":"rgba(0,0,0,0.08)",t.fill(),e>.9&&(t.beginPath(),t.arc(B,P,o?5:3,0,Math.PI*2),t.fillStyle=o?r[1]:a.name==="midnight"?"rgba(255,255,240,0.12)":"rgba(0,0,0,0.08)",t.fill()),t.fillStyle=o?a.textSecondary:a.textSource,t.font=o?`500 11px ${a.fontFamily}`:`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(`${i.label} ${F}${this.fmt(i.start)}${d}`,m-10,S+4),e>.9){let c=Math.min(1,(e-.9)*10);t.globalAlpha=c,t.textAlign="left";let p=i.end-i.start,u=p>0?"+":"";t.fillText(`${F}${this.fmt(i.end)}${d} (${u}${this.fmt(p)})`,B+10,P+4),t.globalAlpha=1}})}fmt(e){return Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":Math.round(e)+""}};function wt(D,e){switch(e.type){case"bar":return new K(D,e);case"line":return new _(D,e);case"hbar":return new U(D,e);case"stat":return new J(D,e);case"radar":return new j(D,e);case"donut":return new Q(D,e);case"heatmap":return new Z(D,e);case"bump":return new tt(D,e);case"scatter":return new et(D,e);case"bubble":return new at(D,e);case"waffle":return new nt(D,e);case"treemap":return new it(D,e);case"stacked-bar":return new ot(D,e);case"candlestick":return new rt(D,e);case"funnel":return new lt(D,e);case"lollipop":return new st(D,e);case"area":return new ht(D,e);case"sankey":return new ct(D,e);case"histogram":return new gt(D,e);case"slope":return new dt(D,e);default:console.error("DropThe Charts: unknown type",e.type)}}function St(){document.querySelectorAll("[data-dt-chart]").forEach(D=>{try{let e=JSON.parse(D.getAttribute("data-dt-chart")||"{}");wt(D,e)}catch(e){console.error("DropThe Charts: invalid config",e)}})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",St):St());return Rt($t);})();

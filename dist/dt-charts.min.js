var DTCharts=(()=>{var pt=Object.defineProperty;var At=Object.getOwnPropertyDescriptor;var Pt=Object.getOwnPropertyNames;var Bt=Object.prototype.hasOwnProperty;var Lt=(D,e)=>{for(var t in e)pt(D,t,{get:e[t],enumerable:!0})},Ft=(D,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let b of Pt(e))!Bt.call(D,b)&&b!==t&&pt(D,b,{get:()=>e[b],enumerable:!(s=At(e,b))||s.enumerable});return D};var Rt=D=>Ft(pt({},"__esModule",{value:!0}),D);var $t={};Lt($t,{AreaChart:()=>ht,BarChart:()=>K,BubbleChart:()=>at,BumpChart:()=>tt,CandlestickChart:()=>rt,DonutChart:()=>Q,FunnelChart:()=>lt,HBarChart:()=>U,HeatmapChart:()=>Z,HistogramChart:()=>gt,LineChart:()=>_,LollipopChart:()=>st,RadarChart:()=>j,SankeyChart:()=>ct,ScatterChart:()=>et,SlopeChart:()=>dt,StackedBarChart:()=>ot,StatCard:()=>J,TreemapChart:()=>it,WaffleChart:()=>nt,create:()=>wt,getTheme:()=>mt,init:()=>yt,midnight:()=>Ct,sand:()=>St});var Ct={name:"midnight",bg:"#0a0a0f",surface:"#141419",grid:"#1a1a22",textPrimary:"#f0f0f0",textSecondary:"#555566",textSource:"#333344",gradients:[["#c4b5fd","#f9a8d4"],["#93b8fd","#c4b5fd"],["#86efac","#93b8fd"],["#fdd08a","#f9a8d4"],["#fdba74","#fdd08a"],["#5eead4","#86efac"]],highlightGradient:["#f9a8d4","#93b8fd"],lineStroke:"#c4b5fd",lineFill:["rgba(196,181,253,0.35)","rgba(196,181,253,0)"],fontFamily:"'Space Grotesk', system-ui, sans-serif",monoFamily:"'SF Mono', 'Fira Code', monospace",grain:.055,grainTarget:"elements"},St={name:"sand",bg:"#ebe5d9",surface:"#e0dace",grid:"#d4cec2",textPrimary:"#1a1815",textSecondary:"#8a8478",textSource:"#b0a89c",gradients:[["#c4b5fd","#f9a8d4"],["#93b8fd","#c4b5fd"],["#86efac","#93b8fd"],["#fdd08a","#f9a8d4"],["#fdba74","#fdd08a"],["#5eead4","#86efac"]],highlightGradient:["#f9a8d4","#93b8fd"],lineStroke:"#c4b5fd",lineFill:["rgba(196,181,253,0.3)","rgba(196,181,253,0)"],fontFamily:"'Space Grotesk', system-ui, sans-serif",monoFamily:"'SF Mono', 'Fira Code', monospace",grain:.055,grainTarget:"elements"};function mt(D){return D==="sand"?St:Ct}var I=class{canvas;ctx;config;theme;width;height;dpr;padding;animProgress=0;animFrame=0;bgSnapshot=null;constructor(e,t){let s=typeof e=="string"?document.querySelector(e):e;if(!s)throw new Error("DropThe Charts: container not found");this.config=t,this.theme=mt(t.theme),this.dpr=window.devicePixelRatio||1,this.width=t.width||s.clientWidth||600,this.height=t.height||400,this.padding={top:60,right:24,bottom:48,left:24},this.canvas=document.createElement("canvas"),this.canvas.width=this.width*this.dpr,this.canvas.height=this.height*this.dpr,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.style.borderRadius="12px",s.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.scale(this.dpr,this.dpr)}snapshotBackground(){this.bgSnapshot=this.ctx.getImageData(0,0,this.width*this.dpr,this.height*this.dpr)}drawGrain(){let{ctx:e,width:t,height:s,theme:b}=this,a=t*this.dpr,n=s*this.dpr,l=e.getImageData(0,0,a,n),T=l.data,v=this.bgSnapshot?.data,P=b.grainTarget==="elements"&&v,d=70;for(let p=0;p<T.length;p+=4)if(P){let y=Math.abs(T[p]-v[p]),u=Math.abs(T[p+1]-v[p+1]),k=Math.abs(T[p+2]-v[p+2]),H=y+u+k;if(H<8)continue;let w=Math.min(1,H/80),L=(Math.random()-.5)*d*w;T[p]=Math.min(255,Math.max(0,T[p]+L)),T[p+1]=Math.min(255,Math.max(0,T[p+1]+L)),T[p+2]=Math.min(255,Math.max(0,T[p+2]+L))}else{let y=(Math.random()-.5)*50;T[p]=Math.min(255,Math.max(0,T[p]+y)),T[p+1]=Math.min(255,Math.max(0,T[p+1]+y)),T[p+2]=Math.min(255,Math.max(0,T[p+2]+y))}e.putImageData(l,0,0)}drawBackground(){let{ctx:e,width:t,height:s,theme:b}=this;e.fillStyle=b.bg,e.fillRect(0,0,t,s)}drawTitle(){let{ctx:e,config:t,theme:s,padding:b}=this;t.title&&(e.fillStyle=s.textPrimary,e.font=`600 18px ${s.fontFamily}`,e.textAlign="left",e.fillText(t.title,b.left,32),t.subtitle&&(e.fillStyle=s.textSecondary,e.font=`400 13px ${s.fontFamily}`,e.fillText(t.subtitle,b.left,50)))}drawSource(){let{ctx:e,config:t,theme:s,width:b,height:a}=this,n=`Source: ${t.source||"DropThe"} | dropthe.org`;e.fillStyle=s.textSource,e.font=`400 9px ${s.monoFamily}`,e.textAlign="right",e.fillText(n,b-this.padding.right,a-8)}createGradient(e,t,s,b){let a=this.ctx.createLinearGradient(e,t,e,s);return a.addColorStop(0,b[0]),a.addColorStop(1,b[1]),a}fillLavaGradient(e,t,s,b,a,n=0){let{ctx:l}=this,T=P=>{let d=Math.sin(n*127.1+P*311.7)*43758.5453;return d-Math.floor(d)};l.fillStyle=a[0],l.fill();let v=4;for(let P=0;P<v;P++){let d=e+s*(.15+T(P*3)*.7),p=t+b*(.15+T(P*3+1)*.7),y=Math.max(s,b)*(.4+T(P*3+2)*.5),u=P%2,k=a[u],H=l.createRadialGradient(d,p,0,d,p,y);H.addColorStop(0,k),H.addColorStop(.6,k+"88"),H.addColorStop(1,k+"00"),l.save(),l.fillStyle=H,l.globalCompositeOperation="source-atop",l.fillRect(e-y,t-y,s+y*2,b+y*2),l.restore()}}animate(e,t=800){if(this.config.animate===!1){e(1),this.drawGrain();return}let s=performance.now(),b=a=>{let n=a-s,l=Math.min(n/t,1),T=1-Math.pow(1-l,3);this.animProgress=T,e(T),l<1?this.animFrame=requestAnimationFrame(b):this.drawGrain()};this.animFrame=requestAnimationFrame(b)}destroy(){this.animFrame&&cancelAnimationFrame(this.animFrame),this.canvas.remove()}toPNG(){return this.canvas.toDataURL("image/png")}};var K=class extends I{barConfig;constructor(e,t){super(e,t),this.barConfig={showValues:!0,valuesOnBar:!1,barRadius:6,...t},this.render()}render(){this.animate(e=>this.draw(e))}isActive(e,t){let{data:s,highlightTop:b,highlightLine:a}=this.barConfig;return a!==void 0?t===a-1:b!==void 0?t<b:s.some(n=>n.highlight)?!!e.highlight:!0}hasContrast(){let{data:e,highlightTop:t,highlightLine:s}=this.barConfig;return s!==void 0?!0:t!==void 0?t<e.length:e.some(b=>b.highlight)}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n,barConfig:l}=this,{data:T,valuePrefix:v="",valueSuffix:P="",showValues:d,valuesOnBar:p,barRadius:y}=l;this.drawBackground(),this.drawTitle();let u=n.top+8,k=b-n.bottom-20,H=n.left,w=s-n.right,L=w-H,G=k-u,R=T.length,S=Math.max(12,L*.08),g=(R-1)*S,h=Math.min(80,(L-g)/R),i=R*h+g,r=H+(L-i)/2,o=Math.max(...T.map($=>$.value)),C=G/(o*1.15),M=this.hasContrast();t.strokeStyle=a.grid,t.lineWidth=1;for(let $=1;$<=3;$++){let m=k-G*$/4;t.beginPath(),t.moveTo(H,m),t.lineTo(w,m),t.stroke()}t.beginPath(),t.moveTo(H,k),t.lineTo(w,k),t.stroke(),T.forEach(($,m)=>{let c=r+m*(h+S),F=this.isActive($,m);t.fillStyle=M&&!F?a.textSource:a.textSecondary,t.font=`400 11px ${a.monoFamily}`,t.textAlign="center",t.fillText(this.truncateLabel($.label,h+S*.6),c+h/2,k+16)}),this.drawSource(),this.snapshotBackground(),T.forEach(($,m)=>{let c=r+m*(h+S),F=$.value*C*e,f=k-F;if(F<=0)return;let x=this.isActive($,m),A=Math.min(y||6,F/2);if(t.beginPath(),t.moveTo(c+A,f),t.lineTo(c+h-A,f),t.quadraticCurveTo(c+h,f,c+h,f+A),t.lineTo(c+h,f+F),t.lineTo(c,f+F),t.lineTo(c,f+A),t.quadraticCurveTo(c,f,c+A,f),t.closePath(),M&&!x){let B=a.name==="midnight";t.fillStyle=B?"rgba(255,255,240,0.08)":"rgba(0,0,0,0.06)",t.fill(),t.strokeStyle=B?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.lineWidth=1,t.stroke()}else{t.save(),t.clip();let B=a.gradients[m%a.gradients.length];t.fillStyle=B[0],t.fillRect(c,f,h,F),this.drawLavaBlobs(c,f,h,F,B,m),t.restore()}if(d&&e>.3){let B=Math.min(1,(e-.3)*1.43);t.globalAlpha=B;let E=Math.min(1,(e-.3)/.7),W=1-Math.pow(1-E,2),V=v+this.formatNumber($.value*W)+P;if(p&&F>35){let q=a.name==="midnight";t.fillStyle=M&&!x?q?"rgba(255,255,240,0.25)":"rgba(0,0,0,0.2)":q?"rgba(10,10,15,0.75)":"rgba(255,255,255,0.9)",t.font=x?`700 16px ${a.fontFamily}`:`600 14px ${a.fontFamily}`,t.textAlign="center",t.fillText(V,c+h/2,f+22)}else{if(x){let q=a.gradients[m%a.gradients.length],O=t.createLinearGradient(c,0,c+h,0);O.addColorStop(0,q[0]),O.addColorStop(1,q[1]),t.fillStyle=O,t.font=`700 18px ${a.fontFamily}`}else t.fillStyle=a.textSource,t.font=`500 14px ${a.fontFamily}`;t.textAlign="center",t.fillText(V,c+h/2,f-12)}t.globalAlpha=1}})}drawLavaBlobs(e,t,s,b,a,n){let{ctx:l}=this,T=v=>{let P=Math.sin(n*127.1+v*311.7)*43758.5453;return P-Math.floor(P)};for(let v=0;v<5;v++){let P=e+s*(.1+T(v*3)*.8),d=t+b*(.1+T(v*3+1)*.8),p=Math.max(s,b)*(.35+T(v*3+2)*.55),y=a[v%a.length],u=l.createRadialGradient(P,d,0,P,d,p);u.addColorStop(0,y),u.addColorStop(.5,y+"99"),u.addColorStop(1,y+"00"),l.globalCompositeOperation="source-atop",l.fillStyle=u,l.fillRect(e,t,s,b),l.globalCompositeOperation="source-over"}}formatNumber(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString()}truncateLabel(e,t){let{ctx:s,theme:b}=this;if(s.font=`400 11px ${b.monoFamily}`,s.measureText(e).width<=t)return e;let a=e.split(" ");if(a.length>1&&s.measureText(a[0]).width<=t)return a[0];let n=e;for(;n.length>3&&s.measureText(n+"..").width>t;)n=n.slice(0,-1);return n+".."}};var _=class extends I{lineConfig;constructor(e,t){super(e,t),this.lineConfig={showDots:!0,showArea:!0,...t},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n,lineConfig:l}=this,{data:T,showDots:v,showArea:P,yPrefix:d="",ySuffix:p=""}=l;this.drawBackground(),this.drawTitle();let y=n.top+8,u=b-n.bottom-20,k=n.left+50,H=s-n.right,w=H-k,L=u-y,G=T.flatMap(m=>m.data.map(c=>c.y)),R=Math.min(...G)*.95,g=Math.max(...G)*1.05-R||1,h=T[0]?.data.map(m=>Number(m.x))||[],i=Math.min(...h),o=Math.max(...h)-i||1,C=5;t.strokeStyle=a.grid,t.lineWidth=1;for(let m=0;m<=C;m++){let c=m/C,F=u-c*L,f=R+c*g;t.beginPath(),t.moveTo(k,F),t.lineTo(H,F),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(d+this.formatVal(f)+p,k-8,F+4)}let M=Math.min(h.length,8),$=Math.max(1,Math.floor(h.length/M));t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="center";for(let m=0;m<h.length;m+=$){let c=k+(h[m]-i)/o*w;t.fillText(String(h[m]),c,u+16)}if(t.strokeStyle=a.textSecondary+"40",t.lineWidth=1,t.beginPath(),t.moveTo(k,u),t.lineTo(H,u),t.stroke(),T.length>1){let m=k,c=u+32;T.forEach((F,f)=>{let x=F.color||a.gradients[f%a.gradients.length][0];t.fillStyle=x,t.fillRect(m,c-4,12,3),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="left",t.fillText(F.label,m+16,c),m+=t.measureText(F.label).width+32})}this.drawSource(),this.snapshotBackground(),T.forEach((m,c)=>{let F=m.color||a.gradients[c%a.gradients.length][0],f=a.gradients[c%a.gradients.length],x=[];m.data.forEach(E=>{let W=k+(Number(E.x)-i)/o*w,V=u-(E.y-R)/g*L;x.push([W,V])});let A=Math.max(1,Math.floor(x.length*e)),B=x.slice(0,A);if(P&&B.length>1){t.save(),t.beginPath(),t.moveTo(B[0][0],u),B.forEach(([z,X])=>t.lineTo(z,X)),t.lineTo(B[B.length-1][0],u),t.closePath(),t.clip();let E=t.createLinearGradient(0,y,0,u);E.addColorStop(0,f[0]+"50"),E.addColorStop(1,f[0]+"05"),t.fillStyle=E,t.fillRect(k,y,w,L);let W=B[0][0],q=B[B.length-1][0]-W,O=6;for(let z=0;z<O;z++){let X=Math.sin(c*127.1+z*311.7)*43758.5453,ut=X-Math.floor(X),Y=Math.sin(c*127.1+(z*3+1)*311.7)*43758.5453,xt=Y-Math.floor(Y),N=Math.sin(c*127.1+(z*3+2)*311.7)*43758.5453,vt=N-Math.floor(N),Mt=W+q*(.05+ut*.9),Tt=y+L*(.2+xt*.6),kt=L*(.3+vt*.4),bt=f[z%f.length],ft=t.createRadialGradient(Mt,Tt,0,Mt,Tt,kt);ft.addColorStop(0,bt+"60"),ft.addColorStop(.5,bt+"30"),ft.addColorStop(1,bt+"00"),t.fillStyle=ft,t.fillRect(k,y,w,L)}t.restore()}if(B.length>1){t.beginPath(),t.moveTo(B[0][0],B[0][1]);for(let E=1;E<B.length;E++)t.lineTo(B[E][0],B[E][1]);t.strokeStyle=F,t.lineWidth=2.5,t.lineJoin="round",t.lineCap="round",t.stroke()}if(v&&e>.8){let E=(e-.8)*5;t.globalAlpha=E,B.forEach(([W,V])=>{t.beginPath(),t.arc(W,V,3,0,Math.PI*2),t.fillStyle=F,t.fill(),t.strokeStyle=a.bg,t.lineWidth=1.5,t.stroke()}),t.globalAlpha=1}})}formatVal(e){return Math.abs(e)>=1e12?(e/1e12).toFixed(1)+"T":Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":e.toFixed(0)}};var U=class extends I{hbarConfig;constructor(e,t){let s=t.barHeight||36,b=Math.max(300,t.data.length*(s+8)+100);t.height=t.height||b,super(e,t),this.hbarConfig={barHeight:s,valuesOnBar:!1,showRank:!1,...t},this.render()}render(){this.animate(e=>this.draw(e))}isActive(e,t){let{data:s,highlightTop:b,highlightLine:a,showRank:n}=this.hbarConfig;return a!==void 0?t===a-1:b!==void 0?t<b:n?t<3:s.some(l=>l.highlight)?!!e.highlight:!0}hasContrast(){let{data:e,highlightTop:t,highlightLine:s,showRank:b}=this.hbarConfig;return s!==void 0?!0:t!==void 0?t<e.length:b?e.length>3:e.some(a=>a.highlight)}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n,hbarConfig:l}=this,{data:T,valuePrefix:v="",valueSuffix:P="",barHeight:d=36,valuesOnBar:p,showRank:y}=l;this.drawBackground(),this.drawTitle();let u=n.top+8,k=y?36:0,w=n.left+k+120,G=s-n.right-70-w,R=8,S=Math.max(...T.map(h=>h.value)),g=this.hasContrast();T.forEach((h,i)=>{let r=u+i*(d+R),o=this.isActive(h,i);if(y){let C=n.left,M=r+d/2;if(o){let $=a.gradients[i%a.gradients.length],m=26,c=18,F=t.createLinearGradient(C,M-c/2,C+m,M-c/2);F.addColorStop(0,$[0]),F.addColorStop(1,$[1]),t.beginPath(),t.roundRect(C,M-c/2,m,c,9),t.fillStyle=F,t.fill(),t.fillStyle=a.name==="midnight"?"rgba(10,10,15,0.8)":"rgba(255,255,255,0.9)",t.font=`700 10px ${a.fontFamily}`,t.textAlign="center",t.fillText("#"+(i+1),C+m/2,M+3.5)}else t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`,t.textAlign="center",t.fillText("#"+(i+1),C+13,M+4)}t.fillStyle=g&&!o?a.textSource:a.textSecondary,t.font=o?`500 12px ${a.fontFamily}`:`400 12px ${a.fontFamily}`,t.textAlign="right",t.fillText(h.label,w-12,r+d/2+4)}),this.drawSource(),this.snapshotBackground(),T.forEach((h,i)=>{let r=u+i*(d+R),o=h.value/S*G*e;if(o<=0)return;let C=this.isActive(h,i),M=a.gradients[i%a.gradients.length],$=Math.min(4,o/2);if(t.beginPath(),t.moveTo(w,r),t.lineTo(w+o-$,r),t.quadraticCurveTo(w+o,r,w+o,r+$),t.lineTo(w+o,r+d-$),t.quadraticCurveTo(w+o,r+d,w+o-$,r+d),t.lineTo(w,r+d),t.closePath(),g&&!C){let m=a.name==="midnight";t.fillStyle=m?"rgba(255,255,240,0.08)":"rgba(0,0,0,0.06)",t.fill(),t.strokeStyle=m?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.lineWidth=1,t.stroke()}else t.save(),t.clip(),t.fillStyle=M[0],t.fillRect(w,r,o,d),this.drawLavaBlobs(w,r,o,d,M,i),t.restore();if(e>.3){let m=Math.min(1,(e-.3)*1.43);t.globalAlpha=m;let c=Math.min(1,(e-.3)/.7),F=1-Math.pow(1-c,2),f=v+this.formatNumber(h.value*F)+P;if(p&&o>70){let x=a.name==="midnight";t.fillStyle=g&&!C?x?"rgba(255,255,240,0.25)":"rgba(0,0,0,0.2)":x?"rgba(10,10,15,0.75)":"rgba(255,255,255,0.9)",t.font=C?`700 14px ${a.fontFamily}`:`600 12px ${a.fontFamily}`,t.textAlign="right",t.fillText(f,w+o-10,r+d/2+5)}else{if(C){let x=t.createLinearGradient(w+o+8,0,w+o+70,0);x.addColorStop(0,M[0]),x.addColorStop(1,M[1]),t.fillStyle=x,t.font=`700 14px ${a.fontFamily}`}else t.fillStyle=a.textSource,t.font=`400 12px ${a.fontFamily}`;t.textAlign="left",t.fillText(f,w+o+8,r+d/2+5)}t.globalAlpha=1}})}drawLavaBlobs(e,t,s,b,a,n){let{ctx:l}=this,T=v=>{let P=Math.sin(n*127.1+v*311.7)*43758.5453;return P-Math.floor(P)};for(let v=0;v<6;v++){let P=e+s*(.05+T(v*3)*.9),d=t+b*(.1+T(v*3+1)*.8),p=Math.max(s*.3,b)*(.4+T(v*3+2)*.5),y=a[v%a.length],u=l.createRadialGradient(P,d,0,P,d,p);u.addColorStop(0,y),u.addColorStop(.5,y+"99"),u.addColorStop(1,y+"00"),l.globalCompositeOperation="source-atop",l.fillStyle=u,l.fillRect(e,t,s,b),l.globalCompositeOperation="source-over"}}formatNumber(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString()}};var J=class extends I{statConfig;constructor(e,t){t.height=t.height||200,super(e,t),this.statConfig=t,this.render()}render(){this.animate(e=>this.draw(e),600)}draw(e){let{ctx:t,width:s,height:b,theme:a,statConfig:n}=this,{value:l,label:T,delta:v,deltaPositive:P,prefix:d="",suffix:p=""}=n.data;this.drawBackground();let y=typeof l=="number"?l:parseFloat(String(l)),u;if(!isNaN(y)&&typeof l=="number"){let S=y*e;u=d+this.formatBigNumber(S)+p}else u=d+String(l)+p;if(this.config.title&&(t.fillStyle=a.textSecondary,t.font=`400 11px ${a.monoFamily}`,t.textAlign="left",t.fillText(this.config.title.toUpperCase(),this.padding.left,24)),t.fillStyle=a.textSecondary,t.font=`400 14px ${a.fontFamily}`,t.textAlign="center",t.fillText(T,s/2,b/2+25),v&&e>.7){let S=(e-.7)*3.3;t.globalAlpha=Math.min(1,S);let h=(P!==void 0?P:v.startsWith("+"))?"#10b981":"#ef4444";t.fillStyle=h+"22";let i=t.measureText(v).width+16,r=s/2-i/2,o=b/2+38;t.beginPath(),t.roundRect(r,o,i,22,11),t.fill(),t.fillStyle=h,t.font=`600 11px ${a.monoFamily}`,t.textAlign="center",t.fillText(v,s/2,o+15),t.globalAlpha=1}this.drawSource(),this.snapshotBackground(),t.font=`700 48px ${a.fontFamily}`,t.textAlign="center";let k=t.measureText(u),H=s/2,w=b/2-5,L=a.highlightGradient,G=k.width,R=t.createLinearGradient(H-G/2,0,H+G/2,0);R.addColorStop(0,L[0]),R.addColorStop(1,L[1]),t.fillStyle=R,t.fillText(u,H,w)}formatBigNumber(e){return e>=1e12?(e/1e12).toFixed(1)+"T":e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,","):Math.round(e).toLocaleString()}};var j=class extends I{radarConfig;constructor(e,t){super(e,t),this.radarConfig=t,this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l}=this.radarConfig,{axes:T,datasets:v,maxValue:P}=l,d=T.length;if(d<3)return;this.drawBackground(),this.drawTitle();let p=s/2,y=n.top+(b-n.top-n.bottom)/2+8,u=Math.min((s-n.left-n.right)/2-40,(b-n.top-n.bottom)/2-30),k=P||Math.max(...v.flatMap(R=>R.values))*1.1,H=Math.PI*2/d,w=-Math.PI/2,L=5;t.strokeStyle=a.grid,t.lineWidth=1;for(let R=1;R<=L;R++){let S=u*R/L;t.beginPath();for(let g=0;g<=d;g++){let h=w+g*H,i=p+Math.cos(h)*S,r=y+Math.sin(h)*S;g===0?t.moveTo(i,r):t.lineTo(i,r)}t.stroke()}for(let R=0;R<d;R++){let S=w+R*H,g=p+Math.cos(S)*u,h=y+Math.sin(S)*u;t.beginPath(),t.moveTo(p,y),t.lineTo(g,h),t.stroke()}t.fillStyle=a.textSecondary,t.font=`500 11px ${a.monoFamily}`;for(let R=0;R<d;R++){let S=w+R*H,g=u+18,h=p+Math.cos(S)*g,i=y+Math.sin(S)*g;Math.abs(Math.cos(S))<.1?t.textAlign="center":Math.cos(S)>0?t.textAlign="left":t.textAlign="right",t.textBaseline=Math.abs(Math.sin(S))<.1?"middle":Math.sin(S)<0?"bottom":"top",t.fillText(T[R],h,i)}this.drawSource(),this.snapshotBackground();let G=v.some(R=>R.highlight);if(v.forEach((R,S)=>{let g=!G||R.highlight,h=[];for(let i=0;i<d;i++){let r=w+i*H,C=(R.values[i]||0)/k*u*e;h.push([p+Math.cos(r)*C,y+Math.sin(r)*C])}if(t.beginPath(),h.forEach((i,r)=>{r===0?t.moveTo(i[0],i[1]):t.lineTo(i[0],i[1])}),t.closePath(),g){let i=R.highlight?a.highlightGradient:a.gradients[S%a.gradients.length],r=t.createLinearGradient(p-u,y-u,p+u,y+u);r.addColorStop(0,i[0]+"55"),r.addColorStop(1,i[1]+"55"),t.fillStyle=r,t.fill();let o=t.createLinearGradient(p-u,y-u,p+u,y+u);o.addColorStop(0,i[0]),o.addColorStop(1,i[1]),t.strokeStyle=o,t.lineWidth=2.5,t.stroke(),h.forEach(C=>{t.beginPath(),t.arc(C[0],C[1],4,0,Math.PI*2),t.fillStyle=i[0],t.fill()})}else{let i=a.name==="midnight";t.fillStyle=i?"rgba(255,255,240,0.04)":"rgba(0,0,0,0.03)",t.fill(),t.strokeStyle=i?"rgba(255,255,240,0.15)":"rgba(0,0,0,0.1)",t.lineWidth=1.5,t.stroke()}}),v.length>1){let R=b-n.bottom+4,S=n.left;t.font=`500 11px ${a.fontFamily}`,v.forEach((g,h)=>{let i=!G||g.highlight,r=g.highlight?a.highlightGradient:a.gradients[h%a.gradients.length];t.fillStyle=i?r[0]:a.textSource,t.fillRect(S,R-4,12,3),t.fillStyle=i?a.textSecondary:a.textSource,t.textAlign="left",t.fillText(g.label,S+16,R),S+=t.measureText(g.label).width+36})}}};var Q=class extends I{donutConfig;constructor(e,t){super(e,t),this.donutConfig={ringWidth:.35,...t},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this;this.drawBackground(),this.drawTitle();let l=s/2,T=n.top+(b-n.top-n.bottom)/2+8,v=Math.min((s-n.left-n.right)/2-20,(b-n.top-n.bottom)/2-20),P=this.donutConfig.ringWidth||.35,d=v*(1-P);this.drawSource(),this.snapshotBackground(),this.donutConfig.gauge?this.drawGauge(l,T,v,d,e):this.drawDonut(l,T,v,d,e)}drawGauge(e,t,s,b,a){let{ctx:n,theme:l}=this,T=Math.min(100,Math.max(0,this.donutConfig.gaugeValue||0)),v=Math.PI*1.5,P=Math.PI*.75,d=P+v,p=P+v*(T/100)*a;n.beginPath(),n.arc(e,t,s,P,d),n.arc(e,t,b,d,P,!0),n.closePath();let y=l.name==="midnight";if(n.fillStyle=y?"rgba(255,255,240,0.05)":"rgba(0,0,0,0.04)",n.fill(),T>0&&a>0){n.beginPath(),n.arc(e,t,s,P,p),n.arc(e,t,b,p,P,!0),n.closePath(),n.save(),n.clip();let k=l.highlightGradient,H=n.createLinearGradient(e-s,t-s,e+s,t+s);H.addColorStop(0,k[0]),H.addColorStop(1,k[1]),n.fillStyle=H,n.fillRect(e-s,t-s,s*2,s*2),this.drawLavaInArc(e,t,s,k),n.restore()}let u=Math.min(1,(a-.2)/.6);if(u>0){let k=Math.round(T*Math.min(1,u));n.globalAlpha=Math.min(1,u*1.5);let H=l.highlightGradient,w=n.createLinearGradient(e-30,t,e+30,t);w.addColorStop(0,H[0]),w.addColorStop(1,H[1]),n.fillStyle=w,n.font=`700 ${Math.round(s*.45)}px ${l.fontFamily}`,n.textAlign="center",n.textBaseline="middle",n.fillText(k+"",e,t-6),this.donutConfig.centerLabel&&(n.fillStyle=l.textSecondary,n.font=`400 13px ${l.fontFamily}`,n.fillText(this.donutConfig.centerLabel,e,t+s*.25)),n.globalAlpha=1}}drawDonut(e,t,s,b,a){let{ctx:n,theme:l}=this,{data:T}=this.donutConfig,v=T.reduce((p,y)=>p+y.value,0),P=T.some(p=>p.highlight),d=-Math.PI/2;if(T.forEach((p,y)=>{let u=p.value/v*Math.PI*2*a,k=d+u,H=!P||p.highlight;if(n.beginPath(),n.arc(e,t,s,d,k),n.arc(e,t,b,k,d,!0),n.closePath(),H){let w=p.highlight?l.highlightGradient:l.gradients[y%l.gradients.length];n.save(),n.clip();let L=n.createLinearGradient(e+Math.cos(d+u/2)*s*.5,t+Math.sin(d+u/2)*s*.5,e-Math.cos(d+u/2)*s*.5,t-Math.sin(d+u/2)*s*.5);L.addColorStop(0,w[0]),L.addColorStop(1,w[1]),n.fillStyle=L,n.fillRect(e-s,t-s,s*2,s*2),this.drawLavaInArc(e,t,s,w),n.restore()}else{let w=l.name==="midnight";n.fillStyle=w?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",n.fill()}if(n.strokeStyle=l.bg,n.lineWidth=2,n.stroke(),a>.7&&u>.15){let w=Math.min(1,(a-.7)/.3);n.globalAlpha=w;let L=d+u/2,G=s+14,R=e+Math.cos(L)*G,S=t+Math.sin(L)*G,g=Math.cos(L)>0;n.fillStyle=H?l.textPrimary:l.textSource,n.font=`500 11px ${l.monoFamily}`,n.textAlign=g?"left":"right",n.textBaseline="middle";let h=Math.round(p.value/v*100);n.fillText(`${p.label} ${h}%`,R+(g?4:-4),S),n.globalAlpha=1}d=k}),this.donutConfig.centerValue&&a>.5){let p=Math.min(1,(a-.5)*2);n.globalAlpha=p;let y=l.highlightGradient,u=n.createLinearGradient(e-30,t,e+30,t);u.addColorStop(0,y[0]),u.addColorStop(1,y[1]),n.fillStyle=u,n.font=`700 ${Math.round(b*.55)}px ${l.fontFamily}`,n.textAlign="center",n.textBaseline="middle",n.fillText(this.donutConfig.centerValue,e,t-4),this.donutConfig.centerLabel&&(n.fillStyle=l.textSecondary,n.font=`400 12px ${l.fontFamily}`,n.fillText(this.donutConfig.centerLabel,e,t+b*.35)),n.globalAlpha=1}}drawLavaInArc(e,t,s,b){let{ctx:a}=this;for(let n=0;n<4;n++){let l=n/4*Math.PI*2+.7,T=e+Math.cos(l)*s*.5,v=t+Math.sin(l)*s*.5,P=s*(.4+n*.15),d=b[n%b.length],p=a.createRadialGradient(T,v,0,T,v,P);p.addColorStop(0,d),p.addColorStop(.5,d+"88"),p.addColorStop(1,d+"00"),a.globalCompositeOperation="source-atop",a.fillStyle=p,a.fillRect(e-s,t-s,s*2,s*2),a.globalCompositeOperation="source-over"}}};var Z=class extends I{heatConfig;constructor(e,t){super(e,t),this.heatConfig={showValues:!1,cellRadius:4,...t},this.padding={top:60,right:24,bottom:24,left:100},this.render()}render(){this.animate(e=>this.draw(e),600)}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,showValues:T,cellRadius:v}=this.heatConfig,{rows:P,cols:d,values:p}=l;this.drawBackground(),this.drawTitle();let y=n.top+24,u=b-n.bottom,k=n.left,w=s-n.right-k,L=u-y,G=w/d.length,R=L/P.length,S=2,g=Math.min(v||4,G/4,R/4),h=p.flat(),i=Math.min(...h),o=Math.max(...h)-i||1;t.fillStyle=a.textSecondary,t.font=`500 10px ${a.monoFamily}`,t.textAlign="center",d.forEach((C,M)=>{let $=k+M*G+G/2;t.fillText(C,$,y-8)}),t.textAlign="right",P.forEach((C,M)=>{let $=y+M*R+R/2+4;t.fillText(C,k-10,$)}),this.drawSource(),this.snapshotBackground(),P.forEach((C,M)=>{d.forEach(($,m)=>{let c=p[M]?.[m]??0,f=(c-i)/o*e,x=k+m*G+S/2,A=y+M*R+S/2,B=G-S,E=R-S;if(t.beginPath(),t.moveTo(x+g,A),t.lineTo(x+B-g,A),t.quadraticCurveTo(x+B,A,x+B,A+g),t.lineTo(x+B,A+E-g),t.quadraticCurveTo(x+B,A+E,x+B-g,A+E),t.lineTo(x+g,A+E),t.quadraticCurveTo(x,A+E,x,A+E-g),t.lineTo(x,A+g),t.quadraticCurveTo(x,A,x+g,A),t.closePath(),f<.05){let W=a.name==="midnight";t.fillStyle=W?"rgba(255,255,240,0.03)":"rgba(0,0,0,0.02)",t.fill()}else{t.save(),t.clip();let W=Math.min(a.gradients.length-1,Math.floor(f*a.gradients.length*.99)),V=a.gradients[W],q=t.createLinearGradient(x,A,x+B,A+E);if(q.addColorStop(0,V[0]+this.alphaHex(f)),q.addColorStop(1,V[1]+this.alphaHex(f)),t.fillStyle=q,t.fillRect(x,A,B,E),f>.6){let O=xt=>{let N=Math.sin(M*127.1+m*311.7+xt*43.7)*43758.5453;return N-Math.floor(N)},z=x+B*(.2+O(0)*.6),X=A+E*(.2+O(1)*.6),ut=Math.max(B,E)*.6,Y=t.createRadialGradient(z,X,0,z,X,ut);Y.addColorStop(0,V[1]),Y.addColorStop(.5,V[1]+"66"),Y.addColorStop(1,V[1]+"00"),t.globalCompositeOperation="source-atop",t.fillStyle=Y,t.fillRect(x,A,B,E),t.globalCompositeOperation="source-over"}t.restore()}if(T&&e>.5&&G>30&&R>20){let W=Math.min(1,(e-.5)*2);t.globalAlpha=W,t.fillStyle=f>.5?a.bg:a.textSecondary,t.font=`500 ${Math.min(11,R*.4)}px ${a.monoFamily}`,t.textAlign="center",t.textBaseline="middle",t.fillText(this.formatCellValue(c),x+B/2,A+E/2),t.globalAlpha=1}})})}alphaHex(e){return Math.round(e*220+35).toString(16).padStart(2,"0")}formatCellValue(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":Number.isInteger(e)?e+"":e.toFixed(1)}};var tt=class extends I{bumpConfig;constructor(e,t){super(e,t),this.bumpConfig=t,this.padding={top:60,right:90,bottom:48,left:90},this.render()}render(){this.animate(e=>this.draw(e),1e3)}isActive(e,t){let{data:s,highlightTop:b}=this.bumpConfig;return b!==void 0?e.ranks[e.ranks.length-1]<=b:s.some(a=>a.highlight)?!!e.highlight:!0}hasContrast(){let{data:e,highlightTop:t}=this.bumpConfig;return t!==void 0?!0:e.some(s=>s.highlight)}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,periods:T}=this.bumpConfig;this.drawBackground(),this.drawTitle();let v=l[0]?.ranks.length||0,P=Math.max(...l.flatMap(S=>S.ranks)),d=n.top+8,p=b-n.bottom-20,y=n.left,u=s-n.right,k=u-y,H=p-d,w=S=>d+(S-1)/(P-1||1)*H,L=S=>y+S/(v-1||1)*k;t.strokeStyle=a.grid,t.lineWidth=1;for(let S=1;S<=P;S++){let g=w(S);t.beginPath(),t.moveTo(y-8,g),t.lineTo(u+8,g),t.stroke(),t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText("#"+S,y-14,g+4)}t.fillStyle=a.textSecondary,t.font=`500 11px ${a.monoFamily}`,t.textAlign="center";for(let S=0;S<v;S++){let g=T?.[S]||S+1+"";t.fillText(g,L(S),p+20)}this.drawSource(),this.snapshotBackground();let G=this.hasContrast();[...l.map((S,g)=>({...S,idx:g}))].sort((S,g)=>{let h=this.isActive(S,S.idx)?1:0,i=this.isActive(g,g.idx)?1:0;return h-i}).forEach(S=>{let g=this.isActive(S,S.idx),h=S.highlight?a.highlightGradient:a.gradients[S.idx%a.gradients.length],i=Math.max(1,Math.floor(v*e)),r=[];for(let o=0;o<i;o++)r.push([L(o),w(S.ranks[o])]);if(i<v){let o=v*e-i;if(o>0&&i>0){let C=L(i-1),M=w(S.ranks[i-1]),$=L(i),m=w(S.ranks[i]);r.push([C+($-C)*o,M+(m-M)*o])}}if(!(r.length<2)){t.beginPath(),t.moveTo(r[0][0],r[0][1]);for(let o=1;o<r.length;o++){let[C,M]=r[o-1],[$,m]=r[o],c=(C+$)/2;t.bezierCurveTo(c,M,c,m,$,m)}if(G&&!g){let o=a.name==="midnight";t.strokeStyle=o?"rgba(255,255,240,0.1)":"rgba(0,0,0,0.08)",t.lineWidth=2}else{let o=t.createLinearGradient(r[0][0],0,r[r.length-1][0],0);o.addColorStop(0,h[0]),o.addColorStop(1,h[1]),t.strokeStyle=o,t.lineWidth=3}if(t.stroke(),r.forEach((o,C)=>{if(t.beginPath(),t.arc(o[0],o[1],g?5:3,0,Math.PI*2),G&&!g){let M=a.name==="midnight";t.fillStyle=M?"rgba(255,255,240,0.12)":"rgba(0,0,0,0.08)"}else t.fillStyle=h[C<r.length/2?0:1];t.fill()}),r.length>0){let[o,C]=r[0];t.fillStyle=G&&!g?a.textSource:a.textSecondary,t.font=G&&!g?`400 10px ${a.monoFamily}`:`500 11px ${a.monoFamily}`,t.textAlign="right",t.textBaseline="middle",t.fillText(S.label,o-12,C)}if(e>.9&&r.length>=v){let o=Math.min(1,(e-.9)*10);t.globalAlpha=o;let[C,M]=r[r.length-1];if(t.textAlign="left",g){let $=t.createLinearGradient(C,M-8,C+60,M+8);$.addColorStop(0,h[0]),$.addColorStop(1,h[1]),t.fillStyle=$,t.font=`600 12px ${a.fontFamily}`}else t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`;t.fillText(S.label,C+12,M),t.globalAlpha=1}}})}};var et=class extends I{scatterConfig;constructor(e,t){super(e,t),this.scatterConfig={showLabels:!0,...t},this.padding={top:60,right:24,bottom:56,left:60},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,xLabel:T,yLabel:v,xPrefix:P="",xSuffix:d="",yPrefix:p="",ySuffix:y="",showLabels:u}=this.scatterConfig;this.drawBackground(),this.drawTitle();let k=n.top+8,H=b-n.bottom,w=n.left,L=s-n.right,G=L-w,R=H-k,S=l.map(m=>m.x),g=l.map(m=>m.y),h=Math.min(...S)*.95,i=Math.max(...S)*1.05,r=Math.min(...g)*.95,o=Math.max(...g)*1.05,C=i-h||1,M=o-r||1;t.strokeStyle=a.grid,t.lineWidth=1;for(let m=0;m<=4;m++){let c=H-R*m/4;t.beginPath(),t.moveTo(w,c),t.lineTo(L,c),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(p+this.fmt(r+M*m/4)+y,w-8,c+4)}for(let m=0;m<=4;m++){let c=w+G*m/4;t.textAlign="center",t.fillText(P+this.fmt(h+C*m/4)+d,c,H+16)}T&&(t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`,t.textAlign="center",t.fillText(T,w+G/2,H+32)),v&&(t.save(),t.translate(14,k+R/2),t.rotate(-Math.PI/2),t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`,t.textAlign="center",t.fillText(v,0,0),t.restore()),this.drawSource(),this.snapshotBackground();let $=l.some(m=>m.highlight);l.forEach((m,c)=>{let F=w+(m.x-h)/C*G,f=H-(m.y-r)/M*R,x=(m.size||6)*e,A=!$||m.highlight,B=m.highlight?a.highlightGradient:a.gradients[c%a.gradients.length];if(t.beginPath(),t.arc(F,f,x,0,Math.PI*2),A){let E=t.createRadialGradient(F,f,0,F,f,x);E.addColorStop(0,B[0]),E.addColorStop(1,B[1]),t.fillStyle=E,t.globalAlpha=.85}else{let E=a.name==="midnight";t.fillStyle=E?"rgba(255,255,240,0.1)":"rgba(0,0,0,0.06)"}t.fill(),t.globalAlpha=1,u&&m.label&&e>.6&&(t.globalAlpha=Math.min(1,(e-.6)*2.5),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="center",t.fillText(m.label,F,f-x-6),t.globalAlpha=1)})}fmt(e){return Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":e<10?e.toFixed(1):Math.round(e)+""}};var at=class extends I{bubbleConfig;constructor(e,t){super(e,t),this.bubbleConfig={maxRadius:40,...t},this.padding={top:60,right:30,bottom:56,left:60},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,xLabel:T,yLabel:v,xPrefix:P="",xSuffix:d="",yPrefix:p="",ySuffix:y="",maxRadius:u}=this.bubbleConfig;this.drawBackground(),this.drawTitle();let k=n.top+8,H=b-n.bottom,w=n.left,L=s-n.right,G=L-w,R=H-k,S=l.map(f=>f.x),g=l.map(f=>f.y),h=l.map(f=>f.z),i=Math.min(...S)*.9,r=Math.max(...S)*1.1,o=Math.min(...g)*.9,C=Math.max(...g)*1.1,M=Math.max(...h),$=r-i||1,m=C-o||1;t.strokeStyle=a.grid,t.lineWidth=1;for(let f=0;f<=4;f++){let x=H-R*f/4;t.beginPath(),t.moveTo(w,x),t.lineTo(L,x),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(p+this.fmt(o+m*f/4)+y,w-8,x+4)}for(let f=0;f<=4;f++){let x=w+G*f/4;t.fillStyle=a.textSecondary,t.textAlign="center",t.fillText(P+this.fmt(i+$*f/4)+d,x,H+16)}T&&(t.fillStyle=a.textSource,t.textAlign="center",t.fillText(T,w+G/2,H+32)),v&&(t.save(),t.translate(14,k+R/2),t.rotate(-Math.PI/2),t.fillStyle=a.textSource,t.textAlign="center",t.fillText(v,0,0),t.restore()),this.drawSource(),this.snapshotBackground();let c=l.some(f=>f.highlight);l.map((f,x)=>({...f,idx:x})).sort((f,x)=>x.z-f.z).forEach(f=>{let x=w+(f.x-i)/$*G,A=H-(f.y-o)/m*R,B=Math.max(4,f.z/M*(u||40))*e,E=!c||f.highlight,W=f.highlight?a.highlightGradient:a.gradients[f.idx%a.gradients.length];if(t.beginPath(),t.arc(x,A,B,0,Math.PI*2),E){t.save(),t.clip();let V=t.createRadialGradient(x-B*.3,A-B*.3,0,x,A,B);V.addColorStop(0,W[0]),V.addColorStop(1,W[1]),t.fillStyle=V,t.globalAlpha=.75,t.fillRect(x-B,A-B,B*2,B*2);let q=t.createRadialGradient(x+B*.2,A+B*.2,0,x,A,B*.8);q.addColorStop(0,W[1]),q.addColorStop(.5,W[1]+"66"),q.addColorStop(1,W[1]+"00"),t.globalCompositeOperation="source-atop",t.fillStyle=q,t.fillRect(x-B,A-B,B*2,B*2),t.globalCompositeOperation="source-over",t.restore(),t.globalAlpha=1}else{let V=a.name==="midnight";t.fillStyle=V?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.fill()}f.label&&B>8&&e>.5&&(t.globalAlpha=Math.min(1,(e-.5)*2),t.fillStyle=a.name==="midnight"?"rgba(10,10,15,0.8)":"rgba(255,255,255,0.9)",t.font=`600 ${Math.min(12,B*.5)}px ${a.fontFamily}`,t.textAlign="center",t.textBaseline="middle",t.fillText(f.label,x,A),t.globalAlpha=1)})}fmt(e){return Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":e<10?e.toFixed(1):Math.round(e)+""}};var nt=class extends I{waffleConfig;constructor(e,t){super(e,t),this.waffleConfig={gridSize:10,...t},this.render()}render(){this.animate(e=>this.draw(e),600)}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,total:T,gridSize:v}=this.waffleConfig,P=v||10,d=P*P,p=T||l.reduce((c,F)=>c+F.value,0);this.drawBackground(),this.drawTitle();let y=n.top+8,u=b-n.bottom-30,k=n.left+20,w=s-n.right-20-k,L=u-y,G=Math.min(w/P,L/P),R=Math.max(2,G*.1),S=G-R,g=P*G,h=P*G,i=k+(w-g)/2,r=y+(L-h)/2,o=Math.min(3,S/4),C=new Array(d).fill(-1),M=0;for(l.forEach((c,F)=>{let f=Math.round(c.value/p*d);for(let x=0;x<f&&M<d;x++)C[M++]=F});M<d;)C[M++]=l.length-1;this.drawSource(),this.snapshotBackground();let $=Math.floor(d*e),m=l.some(c=>c.highlight);for(let c=0;c<d;c++){let F=c%P,f=Math.floor(c/P),x=i+F*G,A=r+f*G,B=C[c],E=c<$,W=B>=0&&(!m||l[B]?.highlight);if(t.beginPath(),t.moveTo(x+o,A),t.lineTo(x+S-o,A),t.quadraticCurveTo(x+S,A,x+S,A+o),t.lineTo(x+S,A+S-o),t.quadraticCurveTo(x+S,A+S,x+S-o,A+S),t.lineTo(x+o,A+S),t.quadraticCurveTo(x,A+S,x,A+S-o),t.lineTo(x,A+o),t.quadraticCurveTo(x,A,x+o,A),t.closePath(),!E||B<0){let V=a.name==="midnight";t.fillStyle=V?"rgba(255,255,240,0.03)":"rgba(0,0,0,0.02)",t.fill()}else if(W){t.save(),t.clip();let V=l[B].highlight?a.highlightGradient:a.gradients[B%a.gradients.length],q=t.createLinearGradient(x,A,x+S,A+S);q.addColorStop(0,V[0]),q.addColorStop(1,V[1]),t.fillStyle=q,t.fillRect(x,A,S,S),t.restore()}else{let V=a.name==="midnight";t.fillStyle=V?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.fill()}}if(e>.7){let c=Math.min(1,(e-.7)/.3);t.globalAlpha=c;let F=i;l.forEach((f,x)=>{let A=f.highlight?a.highlightGradient:a.gradients[x%a.gradients.length],B=!m||f.highlight;t.fillStyle=B?A[0]:a.textSource,t.fillRect(F,r+h+12,10,10),t.fillStyle=B?a.textSecondary:a.textSource,t.font=`500 11px ${a.fontFamily}`,t.textAlign="left";let E=Math.round(f.value/p*100);t.fillText(`${f.label} ${E}%`,F+14,r+h+21),F+=t.measureText(`${f.label} ${E}%`).width+30}),t.globalAlpha=1}}};var it=class extends I{tmConfig;constructor(e,t){super(e,t),this.tmConfig=t,this.render()}render(){this.animate(e=>this.draw(e),600)}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l}=this.tmConfig;this.drawBackground(),this.drawTitle();let T=n.top+8,v=b-n.bottom-8,P=n.left+4,d=s-n.right-4;this.drawSource(),this.snapshotBackground();let p=this.squarify(l,P,T,d-P,v-T,0),y=l.some(H=>H.highlight),u=3,k=6;p.forEach((H,w)=>{let{x:L,y:G,w:R,h:S,item:g,depth:h}=H,i=L+u/2,r=G+u/2,o=R-u,C=S-u;if(o<2||C<2)return;let M=!y||g.highlight,$=g.highlight?a.highlightGradient:a.gradients[w%a.gradients.length],m=Math.min(k,o/4,C/4);t.beginPath(),t.moveTo(i+m,r),t.lineTo(i+o-m,r),t.quadraticCurveTo(i+o,r,i+o,r+m),t.lineTo(i+o,r+C-m),t.quadraticCurveTo(i+o,r+C,i+o-m,r+C),t.lineTo(i+m,r+C),t.quadraticCurveTo(i,r+C,i,r+C-m),t.lineTo(i,r+m),t.quadraticCurveTo(i,r,i+m,r),t.closePath();let c=Math.min(1,e*1.5);if(M){t.save(),t.clip();let F=t.createLinearGradient(i,r,i+o,r+C);F.addColorStop(0,$[0]),F.addColorStop(1,$[1]),t.globalAlpha=.15+.7*c,t.fillStyle=F,t.fillRect(i,r,o,C);let f=W=>{let V=Math.sin(w*127.1+W*311.7)*43758.5;return V-Math.floor(V)},x=i+o*(.2+f(0)*.6),A=r+C*(.2+f(1)*.6),B=Math.max(o,C)*.5,E=t.createRadialGradient(x,A,0,x,A,B);E.addColorStop(0,$[1]),E.addColorStop(.5,$[1]+"77"),E.addColorStop(1,$[1]+"00"),t.globalCompositeOperation="source-atop",t.fillStyle=E,t.fillRect(i,r,o,C),t.globalCompositeOperation="source-over",t.restore(),t.globalAlpha=1}else{let F=a.name==="midnight";t.fillStyle=F?"rgba(255,255,240,0.05)":"rgba(0,0,0,0.03)",t.globalAlpha=c,t.fill(),t.globalAlpha=1}if(o>40&&C>24&&e>.4){t.globalAlpha=Math.min(1,(e-.4)/.4);let F=a.name==="midnight";t.fillStyle=M?F?"rgba(10,10,15,0.85)":"rgba(255,255,255,0.9)":a.textSource;let f=Math.min(14,o/8,C/3);t.font=`600 ${f}px ${a.fontFamily}`,t.textAlign="center",t.textBaseline="middle",t.fillText(this.truncate(g.label,o-8,f),i+o/2,r+C/2-f*.3),C>40&&(t.font=`400 ${Math.max(9,f*.7)}px ${a.monoFamily}`,t.fillText(this.fmtVal(g.value),i+o/2,r+C/2+f*.6)),t.globalAlpha=1}})}squarify(e,t,s,b,a,n){let l=e.reduce((w,L)=>w+L.value,0);if(l===0||e.length===0)return[];let T=[],v=t,P=s,d=b,p=a,y=[...e].sort((w,L)=>L.value-w.value),u=[],k=0,H=l;for(let w of y)if(u.push(w),k+=w.value,u.length===y.length||this.worst(u,k,d,p,H)<=this.worst([...u,y[u.length]],k+(y[u.length]?.value||0),d,p,H)){let L=d>=p,G=k/H,R=L?d*G:p*G,S=L?P:v;for(let g of u){let h=g.value/k,i=L?p*h:d*h,r=L?{x:v,y:S,w:R,h:i,item:g,depth:n}:{x:S,y:P,w:i,h:R,item:g,depth:n};T.push(r),S+=i}L?(v+=R,d-=R):(P+=R,p-=R),u=[],k=0}return T}worst(e,t,s,b,a){if(!e.length||!a)return 1/0;let n=t/a*(s>=b?s:b);if(n===0)return 1/0;let l=s>=b?b:s,T=0;for(let v of e){let d=v.value/a*s*b/n,p=Math.max(n/d,d/n);T=Math.max(T,p)}return T}truncate(e,t,s){let{ctx:b,theme:a}=this;if(b.font=`600 ${s}px ${a.fontFamily}`,b.measureText(e).width<=t)return e;let n=e;for(;n.length>2&&b.measureText(n+"..").width>t;)n=n.slice(0,-1);return n+".."}fmtVal(e){return e>=1e12?(e/1e12).toFixed(1)+"T":e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e+""}};var ot=class extends I{stackConfig;constructor(e,t){super(e,t),this.stackConfig={showValues:!1,normalized:!1,horizontal:!1,...t},this.padding=t.horizontal?{top:60,right:24,bottom:48,left:100}:{top:60,right:24,bottom:48,left:40},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,horizontal:T,showValues:v,normalized:P}=this.stackConfig,{categories:d,series:p}=l;this.drawBackground(),this.drawTitle();let y=n.top+8,u=b-n.bottom-20,k=n.left,H=s-n.right,w=H-k,L=u-y,G=d.map((h,i)=>p.reduce((r,o)=>r+o.values[i],0)),R=P?1:Math.max(...G)*1.1,S=4,g=p.some(h=>h.highlight);if(T){let h=Math.min(40,(L-(d.length-1)*8)/d.length),i=(L-d.length*h)/(d.length-1||1);t.fillStyle=a.textSecondary,t.font=`400 11px ${a.monoFamily}`,t.textAlign="right",d.forEach((r,o)=>{t.fillText(r,k-10,y+o*(h+i)+h/2+4)}),this.drawSource(),this.snapshotBackground(),d.forEach((r,o)=>{let C=G[o],M=k;p.forEach(($,m)=>{let c=$.values[o],f=(P?c/C:c/R)*w*e,x=y+o*(h+i),A=!g||$.highlight,B=$.highlight?a.highlightGradient:a.gradients[m%a.gradients.length];if(f>1){if(t.beginPath(),t.rect(M,x,f,h),t.closePath(),A){t.save(),t.clip();let E=t.createLinearGradient(M,x,M+f,x+h);E.addColorStop(0,B[0]),E.addColorStop(1,B[1]),t.fillStyle=E,t.fillRect(M,x,f,h),t.restore()}else{let E=a.name==="midnight";t.fillStyle=E?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.fill()}t.strokeStyle=a.bg,t.lineWidth=1,t.stroke()}M+=f})})}else{let h=Math.min(60,(w-(d.length-1)*12)/d.length),i=(w-d.length*h)/(d.length-1||1);t.strokeStyle=a.grid,t.lineWidth=1;for(let r=1;r<=4;r++){let o=u-L*r/4;t.beginPath(),t.moveTo(k,o),t.lineTo(H,o),t.stroke()}t.fillStyle=a.textSecondary,t.font=`400 11px ${a.monoFamily}`,t.textAlign="center",d.forEach((r,o)=>{t.fillText(r,k+o*(h+i)+h/2,u+16)}),this.drawSource(),this.snapshotBackground(),d.forEach((r,o)=>{let C=G[o],M=u;p.forEach(($,m)=>{let c=$.values[o],f=(P?c/C:c/R)*L*e,x=k+o*(h+i);M-=f;let A=!g||$.highlight,B=$.highlight?a.highlightGradient:a.gradients[m%a.gradients.length];if(f>1){if(t.beginPath(),t.rect(x,M,h,f),t.closePath(),A){t.save(),t.clip();let E=t.createLinearGradient(x,M,x,M+f);E.addColorStop(0,B[0]),E.addColorStop(1,B[1]),t.fillStyle=E,t.fillRect(x,M,h,f),t.restore()}else{let E=a.name==="midnight";t.fillStyle=E?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.fill()}t.strokeStyle=a.bg,t.lineWidth=1,t.stroke()}})})}if(e>.8){let h=Math.min(1,(e-.8)/.2);t.globalAlpha=h;let i=k;p.forEach((r,o)=>{let C=r.highlight?a.highlightGradient:a.gradients[o%a.gradients.length],M=!g||r.highlight;t.fillStyle=M?C[0]:a.textSource,t.fillRect(i,b-16,10,3),t.fillStyle=M?a.textSecondary:a.textSource,t.font=`500 10px ${a.fontFamily}`,t.textAlign="left",t.fillText(r.label,i+14,b-12),i+=t.measureText(r.label).width+30}),t.globalAlpha=1}}};var rt=class extends I{candleConfig;constructor(e,t){super(e,t),this.candleConfig=t,this.padding={top:60,right:24,bottom:48,left:60},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,yPrefix:T="",ySuffix:v=""}=this.candleConfig;this.drawBackground(),this.drawTitle();let P=n.top+8,d=b-n.bottom-20,p=n.left,y=s-n.right,u=y-p,k=d-P,H=l.flatMap(r=>[r.high,r.low]),w=Math.min(...H)*.98,G=Math.max(...H)*1.02-w||1,R=r=>d-(r-w)/G*k;t.strokeStyle=a.grid,t.lineWidth=1;for(let r=0;r<=5;r++){let o=d-k*r/5;t.beginPath(),t.moveTo(p,o),t.lineTo(y,o),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(T+this.fmt(w+G*r/5)+v,p-8,o+4)}let S=Math.max(1,Math.floor(l.length/8));t.textAlign="center";for(let r=0;r<l.length;r+=S){let o=p+(r+.5)/l.length*u;t.fillText(l[r].label,o,d+16)}this.drawSource(),this.snapshotBackground();let g=Math.min(20,u/l.length*.7),h=1.5,i=Math.floor(l.length*e);for(let r=0;r<i;r++){let o=l[r],C=p+(r+.5)/l.length*u,M=o.close>=o.open,$=R(Math.max(o.open,o.close)),m=R(Math.min(o.open,o.close)),c=Math.max(1,m-$),F=R(o.high),f=R(o.low),x=M?a.gradients[2]:[a.highlightGradient[0],"#ff6b6b"];t.strokeStyle=M?x[0]+"aa":x[1]+"aa",t.lineWidth=h,t.beginPath(),t.moveTo(C,F),t.lineTo(C,f),t.stroke();let A=C-g/2;t.beginPath();let B=Math.min(3,g/4,c/4);t.moveTo(A+B,$),t.lineTo(A+g-B,$),t.quadraticCurveTo(A+g,$,A+g,$+B),t.lineTo(A+g,m-B),t.quadraticCurveTo(A+g,m,A+g-B,m),t.lineTo(A+B,m),t.quadraticCurveTo(A,m,A,m-B),t.lineTo(A,$+B),t.quadraticCurveTo(A,$,A+B,$),t.closePath(),t.save(),t.clip();let E=t.createLinearGradient(A,$,A+g,m);E.addColorStop(0,x[0]),E.addColorStop(1,x[1]),t.fillStyle=E,t.fillRect(A,$,g,c),t.restore()}}fmt(e){return Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":e<100?e.toFixed(1):Math.round(e)+""}};var lt=class extends I{funnelConfig;constructor(e,t){super(e,t),this.funnelConfig={showPercentage:!0,...t},this.render()}render(){this.animate(e=>this.draw(e),700)}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,showPercentage:T}=this.funnelConfig;this.drawBackground(),this.drawTitle();let v=n.top+8,P=b-n.bottom-8,d=s/2,p=P-v,y=s-n.left-n.right-80,u=l[0]?.value||1,k=p/l.length,H=3;this.drawSource(),this.snapshotBackground();let w=l.some(L=>L.highlight);l.forEach((L,G)=>{let R=L.value/u,S=l[G+1]?l[G+1].value/u:R*.7,g=R*y*e,h=(G<l.length-1?S:R*.7)*y*e,i=v+G*k+H/2,r=k-H,o=!w||L.highlight,C=L.highlight?a.highlightGradient:a.gradients[G%a.gradients.length];if(t.beginPath(),t.moveTo(d-g/2,i),t.lineTo(d+g/2,i),t.lineTo(d+h/2,i+r),t.lineTo(d-h/2,i+r),t.closePath(),o){t.save(),t.clip();let M=t.createLinearGradient(d-g/2,i,d+g/2,i+r);M.addColorStop(0,C[0]),M.addColorStop(1,C[1]),t.fillStyle=M,t.fillRect(d-g/2,i,g,r);let $=x=>{let A=Math.sin(G*127.1+x*311.7)*43758.5;return A-Math.floor(A)},m=d+g*($(0)-.5)*.5,c=i+r*$(1),F=Math.max(g,r)*.4,f=t.createRadialGradient(m,c,0,m,c,F);f.addColorStop(0,C[1]),f.addColorStop(.5,C[1]+"77"),f.addColorStop(1,C[1]+"00"),t.globalCompositeOperation="source-atop",t.fillStyle=f,t.fillRect(d-g/2,i,g,r),t.globalCompositeOperation="source-over",t.restore()}else{let M=a.name==="midnight";t.fillStyle=M?"rgba(255,255,240,0.06)":"rgba(0,0,0,0.04)",t.fill()}if(t.strokeStyle=a.bg,t.lineWidth=1,t.stroke(),e>.5){let M=Math.min(1,(e-.5)*2);t.globalAlpha=M;let $=d+Math.max(g,h)/2+16;t.fillStyle=o?a.textPrimary:a.textSource,t.font=`500 12px ${a.fontFamily}`,t.textAlign="left",t.textBaseline="middle",t.fillText(L.label,$,i+r/2-7),t.fillStyle=o?a.textSecondary:a.textSource,t.font=`400 11px ${a.monoFamily}`;let m=this.fmtVal(L.value);T&&G>0&&(m+=` (${Math.round(L.value/u*100)}%)`),t.fillText(m,$,i+r/2+8),t.globalAlpha=1}})}fmtVal(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toLocaleString()}};var st=class extends I{lolliConfig;constructor(e,t){super(e,t),this.lolliConfig={horizontal:!0,...t},this.padding=t.horizontal!==!1?{top:60,right:60,bottom:48,left:100}:{top:60,right:24,bottom:48,left:40},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,horizontal:T,valuePrefix:v="",valueSuffix:P=""}=this.lolliConfig;this.drawBackground(),this.drawTitle();let d=n.top+8,p=b-n.bottom-20,y=n.left,k=s-n.right-y,H=p-d,w=Math.max(...l.map(G=>G.value))*1.1,L=l.some(G=>G.highlight);if(T){let G=Math.min(30,H/l.length),R=(H-l.length*G)/(l.length-1||1);t.font=`400 11px ${a.monoFamily}`,t.textAlign="right",l.forEach((S,g)=>{let h=!L||S.highlight;t.fillStyle=h?a.textSecondary:a.textSource;let i=d+g*(G+R)+G/2;t.fillText(S.label,y-10,i+4)}),t.strokeStyle=a.grid,t.lineWidth=1,t.beginPath(),t.moveTo(y,d),t.lineTo(y,p),t.stroke(),this.drawSource(),this.snapshotBackground(),l.forEach((S,g)=>{let h=!L||S.highlight,i=S.highlight?a.highlightGradient:a.gradients[g%a.gradients.length],r=d+g*(G+R)+G/2,o=y+S.value/w*k*e,C=h?6:4;if(t.strokeStyle=h?i[0]+"aa":a.name==="midnight"?"rgba(255,255,240,0.1)":"rgba(0,0,0,0.08)",t.lineWidth=h?2.5:1.5,t.beginPath(),t.moveTo(y,r),t.lineTo(o,r),t.stroke(),t.beginPath(),t.arc(o,r,C,0,Math.PI*2),h){let M=t.createRadialGradient(o,r,0,o,r,C);M.addColorStop(0,i[0]),M.addColorStop(1,i[1]),t.fillStyle=M}else t.fillStyle=a.name==="midnight"?"rgba(255,255,240,0.12)":"rgba(0,0,0,0.08)";if(t.fill(),e>.5){if(t.globalAlpha=Math.min(1,(e-.5)*2),h){let M=t.createLinearGradient(o,r-8,o+40,r+8);M.addColorStop(0,i[0]),M.addColorStop(1,i[1]),t.fillStyle=M,t.font=`600 12px ${a.fontFamily}`}else t.fillStyle=a.textSource,t.font=`400 10px ${a.monoFamily}`;t.textAlign="left",t.fillText(v+this.fmt(S.value*Math.min(1,e/.8))+P,o+C+6,r+4),t.globalAlpha=1}})}}fmt(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":Math.round(e).toLocaleString()}};var ht=class extends I{areaConfig;constructor(e,t){super(e,t),this.areaConfig={stacked:!1,...t},this.padding={top:60,right:24,bottom:48,left:56},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,stacked:T,yPrefix:v="",ySuffix:P=""}=this.areaConfig;this.drawBackground(),this.drawTitle();let d=n.top+8,p=b-n.bottom-20,y=n.left,u=s-n.right,k=u-y,H=p-d,w=l[0]?.data.length||0,L=l[0]?.data.map(c=>c.x)||[],G=Math.min(...L),S=Math.max(...L)-G||1,g=[];if(T){g=new Array(l.length).fill(null).map(()=>new Array(w).fill(0));for(let c=0;c<w;c++){let F=0;for(let f=0;f<l.length;f++)F+=l[f].data[c]?.y||0,g[f][c]=F}}let h=T?g[l.length-1]||[]:l.flatMap(c=>c.data.map(F=>F.y)),i=Math.max(...h)*1.1,r=T?0:Math.min(0,Math.min(...h)),o=i-r||1,C=c=>y+(c-G)/S*k,M=c=>p-(c-r)/o*H;t.strokeStyle=a.grid,t.lineWidth=1;for(let c=0;c<=4;c++){let F=p-H*c/4;t.beginPath(),t.moveTo(y,F),t.lineTo(u,F),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(v+this.fmt(r+o*c/4)+P,y-8,F+4)}let $=Math.max(1,Math.floor(w/8));t.textAlign="center";for(let c=0;c<w;c+=$)t.fillText(String(L[c]),C(L[c]),p+16);this.drawSource(),this.snapshotBackground();let m=l.some(c=>c.highlight);for(let c=l.length-1;c>=0;c--){let F=l[c],f=!m||F.highlight,x=F.highlight?a.highlightGradient:a.gradients[c%a.gradients.length],A=Math.max(2,Math.ceil(w*e)),B=[],E=[];for(let W=0;W<A&&W<w;W++){let V=C(L[W]);T?(B.push([V,M(g[c][W])]),E.push([V,c>0?M(g[c-1][W]):M(0)])):(B.push([V,M(F.data[W].y)]),E.push([V,M(0)]))}t.beginPath(),B.forEach((W,V)=>V===0?t.moveTo(W[0],W[1]):t.lineTo(W[0],W[1]));for(let W=E.length-1;W>=0;W--)t.lineTo(E[W][0],E[W][1]);if(t.closePath(),f){let W=t.createLinearGradient(0,d,0,p);W.addColorStop(0,x[0]+"66"),W.addColorStop(1,x[1]+"11"),t.fillStyle=W}else{let W=a.name==="midnight";t.fillStyle=W?"rgba(255,255,240,0.04)":"rgba(0,0,0,0.02)"}if(t.fill(),t.beginPath(),B.forEach((W,V)=>V===0?t.moveTo(W[0],W[1]):t.lineTo(W[0],W[1])),f){let W=t.createLinearGradient(B[0][0],0,B[B.length-1][0],0);W.addColorStop(0,x[0]),W.addColorStop(1,x[1]),t.strokeStyle=W,t.lineWidth=2}else t.strokeStyle=a.name==="midnight"?"rgba(255,255,240,0.1)":"rgba(0,0,0,0.06)",t.lineWidth=1;t.stroke()}if(l.length>1&&e>.8){let c=Math.min(1,(e-.8)/.2);t.globalAlpha=c;let F=y;l.forEach((f,x)=>{let A=f.highlight?a.highlightGradient:a.gradients[x%a.gradients.length],B=!m||f.highlight;t.fillStyle=B?A[0]:a.textSource,t.fillRect(F,b-14,12,3),t.fillStyle=B?a.textSecondary:a.textSource,t.font=`500 10px ${a.fontFamily}`,t.textAlign="left",t.fillText(f.label,F+16,b-10),F+=t.measureText(f.label).width+32}),t.globalAlpha=1}}fmt(e){return Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":Math.round(e)+""}};var ct=class extends I{sankeyConfig;constructor(e,t){super(e,t),this.sankeyConfig=t,this.padding={top:60,right:24,bottom:24,left:24},this.render()}render(){this.animate(e=>this.draw(e),900)}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{nodes:l,links:T}=this.sankeyConfig.data;this.drawBackground(),this.drawTitle();let v=n.top+8,P=b-n.bottom-8,d=n.left+60,p=s-n.right-60,y=P-v,u=this.assignColumns(l,T),k=Math.max(...u),H=g=>d+g/(k||1)*(p-d),w=l.map((g,h)=>{let i=T.filter(o=>o.target===h).reduce((o,C)=>o+C.value,0),r=T.filter(o=>o.source===h).reduce((o,C)=>o+C.value,0);return Math.max(i,r)}),L=Math.max(...w)||1,G=new Array(l.length),R=Math.min(20,(p-d)/(k+1)*.15);for(let g=0;g<=k;g++){let h=l.map((C,M)=>M).filter(C=>u[C]===g),i=h.reduce((C,M)=>C+w[M],0),r=Math.min(20,(y-i/L*y*.8)/(h.length||1)),o=v+(y-h.reduce((C,M)=>C+w[M]/L*y*.8,0)-(h.length-1)*r)/2;h.forEach(C=>{let M=Math.max(4,w[C]/L*y*.8);G[C]={x:H(g)-R/2,y:o,w:R,h:M},o+=M+r})}this.drawSource(),this.snapshotBackground();let S=T.some(g=>g.highlight);T.forEach((g,h)=>{let i=G[g.source],r=G[g.target];if(!i||!r)return;let o=!S||g.highlight,C=g.highlight?a.highlightGradient:a.gradients[h%a.gradients.length],M=Math.max(2,g.value/L*y*.8),$=i.y+i.h/2,m=r.y+r.h/2,c=i.x+i.w,F=r.x,f=c+(F-c)*.4,x=c+(F-c)*.6;if(t.beginPath(),t.moveTo(c,$-M/2*e),t.bezierCurveTo(f,$-M/2*e,x,m-M/2*e,F,m-M/2*e),t.lineTo(F,m+M/2*e),t.bezierCurveTo(x,m+M/2*e,f,$+M/2*e,c,$+M/2*e),t.closePath(),o){let A=t.createLinearGradient(c,0,F,0);A.addColorStop(0,C[0]+"55"),A.addColorStop(1,C[1]+"55"),t.fillStyle=A}else t.fillStyle=a.name==="midnight"?"rgba(255,255,240,0.04)":"rgba(0,0,0,0.02)";t.fill()}),l.forEach((g,h)=>{let i=G[h];if(!i)return;let r=a.gradients[h%a.gradients.length];t.beginPath();let o=Math.min(4,i.w/4);t.moveTo(i.x+o,i.y),t.lineTo(i.x+i.w-o,i.y),t.quadraticCurveTo(i.x+i.w,i.y,i.x+i.w,i.y+o),t.lineTo(i.x+i.w,i.y+i.h-o),t.quadraticCurveTo(i.x+i.w,i.y+i.h,i.x+i.w-o,i.y+i.h),t.lineTo(i.x+o,i.y+i.h),t.quadraticCurveTo(i.x,i.y+i.h,i.x,i.y+i.h-o),t.lineTo(i.x,i.y+o),t.quadraticCurveTo(i.x,i.y,i.x+o,i.y),t.closePath();let C=t.createLinearGradient(i.x,i.y,i.x,i.y+i.h);C.addColorStop(0,r[0]),C.addColorStop(1,r[1]),t.fillStyle=C,t.fill(),e>.5&&(t.globalAlpha=Math.min(1,(e-.5)*2),t.fillStyle=a.textSecondary,t.font=`500 11px ${a.fontFamily}`,t.textBaseline="middle",u[h]===0?(t.textAlign="right",t.fillText(g.label,i.x-8,i.y+i.h/2)):(t.textAlign="left",t.fillText(g.label,i.x+i.w+8,i.y+i.h/2)),t.globalAlpha=1)})}assignColumns(e,t){let s=e.length,b=new Array(s).fill(0),a=new Set(t.map(v=>v.target)),n=new Set(t.map(v=>v.source)),l=!0,T=0;for(;l&&T<20;)l=!1,T++,t.forEach(v=>{let P=b[v.source]+1;P>b[v.target]&&(b[v.target]=P,l=!0)});return b}};var gt=class extends I{histConfig;constructor(e,t){super(e,t),this.histConfig=t,this.padding={top:60,right:24,bottom:56,left:50},this.render()}render(){this.animate(e=>this.draw(e))}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,bins:T,xLabel:v,yLabel:P,xPrefix:d="",xSuffix:p=""}=this.histConfig;this.drawBackground(),this.drawTitle();let y=n.top+8,u=b-n.bottom,k=n.left,H=s-n.right,w=H-k,L=u-y,G=Math.min(...l),S=Math.max(...l)-G||1,g=T||Math.max(5,Math.min(30,Math.ceil(Math.sqrt(l.length)))),h=S/g,i=new Array(g).fill(0);l.forEach(m=>{let c=Math.min(g-1,Math.floor((m-G)/h));i[c]++});let r=Math.max(...i);t.strokeStyle=a.grid,t.lineWidth=1;for(let m=0;m<=4;m++){let c=u-L*m/4;t.beginPath(),t.moveTo(k,c),t.lineTo(H,c),t.stroke(),t.fillStyle=a.textSecondary,t.font=`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(Math.round(r*m/4)+"",k-8,c+4)}t.textAlign="center";let o=Math.max(1,Math.floor(g/6));for(let m=0;m<=g;m+=o){let c=k+m/g*w;t.fillText(d+this.fmt(G+m*h)+p,c,u+16)}v&&(t.fillStyle=a.textSource,t.textAlign="center",t.fillText(v,k+w/2,u+34)),P&&(t.save(),t.translate(14,y+L/2),t.rotate(-Math.PI/2),t.fillStyle=a.textSource,t.textAlign="center",t.fillText(P,0,0),t.restore()),this.drawSource(),this.snapshotBackground();let C=w/g,M=Math.max(1,C*.05),$=Math.min(4,(C-M)/4);i.forEach((m,c)=>{let F=m/r*L*e,f=k+c*C+M/2,x=u-F,A=C-M;if(F<1)return;let B=i.indexOf(r),E=Math.abs(c-B)/(g||1),W=E<.25?a.gradients[2]:E<.5?a.gradients[0]:E<.75?a.gradients[3]:[a.highlightGradient[0],"#ff6b6b"];t.beginPath(),t.moveTo(f+$,x),t.lineTo(f+A-$,x),t.quadraticCurveTo(f+A,x,f+A,x+$),t.lineTo(f+A,x+F),t.lineTo(f,x+F),t.lineTo(f,x+$),t.quadraticCurveTo(f,x,f+$,x),t.closePath(),t.save(),t.clip();let V=t.createLinearGradient(f,x,f+A,x+F);V.addColorStop(0,W[0]),V.addColorStop(1,W[1]),t.fillStyle=V,t.fillRect(f,x,A,F),t.restore()})}fmt(e){return Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":e<10?e.toFixed(1):Math.round(e)+""}};var dt=class extends I{slopeConfig;constructor(e,t){super(e,t),this.slopeConfig=t,this.padding={top:60,right:100,bottom:48,left:100},this.render()}render(){this.animate(e=>this.draw(e),900)}draw(e){let{ctx:t,width:s,height:b,theme:a,padding:n}=this,{data:l,startLabel:T,endLabel:v,valuePrefix:P="",valueSuffix:d=""}=this.slopeConfig;this.drawBackground(),this.drawTitle();let p=n.top+20,y=b-n.bottom-8,u=n.left,k=s-n.right,H=y-p,w=l.flatMap(h=>[h.start,h.end]),L=Math.min(...w)*.9,R=Math.max(...w)*1.1-L||1,S=h=>y-(h-L)/R*H;t.fillStyle=a.textSecondary,t.font=`600 12px ${a.fontFamily}`,t.textAlign="center",t.fillText(T||"Before",u,p-10),t.fillText(v||"After",k,p-10),t.strokeStyle=a.grid,t.lineWidth=1,t.beginPath(),t.moveTo(u,p),t.lineTo(u,y),t.stroke(),t.beginPath(),t.moveTo(k,p),t.lineTo(k,y),t.stroke(),this.drawSource(),this.snapshotBackground();let g=l.some(h=>h.highlight);l.forEach((h,i)=>{let r=!g||h.highlight,o=h.highlight?a.highlightGradient:a.gradients[i%a.gradients.length],C=S(h.start),M=S(h.end),$=u+(k-u)*e,m=C+(M-C)*e;if(t.beginPath(),t.moveTo(u,C),t.lineTo($,m),r){let c=t.createLinearGradient(u,0,k,0);c.addColorStop(0,o[0]),c.addColorStop(1,o[1]),t.strokeStyle=c,t.lineWidth=3}else t.strokeStyle=a.name==="midnight"?"rgba(255,255,240,0.1)":"rgba(0,0,0,0.06)",t.lineWidth=1.5;if(t.stroke(),t.beginPath(),t.arc(u,C,r?5:3,0,Math.PI*2),t.fillStyle=r?o[0]:a.name==="midnight"?"rgba(255,255,240,0.12)":"rgba(0,0,0,0.08)",t.fill(),e>.9&&(t.beginPath(),t.arc(k,M,r?5:3,0,Math.PI*2),t.fillStyle=r?o[1]:a.name==="midnight"?"rgba(255,255,240,0.12)":"rgba(0,0,0,0.08)",t.fill()),t.fillStyle=r?a.textSecondary:a.textSource,t.font=r?`500 11px ${a.fontFamily}`:`400 10px ${a.monoFamily}`,t.textAlign="right",t.fillText(`${h.label} ${P}${this.fmt(h.start)}${d}`,u-10,C+4),e>.9){let c=Math.min(1,(e-.9)*10);t.globalAlpha=c,t.textAlign="left";let F=h.end-h.start,f=F>0?"+":"";t.fillText(`${P}${this.fmt(h.end)}${d} (${f}${this.fmt(F)})`,k+10,M+4),t.globalAlpha=1}})}fmt(e){return Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":Math.round(e)+""}};function wt(D,e){switch(e.type){case"bar":return new K(D,e);case"line":return new _(D,e);case"hbar":return new U(D,e);case"stat":return new J(D,e);case"radar":return new j(D,e);case"donut":return new Q(D,e);case"heatmap":return new Z(D,e);case"bump":return new tt(D,e);case"scatter":return new et(D,e);case"bubble":return new at(D,e);case"waffle":return new nt(D,e);case"treemap":return new it(D,e);case"stacked-bar":return new ot(D,e);case"candlestick":return new rt(D,e);case"funnel":return new lt(D,e);case"lollipop":return new st(D,e);case"area":return new ht(D,e);case"sankey":return new ct(D,e);case"histogram":return new gt(D,e);case"slope":return new dt(D,e);default:console.error("DropThe Charts: unknown type",e.type)}}function yt(){document.querySelectorAll("[data-dt-chart]").forEach(D=>{try{let e=JSON.parse(D.getAttribute("data-dt-chart")||"{}");wt(D,e)}catch(e){console.error("DropThe Charts: invalid config",e)}})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",yt):yt());return Rt($t);})();
